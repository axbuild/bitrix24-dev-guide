
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Comprehensive Bitrix24 API Documentation and Developer Guide. Complete reference for Bitrix24 modules, REST API, and development best practices.">
      
      
        <meta name="author" content="Axbuild">
      
      
        <link rel="canonical" href="https://axbuild.github.io/bitrix24-dev-guide/modules/voximplant/">
      
      
        <link rel="prev" href="../catalog/">
      
      
        <link rel="next" href="../im/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Voximplant - Bitrix24 Developer Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-XXXXXXXXXX"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-XXXXXXXXXX",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Voximplant - Bitrix24 Developer Guide" >
      
        <meta  property="og:description"  content="Comprehensive Bitrix24 API Documentation and Developer Guide. Complete reference for Bitrix24 modules, REST API, and development best practices." >
      
        <meta  property="og:image"  content="https://axbuild.github.io/bitrix24-dev-guide/assets/images/social/modules/voximplant/index.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://axbuild.github.io/bitrix24-dev-guide/modules/voximplant/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Voximplant - Bitrix24 Developer Guide" >
      
        <meta  name="twitter:description"  content="Comprehensive Bitrix24 API Documentation and Developer Guide. Complete reference for Bitrix24 modules, REST API, and development best practices." >
      
        <meta  name="twitter:image"  content="https://axbuild.github.io/bitrix24-dev-guide/assets/images/social/modules/voximplant/index.png" >
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#voximplant-module-voximplant" class="md-skip">
          Перейти к содержанию
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул">
    <a href="../.." title="Bitrix24 Developer Guide" class="md-header__button md-logo" aria-label="Bitrix24 Developer Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Bitrix24 Developer Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Voximplant
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Выберите язык">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Поиск" placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Поиск">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Поделиться" aria-label="Поделиться" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Очистить" aria-label="Очистить" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Инициализация поиска
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/axbuild/bitrix24-dev-guide" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    axbuild/bitrix24-dev-guide
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Вкладки" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Главная

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../main/" class="md-tabs__link">
          
  
  
    
  
  Модули

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/contributing.md" class="md-tabs__link">
          
  
  
    
  
  О проекте

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Навигация" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Bitrix24 Developer Guide" class="md-nav__button md-logo" aria-label="Bitrix24 Developer Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg>

    </a>
    Bitrix24 Developer Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/axbuild/bitrix24-dev-guide" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    axbuild/bitrix24-dev-guide
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Главная
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../main/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Модули
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Модули
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../crm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CRM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tasks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../iblock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Iblock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../form/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Form
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../disk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pull/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pull
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../socialnetwork/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Socialnetwork
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calendar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calendar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../forum/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Forum
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blog/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../catalog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Catalog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../support/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Voximplant
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Voximplant
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview | Обзор
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    <span class="md-ellipsis">
      Methods | Методы
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Methods | Методы">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phone-number-management" class="md-nav__link">
    <span class="md-ellipsis">
      Phone Number Management | Управление телефонными номерами
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#call-management" class="md-nav__link">
    <span class="md-ellipsis">
      Call Management | Управление звонками
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#call-routing" class="md-nav__link">
    <span class="md-ellipsis">
      Call Routing | Маршрутизация звонков
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queue-management" class="md-nav__link">
    <span class="md-ellipsis">
      Queue Management | Управление очередями
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crm-integration-crm" class="md-nav__link">
    <span class="md-ellipsis">
      CRM Integration | Интеграция с CRM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#call-recording" class="md-nav__link">
    <span class="md-ellipsis">
      Call Recording | Запись звонков
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statistics" class="md-nav__link">
    <span class="md-ellipsis">
      Statistics | Статистика
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webrtc-integration-webrtc" class="md-nav__link">
    <span class="md-ellipsis">
      WebRTC Integration | Интеграция с WebRTC
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Handlers | Обработчики
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handlers | Обработчики">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#call-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Call Handlers | Обработчики звонков
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#line-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Line Handlers | Обработчики линий
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      User Handlers | Обработчики пользователей
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#call-flow-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Call Flow Handlers | Обработчики потоков звонков
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crm-integration-handlers-crm" class="md-nav__link">
    <span class="md-ellipsis">
      CRM Integration Handlers | Обработчики интеграции с CRM
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rest-api-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      REST API | REST API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="REST API | REST API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#call-management_1" class="md-nav__link">
    <span class="md-ellipsis">
      Call Management | Управление звонками
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#line-management" class="md-nav__link">
    <span class="md-ellipsis">
      Line Management | Управление линиями
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-management" class="md-nav__link">
    <span class="md-ellipsis">
      User Management | Управление пользователями
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#call-flow-management" class="md-nav__link">
    <span class="md-ellipsis">
      Call Flow Management | Управление потоками звонков
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crm-integration-crm_1" class="md-nav__link">
    <span class="md-ellipsis">
      CRM Integration | Интеграция с CRM
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../im/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Im
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mobile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mobile
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    О проекте
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            О проекте
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contributing.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/changelog.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="voximplant-module-voximplant">Voximplant Module | Модуль Voximplant<a class="headerlink" href="#voximplant-module-voximplant" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview | Обзор<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The Voximplant module provides functionality for telephony integration in Bitrix24. It enables users to make and receive calls, manage call flows, record calls, and integrate with CRM and other modules. | Модуль Voximplant предоставляет функциональность для интеграции телефонии в Bitrix24. Он позволяет пользователям совершать и принимать звонки, управлять потоками звонков, записывать звонки и интегрироваться с CRM и другими модулями.</p>
<h2 id="methods">Methods | Методы<a class="headerlink" href="#methods" title="Permanent link">&para;</a></h2>
<h3 id="phone-number-management">Phone Number Management | Управление телефонными номерами<a class="headerlink" href="#phone-number-management" title="Permanent link">&para;</a></h3>
<h4 id="get-phone-numbers">Get Phone Numbers | Получение телефонных номеров<a class="headerlink" href="#get-phone-numbers" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="x">// D7</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="x">$phoneNumbers = \Bitrix\Voximplant\Phone::getList([</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="x">    &#39;select&#39; =&gt; [&#39;*&#39;],</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="x">    &#39;filter&#39; =&gt; [&#39;ACTIVE&#39; =&gt; &#39;Y&#39;]</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="x">]);</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="x">$phoneNumbers = CVoxImplantPhone::GetList([], [&#39;ACTIVE&#39; =&gt; &#39;Y&#39;]);</span>
</code></pre></div>
<h4 id="add-phone-number">Add Phone Number | Добавление телефонного номера<a class="headerlink" href="#add-phone-number" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="x">// D7</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="x">$result = \Bitrix\Voximplant\Phone::add([</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; &#39;+74951234567&#39;,</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Main Office&#39;,</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Main office phone number&#39;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="x">]);</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="x">// Legacy</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="x">$result = CVoxImplantPhone::Add([</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; &#39;+74951234567&#39;,</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Main Office&#39;,</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Main office phone number&#39;</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="update-phone-number">Update Phone Number | Обновление телефонного номера<a class="headerlink" href="#update-phone-number" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="x">// D7</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="x">$result = \Bitrix\Voximplant\Phone::update($phoneId, [</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Main Office&#39;,</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated main office phone number&#39;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="x">]);</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="x">$result = CVoxImplantPhone::Update($phoneId, [</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Main Office&#39;,</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated main office phone number&#39;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-phone-number">Delete Phone Number | Удаление телефонного номера<a class="headerlink" href="#delete-phone-number" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="x">// D7</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="x">$result = \Bitrix\Voximplant\Phone::delete($phoneId);</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="x">$result = CVoxImplantPhone::Delete($phoneId);</span>
</code></pre></div>
<h3 id="call-management">Call Management | Управление звонками<a class="headerlink" href="#call-management" title="Permanent link">&para;</a></h3>
<h4 id="make-call">Make Call | Совершение звонка<a class="headerlink" href="#make-call" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="x">// D7</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="x">$call = \Bitrix\Voximplant\Call::make([</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; &#39;+74951234567&#39;,</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="x">    &#39;CALLER_ID&#39; =&gt; &#39;+74951234567&#39;,</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="x">    &#39;CRM_ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="x">    &#39;CRM_ENTITY_ID&#39; =&gt; $leadId</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="x">]);</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="x">// Legacy</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="x">$call = CVoxImplant::MakeCall([</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; &#39;+74951234567&#39;,</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="x">    &#39;CALLER_ID&#39; =&gt; &#39;+74951234567&#39;,</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="x">    &#39;CRM_ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="x">    &#39;CRM_ENTITY_ID&#39; =&gt; $leadId</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-call">Get Call | Получение информации о звонке<a class="headerlink" href="#get-call" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="x">// D7</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="x">$call = \Bitrix\Voximplant\Call::getById($callId);</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="x">$call = CVoxImplant::GetCall($callId);</span>
</code></pre></div>
<h4 id="get-call-list">Get Call List | Получение списка звонков<a class="headerlink" href="#get-call-list" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="x">// D7</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="x">$calls = \Bitrix\Voximplant\Call::getList([</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="x">    &#39;select&#39; =&gt; [&#39;*&#39;],</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="x">    &#39;filter&#39; =&gt; [</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="x">        &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="x">        &#39;&gt;=CALL_START_DATE&#39; =&gt; new \Bitrix\Main\Type\DateTime(&#39;2023-01-01 00:00:00&#39;)</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="x">    ],</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="x">    &#39;order&#39; =&gt; [&#39;CALL_START_DATE&#39; =&gt; &#39;DESC&#39;]</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="x">]);</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="x">// Legacy</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="x">$calls = CVoxImplant::GetCallList([</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="x">    &#39;&gt;=CALL_START_DATE&#39; =&gt; &#39;2023-01-01 00:00:00&#39;</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="x">], [&#39;CALL_START_DATE&#39; =&gt; &#39;DESC&#39;]);</span>
</code></pre></div>
<h4 id="end-call">End Call | Завершение звонка<a class="headerlink" href="#end-call" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="x">// D7</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="x">$call = \Bitrix\Voximplant\Call::getById($callId);</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="x">$result = $call-&gt;end();</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="x">$result = CVoxImplant::EndCall($callId);</span>
</code></pre></div>
<h3 id="call-routing">Call Routing | Маршрутизация звонков<a class="headerlink" href="#call-routing" title="Permanent link">&para;</a></h3>
<h4 id="get-routing-rules">Get Routing Rules | Получение правил маршрутизации<a class="headerlink" href="#get-routing-rules" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="x">// D7</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="x">$rules = \Bitrix\Voximplant\Routing::getRules([</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="x">    &#39;select&#39; =&gt; [&#39;*&#39;],</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="x">    &#39;filter&#39; =&gt; [&#39;ACTIVE&#39; =&gt; &#39;Y&#39;]</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="x">]);</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="x">$rules = CVoxImplantRouting::GetList([], [&#39;ACTIVE&#39; =&gt; &#39;Y&#39;]);</span>
</code></pre></div>
<h4 id="add-routing-rule">Add Routing Rule | Добавление правила маршрутизации<a class="headerlink" href="#add-routing-rule" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="x">// D7</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="x">$result = \Bitrix\Voximplant\Routing::addRule([</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Sales Department&#39;,</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; &#39;+74951234567&#39;,</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="x">    &#39;QUEUE_ID&#39; =&gt; $queueId,</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Route calls to sales department&#39;</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="x">]);</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="x">// Legacy</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="x">$result = CVoxImplantRouting::Add([</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Sales Department&#39;,</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; &#39;+74951234567&#39;,</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="x">    &#39;QUEUE_ID&#39; =&gt; $queueId,</span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Route calls to sales department&#39;</span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="update-routing-rule">Update Routing Rule | Обновление правила маршрутизации<a class="headerlink" href="#update-routing-rule" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="x">// D7</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="x">$result = \Bitrix\Voximplant\Routing::updateRule($ruleId, [</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Sales Department&#39;,</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated route calls to sales department&#39;</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="x">]);</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="x">$result = CVoxImplantRouting::Update($ruleId, [</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Sales Department&#39;,</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated route calls to sales department&#39;</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-routing-rule">Delete Routing Rule | Удаление правила маршрутизации<a class="headerlink" href="#delete-routing-rule" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="x">// D7</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="x">$result = \Bitrix\Voximplant\Routing::deleteRule($ruleId);</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="x">$result = CVoxImplantRouting::Delete($ruleId);</span>
</code></pre></div>
<h3 id="queue-management">Queue Management | Управление очередями<a class="headerlink" href="#queue-management" title="Permanent link">&para;</a></h3>
<h4 id="get-queues">Get Queues | Получение очередей<a class="headerlink" href="#get-queues" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="x">// D7</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="x">$queues = \Bitrix\Voximplant\Queue::getList([</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="x">    &#39;select&#39; =&gt; [&#39;*&#39;],</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="x">    &#39;filter&#39; =&gt; [&#39;ACTIVE&#39; =&gt; &#39;Y&#39;]</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="x">]);</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="x">$queues = CVoxImplantQueue::GetList([], [&#39;ACTIVE&#39; =&gt; &#39;Y&#39;]);</span>
</code></pre></div>
<h4 id="add-queue">Add Queue | Добавление очереди<a class="headerlink" href="#add-queue" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="x">// D7</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="x">$result = \Bitrix\Voximplant\Queue::add([</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Sales Queue&#39;,</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Queue for sales department&#39;,</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="x">    &#39;USERS&#39; =&gt; [$userId1, $userId2, $userId3]</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="x">]);</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="x">// Legacy</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="x">$result = CVoxImplantQueue::Add([</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Sales Queue&#39;,</span>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Queue for sales department&#39;,</span>
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="x">    &#39;USERS&#39; =&gt; [$userId1, $userId2, $userId3]</span>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="update-queue">Update Queue | Обновление очереди<a class="headerlink" href="#update-queue" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="x">// D7</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="x">$result = \Bitrix\Voximplant\Queue::update($queueId, [</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Sales Queue&#39;,</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated queue for sales department&#39;,</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="x">    &#39;USERS&#39; =&gt; [$userId1, $userId2, $userId3, $userId4]</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="x">]);</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="x">// Legacy</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="x">$result = CVoxImplantQueue::Update($queueId, [</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Sales Queue&#39;,</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated queue for sales department&#39;,</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="x">    &#39;USERS&#39; =&gt; [$userId1, $userId2, $userId3, $userId4]</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-queue">Delete Queue | Удаление очереди<a class="headerlink" href="#delete-queue" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="x">// D7</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="x">$result = \Bitrix\Voximplant\Queue::delete($queueId);</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="x">$result = CVoxImplantQueue::Delete($queueId);</span>
</code></pre></div>
<h3 id="crm-integration-crm">CRM Integration | Интеграция с CRM<a class="headerlink" href="#crm-integration-crm" title="Permanent link">&para;</a></h3>
<h4 id="link-call-to-crm-crm">Link Call to CRM | Привязка звонка к CRM<a class="headerlink" href="#link-call-to-crm-crm" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="x">// D7</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="x">$call = \Bitrix\Voximplant\Call::getById($callId);</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="x">$result = $call-&gt;linkToCrm([</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="x">    &#39;ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="x">    &#39;ENTITY_ID&#39; =&gt; $leadId</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="x">]);</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="x">// Legacy</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="x">$result = CVoxImplant::LinkCallToCrm($callId, &#39;LEAD&#39;, $leadId);</span>
</code></pre></div>
<h4 id="get-crm-calls-crm">Get CRM Calls | Получение звонков из CRM<a class="headerlink" href="#get-crm-calls-crm" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="x">// D7</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="x">$calls = \Bitrix\Voximplant\Call::getCrmCalls([</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="x">    &#39;ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="x">    &#39;ENTITY_ID&#39; =&gt; $leadId</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="x">]);</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="x">$calls = CVoxImplant::GetCrmCalls(&#39;LEAD&#39;, $leadId);</span>
</code></pre></div>
<h4 id="create-crm-activity-crm">Create CRM Activity | Создание активности в CRM<a class="headerlink" href="#create-crm-activity-crm" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="x">// D7</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="x">$call = \Bitrix\Voximplant\Call::getById($callId);</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="x">$result = $call-&gt;createCrmActivity([</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="x">    &#39;ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="x">    &#39;ENTITY_ID&#39; =&gt; $leadId,</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="x">    &#39;SUBJECT&#39; =&gt; &#39;Phone call&#39;,</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Call with client&#39;,</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="x">    &#39;RESPONSIBLE_ID&#39; =&gt; $USER-&gt;GetID()</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="x">]);</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="x">// Legacy</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="x">$result = CVoxImplant::CreateCrmActivity($callId, &#39;LEAD&#39;, $leadId, [</span>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="x">    &#39;SUBJECT&#39; =&gt; &#39;Phone call&#39;,</span>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Call with client&#39;,</span>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="x">    &#39;RESPONSIBLE_ID&#39; =&gt; $USER-&gt;GetID()</span>
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="x">]);</span>
</code></pre></div>
<h3 id="call-recording">Call Recording | Запись звонков<a class="headerlink" href="#call-recording" title="Permanent link">&para;</a></h3>
<h4 id="start-recording">Start Recording | Начало записи звонка<a class="headerlink" href="#start-recording" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="x">// D7</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="x">$call = \Bitrix\Voximplant\Call::getById($callId);</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="x">$result = $call-&gt;startRecording();</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="x">$result = CVoxImplant::StartRecording($callId);</span>
</code></pre></div>
<h4 id="stop-recording">Stop Recording | Остановка записи звонка<a class="headerlink" href="#stop-recording" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="x">// D7</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="x">$call = \Bitrix\Voximplant\Call::getById($callId);</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="x">$result = $call-&gt;stopRecording();</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="x">$result = CVoxImplant::StopRecording($callId);</span>
</code></pre></div>
<h4 id="get-recording">Get Recording | Получение записи звонка<a class="headerlink" href="#get-recording" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="x">// D7</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="x">$call = \Bitrix\Voximplant\Call::getById($callId);</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="x">$recording = $call-&gt;getRecording();</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="x">$recording = CVoxImplant::GetRecording($callId);</span>
</code></pre></div>
<h3 id="statistics">Statistics | Статистика<a class="headerlink" href="#statistics" title="Permanent link">&para;</a></h3>
<h4 id="get-call-statistics">Get Call Statistics | Получение статистики звонков<a class="headerlink" href="#get-call-statistics" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="x">// D7</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="x">$statistics = \Bitrix\Voximplant\Statistics::getCallStatistics([</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="x">    &#39;FROM&#39; =&gt; new \Bitrix\Main\Type\DateTime(&#39;2023-01-01 00:00:00&#39;),</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="x">    &#39;TO&#39; =&gt; new \Bitrix\Main\Type\DateTime(&#39;2023-01-31 23:59:59&#39;)</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="x">]);</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="x">// Legacy</span>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="x">$statistics = CVoxImplant::GetCallStatistics([</span>
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="x">    &#39;FROM&#39; =&gt; &#39;2023-01-01 00:00:00&#39;,</span>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="x">    &#39;TO&#39; =&gt; &#39;2023-01-31 23:59:59&#39;</span>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-queue-statistics">Get Queue Statistics | Получение статистики очередей<a class="headerlink" href="#get-queue-statistics" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="x">// D7</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="x">$statistics = \Bitrix\Voximplant\Statistics::getQueueStatistics([</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="x">    &#39;QUEUE_ID&#39; =&gt; $queueId,</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="x">    &#39;FROM&#39; =&gt; new \Bitrix\Main\Type\DateTime(&#39;2023-01-01 00:00:00&#39;),</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="x">    &#39;TO&#39; =&gt; new \Bitrix\Main\Type\DateTime(&#39;2023-01-31 23:59:59&#39;)</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="x">]);</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="x">// Legacy</span>
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="x">$statistics = CVoxImplant::GetQueueStatistics([</span>
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="x">    &#39;QUEUE_ID&#39; =&gt; $queueId,</span>
<a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a><span class="x">    &#39;FROM&#39; =&gt; &#39;2023-01-01 00:00:00&#39;,</span>
<a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a><span class="x">    &#39;TO&#39; =&gt; &#39;2023-01-31 23:59:59&#39;</span>
<a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a><span class="x">]);</span>
</code></pre></div>
<h3 id="webrtc-integration-webrtc">WebRTC Integration | Интеграция с WebRTC<a class="headerlink" href="#webrtc-integration-webrtc" title="Permanent link">&para;</a></h3>
<h4 id="initialize-webrtc-webrtc">Initialize WebRTC | Инициализация WebRTC<a class="headerlink" href="#initialize-webrtc-webrtc" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="x">// D7</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="x">$webrtc = \Bitrix\Voximplant\WebRTC::initialize([</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="x">    &#39;DEVICE_TYPE&#39; =&gt; &#39;desktop&#39;</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="x">]);</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="x">$webrtc = CVoxImplantWebRTC::Initialize([</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="x">    &#39;DEVICE_TYPE&#39; =&gt; &#39;desktop&#39;</span>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-webrtc-settings-webrtc">Get WebRTC Settings | Получение настроек WebRTC<a class="headerlink" href="#get-webrtc-settings-webrtc" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="x">// D7</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="x">$settings = \Bitrix\Voximplant\WebRTC::getSettings($USER-&gt;GetID());</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="x">$settings = CVoxImplantWebRTC::GetSettings($USER-&gt;GetID());</span>
</code></pre></div>
<h4 id="update-webrtc-settings-webrtc">Update WebRTC Settings | Обновление настроек WebRTC<a class="headerlink" href="#update-webrtc-settings-webrtc" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="x">// D7</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="x">$result = \Bitrix\Voximplant\WebRTC::updateSettings($USER-&gt;GetID(), [</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="x">    &#39;DEVICE_TYPE&#39; =&gt; &#39;mobile&#39;,</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="x">    &#39;ENABLE_NOTIFICATIONS&#39; =&gt; &#39;Y&#39;</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="x">]);</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="x">$result = CVoxImplantWebRTC::UpdateSettings($USER-&gt;GetID(), [</span>
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="x">    &#39;DEVICE_TYPE&#39; =&gt; &#39;mobile&#39;,</span>
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="x">    &#39;ENABLE_NOTIFICATIONS&#39; =&gt; &#39;Y&#39;</span>
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="x">]);</span>
</code></pre></div>
<h2 id="handlers">Handlers | Обработчики<a class="headerlink" href="#handlers" title="Permanent link">&para;</a></h2>
<h3 id="call-handlers">Call Handlers | Обработчики звонков<a class="headerlink" href="#call-handlers" title="Permanent link">&para;</a></h3>
<h4 id="call-handler">Call Handler | Обработчик звонка<a class="headerlink" href="#call-handler" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="x">// D7</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="x">class CustomCallHandler extends \Bitrix\Voximplant\Call\Handler</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="x">{</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="x">    public function onBeforeCallStart($params)</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="x">    {</span>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="x">        // Code executed before call is started</span>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="x">        // Код, выполняемый перед началом звонка</span>
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="x">    }</span>
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="x">    public function onAfterCallStart($params, $result)</span>
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="x">    {</span>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a><span class="x">        // Code executed after call is started</span>
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="x">        // Код, выполняемый после начала звонка</span>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="x">    }</span>
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a><span class="x">    public function onBeforeCallEnd($params)</span>
<a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a><span class="x">    {</span>
<a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a><span class="x">        // Code executed before call is ended</span>
<a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a><span class="x">        // Код, выполняемый перед завершением звонка</span>
<a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a><span class="x">    }</span>
<a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a>
<a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a><span class="x">    public function onAfterCallEnd($params, $result)</span>
<a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a><span class="x">    {</span>
<a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a><span class="x">        // Code executed after call is ended</span>
<a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a><span class="x">        // Код, выполняемый после завершения звонка</span>
<a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a><span class="x">    }</span>
<a id="__codelineno-27-33" name="__codelineno-27-33" href="#__codelineno-27-33"></a>
<a id="__codelineno-27-34" name="__codelineno-27-34" href="#__codelineno-27-34"></a><span class="x">    public function onBeforeCallTransfer($params)</span>
<a id="__codelineno-27-35" name="__codelineno-27-35" href="#__codelineno-27-35"></a><span class="x">    {</span>
<a id="__codelineno-27-36" name="__codelineno-27-36" href="#__codelineno-27-36"></a><span class="x">        // Code executed before call is transferred</span>
<a id="__codelineno-27-37" name="__codelineno-27-37" href="#__codelineno-27-37"></a><span class="x">        // Код, выполняемый перед перенаправлением звонка</span>
<a id="__codelineno-27-38" name="__codelineno-27-38" href="#__codelineno-27-38"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-39" name="__codelineno-27-39" href="#__codelineno-27-39"></a><span class="x">    }</span>
<a id="__codelineno-27-40" name="__codelineno-27-40" href="#__codelineno-27-40"></a>
<a id="__codelineno-27-41" name="__codelineno-27-41" href="#__codelineno-27-41"></a><span class="x">    public function onAfterCallTransfer($params, $result)</span>
<a id="__codelineno-27-42" name="__codelineno-27-42" href="#__codelineno-27-42"></a><span class="x">    {</span>
<a id="__codelineno-27-43" name="__codelineno-27-43" href="#__codelineno-27-43"></a><span class="x">        // Code executed after call is transferred</span>
<a id="__codelineno-27-44" name="__codelineno-27-44" href="#__codelineno-27-44"></a><span class="x">        // Код, выполняемый после перенаправления звонка</span>
<a id="__codelineno-27-45" name="__codelineno-27-45" href="#__codelineno-27-45"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-46" name="__codelineno-27-46" href="#__codelineno-27-46"></a><span class="x">    }</span>
<a id="__codelineno-27-47" name="__codelineno-27-47" href="#__codelineno-27-47"></a>
<a id="__codelineno-27-48" name="__codelineno-27-48" href="#__codelineno-27-48"></a><span class="x">    public function onBeforeCallRecord($params)</span>
<a id="__codelineno-27-49" name="__codelineno-27-49" href="#__codelineno-27-49"></a><span class="x">    {</span>
<a id="__codelineno-27-50" name="__codelineno-27-50" href="#__codelineno-27-50"></a><span class="x">        // Code executed before call is recorded</span>
<a id="__codelineno-27-51" name="__codelineno-27-51" href="#__codelineno-27-51"></a><span class="x">        // Код, выполняемый перед записью звонка</span>
<a id="__codelineno-27-52" name="__codelineno-27-52" href="#__codelineno-27-52"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-53" name="__codelineno-27-53" href="#__codelineno-27-53"></a><span class="x">    }</span>
<a id="__codelineno-27-54" name="__codelineno-27-54" href="#__codelineno-27-54"></a>
<a id="__codelineno-27-55" name="__codelineno-27-55" href="#__codelineno-27-55"></a><span class="x">    public function onAfterCallRecord($params, $result)</span>
<a id="__codelineno-27-56" name="__codelineno-27-56" href="#__codelineno-27-56"></a><span class="x">    {</span>
<a id="__codelineno-27-57" name="__codelineno-27-57" href="#__codelineno-27-57"></a><span class="x">        // Code executed after call is recorded</span>
<a id="__codelineno-27-58" name="__codelineno-27-58" href="#__codelineno-27-58"></a><span class="x">        // Код, выполняемый после записи звонка</span>
<a id="__codelineno-27-59" name="__codelineno-27-59" href="#__codelineno-27-59"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-60" name="__codelineno-27-60" href="#__codelineno-27-60"></a><span class="x">    }</span>
<a id="__codelineno-27-61" name="__codelineno-27-61" href="#__codelineno-27-61"></a>
<a id="__codelineno-27-62" name="__codelineno-27-62" href="#__codelineno-27-62"></a><span class="x">    public function onBeforeCallAnswer($params)</span>
<a id="__codelineno-27-63" name="__codelineno-27-63" href="#__codelineno-27-63"></a><span class="x">    {</span>
<a id="__codelineno-27-64" name="__codelineno-27-64" href="#__codelineno-27-64"></a><span class="x">        // Code executed before call is answered</span>
<a id="__codelineno-27-65" name="__codelineno-27-65" href="#__codelineno-27-65"></a><span class="x">        // Код, выполняемый перед ответом на звонок</span>
<a id="__codelineno-27-66" name="__codelineno-27-66" href="#__codelineno-27-66"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-67" name="__codelineno-27-67" href="#__codelineno-27-67"></a><span class="x">    }</span>
<a id="__codelineno-27-68" name="__codelineno-27-68" href="#__codelineno-27-68"></a>
<a id="__codelineno-27-69" name="__codelineno-27-69" href="#__codelineno-27-69"></a><span class="x">    public function onAfterCallAnswer($params, $result)</span>
<a id="__codelineno-27-70" name="__codelineno-27-70" href="#__codelineno-27-70"></a><span class="x">    {</span>
<a id="__codelineno-27-71" name="__codelineno-27-71" href="#__codelineno-27-71"></a><span class="x">        // Code executed after call is answered</span>
<a id="__codelineno-27-72" name="__codelineno-27-72" href="#__codelineno-27-72"></a><span class="x">        // Код, выполняемый после ответа на звонок</span>
<a id="__codelineno-27-73" name="__codelineno-27-73" href="#__codelineno-27-73"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-74" name="__codelineno-27-74" href="#__codelineno-27-74"></a><span class="x">    }</span>
<a id="__codelineno-27-75" name="__codelineno-27-75" href="#__codelineno-27-75"></a>
<a id="__codelineno-27-76" name="__codelineno-27-76" href="#__codelineno-27-76"></a><span class="x">    public function onBeforeCallReject($params)</span>
<a id="__codelineno-27-77" name="__codelineno-27-77" href="#__codelineno-27-77"></a><span class="x">    {</span>
<a id="__codelineno-27-78" name="__codelineno-27-78" href="#__codelineno-27-78"></a><span class="x">        // Code executed before call is rejected</span>
<a id="__codelineno-27-79" name="__codelineno-27-79" href="#__codelineno-27-79"></a><span class="x">        // Код, выполняемый перед отклонением звонка</span>
<a id="__codelineno-27-80" name="__codelineno-27-80" href="#__codelineno-27-80"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-81" name="__codelineno-27-81" href="#__codelineno-27-81"></a><span class="x">    }</span>
<a id="__codelineno-27-82" name="__codelineno-27-82" href="#__codelineno-27-82"></a>
<a id="__codelineno-27-83" name="__codelineno-27-83" href="#__codelineno-27-83"></a><span class="x">    public function onAfterCallReject($params, $result)</span>
<a id="__codelineno-27-84" name="__codelineno-27-84" href="#__codelineno-27-84"></a><span class="x">    {</span>
<a id="__codelineno-27-85" name="__codelineno-27-85" href="#__codelineno-27-85"></a><span class="x">        // Code executed after call is rejected</span>
<a id="__codelineno-27-86" name="__codelineno-27-86" href="#__codelineno-27-86"></a><span class="x">        // Код, выполняемый после отклонения звонка</span>
<a id="__codelineno-27-87" name="__codelineno-27-87" href="#__codelineno-27-87"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-88" name="__codelineno-27-88" href="#__codelineno-27-88"></a><span class="x">    }</span>
<a id="__codelineno-27-89" name="__codelineno-27-89" href="#__codelineno-27-89"></a>
<a id="__codelineno-27-90" name="__codelineno-27-90" href="#__codelineno-27-90"></a><span class="x">    public function onBeforeCallHold($params)</span>
<a id="__codelineno-27-91" name="__codelineno-27-91" href="#__codelineno-27-91"></a><span class="x">    {</span>
<a id="__codelineno-27-92" name="__codelineno-27-92" href="#__codelineno-27-92"></a><span class="x">        // Code executed before call is held</span>
<a id="__codelineno-27-93" name="__codelineno-27-93" href="#__codelineno-27-93"></a><span class="x">        // Код, выполняемый перед постановкой звонка на удержание</span>
<a id="__codelineno-27-94" name="__codelineno-27-94" href="#__codelineno-27-94"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-95" name="__codelineno-27-95" href="#__codelineno-27-95"></a><span class="x">    }</span>
<a id="__codelineno-27-96" name="__codelineno-27-96" href="#__codelineno-27-96"></a>
<a id="__codelineno-27-97" name="__codelineno-27-97" href="#__codelineno-27-97"></a><span class="x">    public function onAfterCallHold($params, $result)</span>
<a id="__codelineno-27-98" name="__codelineno-27-98" href="#__codelineno-27-98"></a><span class="x">    {</span>
<a id="__codelineno-27-99" name="__codelineno-27-99" href="#__codelineno-27-99"></a><span class="x">        // Code executed after call is held</span>
<a id="__codelineno-27-100" name="__codelineno-27-100" href="#__codelineno-27-100"></a><span class="x">        // Код, выполняемый после постановки звонка на удержание</span>
<a id="__codelineno-27-101" name="__codelineno-27-101" href="#__codelineno-27-101"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-102" name="__codelineno-27-102" href="#__codelineno-27-102"></a><span class="x">    }</span>
<a id="__codelineno-27-103" name="__codelineno-27-103" href="#__codelineno-27-103"></a>
<a id="__codelineno-27-104" name="__codelineno-27-104" href="#__codelineno-27-104"></a><span class="x">    public function onBeforeCallUnhold($params)</span>
<a id="__codelineno-27-105" name="__codelineno-27-105" href="#__codelineno-27-105"></a><span class="x">    {</span>
<a id="__codelineno-27-106" name="__codelineno-27-106" href="#__codelineno-27-106"></a><span class="x">        // Code executed before call is unheld</span>
<a id="__codelineno-27-107" name="__codelineno-27-107" href="#__codelineno-27-107"></a><span class="x">        // Код, выполняемый перед снятием звонка с удержания</span>
<a id="__codelineno-27-108" name="__codelineno-27-108" href="#__codelineno-27-108"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-109" name="__codelineno-27-109" href="#__codelineno-27-109"></a><span class="x">    }</span>
<a id="__codelineno-27-110" name="__codelineno-27-110" href="#__codelineno-27-110"></a>
<a id="__codelineno-27-111" name="__codelineno-27-111" href="#__codelineno-27-111"></a><span class="x">    public function onAfterCallUnhold($params, $result)</span>
<a id="__codelineno-27-112" name="__codelineno-27-112" href="#__codelineno-27-112"></a><span class="x">    {</span>
<a id="__codelineno-27-113" name="__codelineno-27-113" href="#__codelineno-27-113"></a><span class="x">        // Code executed after call is unheld</span>
<a id="__codelineno-27-114" name="__codelineno-27-114" href="#__codelineno-27-114"></a><span class="x">        // Код, выполняемый после снятия звонка с удержания</span>
<a id="__codelineno-27-115" name="__codelineno-27-115" href="#__codelineno-27-115"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-116" name="__codelineno-27-116" href="#__codelineno-27-116"></a><span class="x">    }</span>
<a id="__codelineno-27-117" name="__codelineno-27-117" href="#__codelineno-27-117"></a><span class="x">}</span>
<a id="__codelineno-27-118" name="__codelineno-27-118" href="#__codelineno-27-118"></a>
<a id="__codelineno-27-119" name="__codelineno-27-119" href="#__codelineno-27-119"></a><span class="x">// Register handler</span>
<a id="__codelineno-27-120" name="__codelineno-27-120" href="#__codelineno-27-120"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-27-121" name="__codelineno-27-121" href="#__codelineno-27-121"></a><span class="x">\Bitrix\Voximplant\Call\Handler::register(&#39;custom_call&#39;, CustomCallHandler::class);</span>
<a id="__codelineno-27-122" name="__codelineno-27-122" href="#__codelineno-27-122"></a>
<a id="__codelineno-27-123" name="__codelineno-27-123" href="#__codelineno-27-123"></a><span class="x">// Legacy</span>
<a id="__codelineno-27-124" name="__codelineno-27-124" href="#__codelineno-27-124"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-27-125" name="__codelineno-27-125" href="#__codelineno-27-125"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-27-126" name="__codelineno-27-126" href="#__codelineno-27-126"></a><span class="x">class CCustomCallHandler extends CVoximplantCallHandler</span>
<a id="__codelineno-27-127" name="__codelineno-27-127" href="#__codelineno-27-127"></a><span class="x">{</span>
<a id="__codelineno-27-128" name="__codelineno-27-128" href="#__codelineno-27-128"></a><span class="x">    public function OnBeforeCallStart($params)</span>
<a id="__codelineno-27-129" name="__codelineno-27-129" href="#__codelineno-27-129"></a><span class="x">    {</span>
<a id="__codelineno-27-130" name="__codelineno-27-130" href="#__codelineno-27-130"></a><span class="x">        // Code executed before call is started</span>
<a id="__codelineno-27-131" name="__codelineno-27-131" href="#__codelineno-27-131"></a><span class="x">        // Код, выполняемый перед началом звонка</span>
<a id="__codelineno-27-132" name="__codelineno-27-132" href="#__codelineno-27-132"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-133" name="__codelineno-27-133" href="#__codelineno-27-133"></a><span class="x">    }</span>
<a id="__codelineno-27-134" name="__codelineno-27-134" href="#__codelineno-27-134"></a>
<a id="__codelineno-27-135" name="__codelineno-27-135" href="#__codelineno-27-135"></a><span class="x">    public function OnAfterCallStart($params, $result)</span>
<a id="__codelineno-27-136" name="__codelineno-27-136" href="#__codelineno-27-136"></a><span class="x">    {</span>
<a id="__codelineno-27-137" name="__codelineno-27-137" href="#__codelineno-27-137"></a><span class="x">        // Code executed after call is started</span>
<a id="__codelineno-27-138" name="__codelineno-27-138" href="#__codelineno-27-138"></a><span class="x">        // Код, выполняемый после начала звонка</span>
<a id="__codelineno-27-139" name="__codelineno-27-139" href="#__codelineno-27-139"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-140" name="__codelineno-27-140" href="#__codelineno-27-140"></a><span class="x">    }</span>
<a id="__codelineno-27-141" name="__codelineno-27-141" href="#__codelineno-27-141"></a>
<a id="__codelineno-27-142" name="__codelineno-27-142" href="#__codelineno-27-142"></a><span class="x">    public function OnBeforeCallEnd($params)</span>
<a id="__codelineno-27-143" name="__codelineno-27-143" href="#__codelineno-27-143"></a><span class="x">    {</span>
<a id="__codelineno-27-144" name="__codelineno-27-144" href="#__codelineno-27-144"></a><span class="x">        // Code executed before call is ended</span>
<a id="__codelineno-27-145" name="__codelineno-27-145" href="#__codelineno-27-145"></a><span class="x">        // Код, выполняемый перед завершением звонка</span>
<a id="__codelineno-27-146" name="__codelineno-27-146" href="#__codelineno-27-146"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-147" name="__codelineno-27-147" href="#__codelineno-27-147"></a><span class="x">    }</span>
<a id="__codelineno-27-148" name="__codelineno-27-148" href="#__codelineno-27-148"></a>
<a id="__codelineno-27-149" name="__codelineno-27-149" href="#__codelineno-27-149"></a><span class="x">    public function OnAfterCallEnd($params, $result)</span>
<a id="__codelineno-27-150" name="__codelineno-27-150" href="#__codelineno-27-150"></a><span class="x">    {</span>
<a id="__codelineno-27-151" name="__codelineno-27-151" href="#__codelineno-27-151"></a><span class="x">        // Code executed after call is ended</span>
<a id="__codelineno-27-152" name="__codelineno-27-152" href="#__codelineno-27-152"></a><span class="x">        // Код, выполняемый после завершения звонка</span>
<a id="__codelineno-27-153" name="__codelineno-27-153" href="#__codelineno-27-153"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-154" name="__codelineno-27-154" href="#__codelineno-27-154"></a><span class="x">    }</span>
<a id="__codelineno-27-155" name="__codelineno-27-155" href="#__codelineno-27-155"></a>
<a id="__codelineno-27-156" name="__codelineno-27-156" href="#__codelineno-27-156"></a><span class="x">    public function OnBeforeCallTransfer($params)</span>
<a id="__codelineno-27-157" name="__codelineno-27-157" href="#__codelineno-27-157"></a><span class="x">    {</span>
<a id="__codelineno-27-158" name="__codelineno-27-158" href="#__codelineno-27-158"></a><span class="x">        // Code executed before call is transferred</span>
<a id="__codelineno-27-159" name="__codelineno-27-159" href="#__codelineno-27-159"></a><span class="x">        // Код, выполняемый перед перенаправлением звонка</span>
<a id="__codelineno-27-160" name="__codelineno-27-160" href="#__codelineno-27-160"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-161" name="__codelineno-27-161" href="#__codelineno-27-161"></a><span class="x">    }</span>
<a id="__codelineno-27-162" name="__codelineno-27-162" href="#__codelineno-27-162"></a>
<a id="__codelineno-27-163" name="__codelineno-27-163" href="#__codelineno-27-163"></a><span class="x">    public function OnAfterCallTransfer($params, $result)</span>
<a id="__codelineno-27-164" name="__codelineno-27-164" href="#__codelineno-27-164"></a><span class="x">    {</span>
<a id="__codelineno-27-165" name="__codelineno-27-165" href="#__codelineno-27-165"></a><span class="x">        // Code executed after call is transferred</span>
<a id="__codelineno-27-166" name="__codelineno-27-166" href="#__codelineno-27-166"></a><span class="x">        // Код, выполняемый после перенаправления звонка</span>
<a id="__codelineno-27-167" name="__codelineno-27-167" href="#__codelineno-27-167"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-168" name="__codelineno-27-168" href="#__codelineno-27-168"></a><span class="x">    }</span>
<a id="__codelineno-27-169" name="__codelineno-27-169" href="#__codelineno-27-169"></a>
<a id="__codelineno-27-170" name="__codelineno-27-170" href="#__codelineno-27-170"></a><span class="x">    public function OnBeforeCallRecord($params)</span>
<a id="__codelineno-27-171" name="__codelineno-27-171" href="#__codelineno-27-171"></a><span class="x">    {</span>
<a id="__codelineno-27-172" name="__codelineno-27-172" href="#__codelineno-27-172"></a><span class="x">        // Code executed before call is recorded</span>
<a id="__codelineno-27-173" name="__codelineno-27-173" href="#__codelineno-27-173"></a><span class="x">        // Код, выполняемый перед записью звонка</span>
<a id="__codelineno-27-174" name="__codelineno-27-174" href="#__codelineno-27-174"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-175" name="__codelineno-27-175" href="#__codelineno-27-175"></a><span class="x">    }</span>
<a id="__codelineno-27-176" name="__codelineno-27-176" href="#__codelineno-27-176"></a>
<a id="__codelineno-27-177" name="__codelineno-27-177" href="#__codelineno-27-177"></a><span class="x">    public function OnAfterCallRecord($params, $result)</span>
<a id="__codelineno-27-178" name="__codelineno-27-178" href="#__codelineno-27-178"></a><span class="x">    {</span>
<a id="__codelineno-27-179" name="__codelineno-27-179" href="#__codelineno-27-179"></a><span class="x">        // Code executed after call is recorded</span>
<a id="__codelineno-27-180" name="__codelineno-27-180" href="#__codelineno-27-180"></a><span class="x">        // Код, выполняемый после записи звонка</span>
<a id="__codelineno-27-181" name="__codelineno-27-181" href="#__codelineno-27-181"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-182" name="__codelineno-27-182" href="#__codelineno-27-182"></a><span class="x">    }</span>
<a id="__codelineno-27-183" name="__codelineno-27-183" href="#__codelineno-27-183"></a>
<a id="__codelineno-27-184" name="__codelineno-27-184" href="#__codelineno-27-184"></a><span class="x">    public function OnBeforeCallAnswer($params)</span>
<a id="__codelineno-27-185" name="__codelineno-27-185" href="#__codelineno-27-185"></a><span class="x">    {</span>
<a id="__codelineno-27-186" name="__codelineno-27-186" href="#__codelineno-27-186"></a><span class="x">        // Code executed before call is answered</span>
<a id="__codelineno-27-187" name="__codelineno-27-187" href="#__codelineno-27-187"></a><span class="x">        // Код, выполняемый перед ответом на звонок</span>
<a id="__codelineno-27-188" name="__codelineno-27-188" href="#__codelineno-27-188"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-189" name="__codelineno-27-189" href="#__codelineno-27-189"></a><span class="x">    }</span>
<a id="__codelineno-27-190" name="__codelineno-27-190" href="#__codelineno-27-190"></a>
<a id="__codelineno-27-191" name="__codelineno-27-191" href="#__codelineno-27-191"></a><span class="x">    public function OnAfterCallAnswer($params, $result)</span>
<a id="__codelineno-27-192" name="__codelineno-27-192" href="#__codelineno-27-192"></a><span class="x">    {</span>
<a id="__codelineno-27-193" name="__codelineno-27-193" href="#__codelineno-27-193"></a><span class="x">        // Code executed after call is answered</span>
<a id="__codelineno-27-194" name="__codelineno-27-194" href="#__codelineno-27-194"></a><span class="x">        // Код, выполняемый после ответа на звонок</span>
<a id="__codelineno-27-195" name="__codelineno-27-195" href="#__codelineno-27-195"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-196" name="__codelineno-27-196" href="#__codelineno-27-196"></a><span class="x">    }</span>
<a id="__codelineno-27-197" name="__codelineno-27-197" href="#__codelineno-27-197"></a>
<a id="__codelineno-27-198" name="__codelineno-27-198" href="#__codelineno-27-198"></a><span class="x">    public function OnBeforeCallReject($params)</span>
<a id="__codelineno-27-199" name="__codelineno-27-199" href="#__codelineno-27-199"></a><span class="x">    {</span>
<a id="__codelineno-27-200" name="__codelineno-27-200" href="#__codelineno-27-200"></a><span class="x">        // Code executed before call is rejected</span>
<a id="__codelineno-27-201" name="__codelineno-27-201" href="#__codelineno-27-201"></a><span class="x">        // Код, выполняемый перед отклонением звонка</span>
<a id="__codelineno-27-202" name="__codelineno-27-202" href="#__codelineno-27-202"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-203" name="__codelineno-27-203" href="#__codelineno-27-203"></a><span class="x">    }</span>
<a id="__codelineno-27-204" name="__codelineno-27-204" href="#__codelineno-27-204"></a>
<a id="__codelineno-27-205" name="__codelineno-27-205" href="#__codelineno-27-205"></a><span class="x">    public function OnAfterCallReject($params, $result)</span>
<a id="__codelineno-27-206" name="__codelineno-27-206" href="#__codelineno-27-206"></a><span class="x">    {</span>
<a id="__codelineno-27-207" name="__codelineno-27-207" href="#__codelineno-27-207"></a><span class="x">        // Code executed after call is rejected</span>
<a id="__codelineno-27-208" name="__codelineno-27-208" href="#__codelineno-27-208"></a><span class="x">        // Код, выполняемый после отклонения звонка</span>
<a id="__codelineno-27-209" name="__codelineno-27-209" href="#__codelineno-27-209"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-210" name="__codelineno-27-210" href="#__codelineno-27-210"></a><span class="x">    }</span>
<a id="__codelineno-27-211" name="__codelineno-27-211" href="#__codelineno-27-211"></a>
<a id="__codelineno-27-212" name="__codelineno-27-212" href="#__codelineno-27-212"></a><span class="x">    public function OnBeforeCallHold($params)</span>
<a id="__codelineno-27-213" name="__codelineno-27-213" href="#__codelineno-27-213"></a><span class="x">    {</span>
<a id="__codelineno-27-214" name="__codelineno-27-214" href="#__codelineno-27-214"></a><span class="x">        // Code executed before call is held</span>
<a id="__codelineno-27-215" name="__codelineno-27-215" href="#__codelineno-27-215"></a><span class="x">        // Код, выполняемый перед постановкой звонка на удержание</span>
<a id="__codelineno-27-216" name="__codelineno-27-216" href="#__codelineno-27-216"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-217" name="__codelineno-27-217" href="#__codelineno-27-217"></a><span class="x">    }</span>
<a id="__codelineno-27-218" name="__codelineno-27-218" href="#__codelineno-27-218"></a>
<a id="__codelineno-27-219" name="__codelineno-27-219" href="#__codelineno-27-219"></a><span class="x">    public function OnAfterCallHold($params, $result)</span>
<a id="__codelineno-27-220" name="__codelineno-27-220" href="#__codelineno-27-220"></a><span class="x">    {</span>
<a id="__codelineno-27-221" name="__codelineno-27-221" href="#__codelineno-27-221"></a><span class="x">        // Code executed after call is held</span>
<a id="__codelineno-27-222" name="__codelineno-27-222" href="#__codelineno-27-222"></a><span class="x">        // Код, выполняемый после постановки звонка на удержание</span>
<a id="__codelineno-27-223" name="__codelineno-27-223" href="#__codelineno-27-223"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-224" name="__codelineno-27-224" href="#__codelineno-27-224"></a><span class="x">    }</span>
<a id="__codelineno-27-225" name="__codelineno-27-225" href="#__codelineno-27-225"></a>
<a id="__codelineno-27-226" name="__codelineno-27-226" href="#__codelineno-27-226"></a><span class="x">    public function OnBeforeCallUnhold($params)</span>
<a id="__codelineno-27-227" name="__codelineno-27-227" href="#__codelineno-27-227"></a><span class="x">    {</span>
<a id="__codelineno-27-228" name="__codelineno-27-228" href="#__codelineno-27-228"></a><span class="x">        // Code executed before call is unheld</span>
<a id="__codelineno-27-229" name="__codelineno-27-229" href="#__codelineno-27-229"></a><span class="x">        // Код, выполняемый перед снятием звонка с удержания</span>
<a id="__codelineno-27-230" name="__codelineno-27-230" href="#__codelineno-27-230"></a><span class="x">        return $params;</span>
<a id="__codelineno-27-231" name="__codelineno-27-231" href="#__codelineno-27-231"></a><span class="x">    }</span>
<a id="__codelineno-27-232" name="__codelineno-27-232" href="#__codelineno-27-232"></a>
<a id="__codelineno-27-233" name="__codelineno-27-233" href="#__codelineno-27-233"></a><span class="x">    public function OnAfterCallUnhold($params, $result)</span>
<a id="__codelineno-27-234" name="__codelineno-27-234" href="#__codelineno-27-234"></a><span class="x">    {</span>
<a id="__codelineno-27-235" name="__codelineno-27-235" href="#__codelineno-27-235"></a><span class="x">        // Code executed after call is unheld</span>
<a id="__codelineno-27-236" name="__codelineno-27-236" href="#__codelineno-27-236"></a><span class="x">        // Код, выполняемый после снятия звонка с удержания</span>
<a id="__codelineno-27-237" name="__codelineno-27-237" href="#__codelineno-27-237"></a><span class="x">        return $result;</span>
<a id="__codelineno-27-238" name="__codelineno-27-238" href="#__codelineno-27-238"></a><span class="x">    }</span>
<a id="__codelineno-27-239" name="__codelineno-27-239" href="#__codelineno-27-239"></a><span class="x">}</span>
<a id="__codelineno-27-240" name="__codelineno-27-240" href="#__codelineno-27-240"></a>
<a id="__codelineno-27-241" name="__codelineno-27-241" href="#__codelineno-27-241"></a><span class="x">// Register handler</span>
<a id="__codelineno-27-242" name="__codelineno-27-242" href="#__codelineno-27-242"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-27-243" name="__codelineno-27-243" href="#__codelineno-27-243"></a><span class="x">CVoximplantCallHandler::Register(&#39;custom_call&#39;, &#39;CCustomCallHandler&#39;);</span>
</code></pre></div>
<h3 id="line-handlers">Line Handlers | Обработчики линий<a class="headerlink" href="#line-handlers" title="Permanent link">&para;</a></h3>
<h4 id="line-handler">Line Handler | Обработчик линии<a class="headerlink" href="#line-handler" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="x">// D7</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="x">class CustomLineHandler extends \Bitrix\Voximplant\Line\Handler</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="x">{</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="x">    public function onBeforeLineCreate($params)</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="x">    {</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="x">        // Code executed before line is created</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="x">        // Код, выполняемый перед созданием линии</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="x">        return $params;</span>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="x">    }</span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="x">    public function onAfterLineCreate($params, $result)</span>
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="x">    {</span>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="x">        // Code executed after line is created</span>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a><span class="x">        // Код, выполняемый после создания линии</span>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a><span class="x">        return $result;</span>
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a><span class="x">    }</span>
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>
<a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a><span class="x">    public function onBeforeLineUpdate($params)</span>
<a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a><span class="x">    {</span>
<a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a><span class="x">        // Code executed before line is updated</span>
<a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a><span class="x">        // Код, выполняемый перед обновлением линии</span>
<a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a><span class="x">        return $params;</span>
<a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a><span class="x">    }</span>
<a id="__codelineno-28-26" name="__codelineno-28-26" href="#__codelineno-28-26"></a>
<a id="__codelineno-28-27" name="__codelineno-28-27" href="#__codelineno-28-27"></a><span class="x">    public function onAfterLineUpdate($params, $result)</span>
<a id="__codelineno-28-28" name="__codelineno-28-28" href="#__codelineno-28-28"></a><span class="x">    {</span>
<a id="__codelineno-28-29" name="__codelineno-28-29" href="#__codelineno-28-29"></a><span class="x">        // Code executed after line is updated</span>
<a id="__codelineno-28-30" name="__codelineno-28-30" href="#__codelineno-28-30"></a><span class="x">        // Код, выполняемый после обновления линии</span>
<a id="__codelineno-28-31" name="__codelineno-28-31" href="#__codelineno-28-31"></a><span class="x">        return $result;</span>
<a id="__codelineno-28-32" name="__codelineno-28-32" href="#__codelineno-28-32"></a><span class="x">    }</span>
<a id="__codelineno-28-33" name="__codelineno-28-33" href="#__codelineno-28-33"></a>
<a id="__codelineno-28-34" name="__codelineno-28-34" href="#__codelineno-28-34"></a><span class="x">    public function onBeforeLineDelete($params)</span>
<a id="__codelineno-28-35" name="__codelineno-28-35" href="#__codelineno-28-35"></a><span class="x">    {</span>
<a id="__codelineno-28-36" name="__codelineno-28-36" href="#__codelineno-28-36"></a><span class="x">        // Code executed before line is deleted</span>
<a id="__codelineno-28-37" name="__codelineno-28-37" href="#__codelineno-28-37"></a><span class="x">        // Код, выполняемый перед удалением линии</span>
<a id="__codelineno-28-38" name="__codelineno-28-38" href="#__codelineno-28-38"></a><span class="x">        return $params;</span>
<a id="__codelineno-28-39" name="__codelineno-28-39" href="#__codelineno-28-39"></a><span class="x">    }</span>
<a id="__codelineno-28-40" name="__codelineno-28-40" href="#__codelineno-28-40"></a>
<a id="__codelineno-28-41" name="__codelineno-28-41" href="#__codelineno-28-41"></a><span class="x">    public function onAfterLineDelete($params, $result)</span>
<a id="__codelineno-28-42" name="__codelineno-28-42" href="#__codelineno-28-42"></a><span class="x">    {</span>
<a id="__codelineno-28-43" name="__codelineno-28-43" href="#__codelineno-28-43"></a><span class="x">        // Code executed after line is deleted</span>
<a id="__codelineno-28-44" name="__codelineno-28-44" href="#__codelineno-28-44"></a><span class="x">        // Код, выполняемый после удаления линии</span>
<a id="__codelineno-28-45" name="__codelineno-28-45" href="#__codelineno-28-45"></a><span class="x">        return $result;</span>
<a id="__codelineno-28-46" name="__codelineno-28-46" href="#__codelineno-28-46"></a><span class="x">    }</span>
<a id="__codelineno-28-47" name="__codelineno-28-47" href="#__codelineno-28-47"></a>
<a id="__codelineno-28-48" name="__codelineno-28-48" href="#__codelineno-28-48"></a><span class="x">    public function onBeforeLineAssign($params)</span>
<a id="__codelineno-28-49" name="__codelineno-28-49" href="#__codelineno-28-49"></a><span class="x">    {</span>
<a id="__codelineno-28-50" name="__codelineno-28-50" href="#__codelineno-28-50"></a><span class="x">        // Code executed before line is assigned</span>
<a id="__codelineno-28-51" name="__codelineno-28-51" href="#__codelineno-28-51"></a><span class="x">        // Код, выполняемый перед назначением линии</span>
<a id="__codelineno-28-52" name="__codelineno-28-52" href="#__codelineno-28-52"></a><span class="x">        return $params;</span>
<a id="__codelineno-28-53" name="__codelineno-28-53" href="#__codelineno-28-53"></a><span class="x">    }</span>
<a id="__codelineno-28-54" name="__codelineno-28-54" href="#__codelineno-28-54"></a>
<a id="__codelineno-28-55" name="__codelineno-28-55" href="#__codelineno-28-55"></a><span class="x">    public function onAfterLineAssign($params, $result)</span>
<a id="__codelineno-28-56" name="__codelineno-28-56" href="#__codelineno-28-56"></a><span class="x">    {</span>
<a id="__codelineno-28-57" name="__codelineno-28-57" href="#__codelineno-28-57"></a><span class="x">        // Code executed after line is assigned</span>
<a id="__codelineno-28-58" name="__codelineno-28-58" href="#__codelineno-28-58"></a><span class="x">        // Код, выполняемый после назначения линии</span>
<a id="__codelineno-28-59" name="__codelineno-28-59" href="#__codelineno-28-59"></a><span class="x">        return $result;</span>
<a id="__codelineno-28-60" name="__codelineno-28-60" href="#__codelineno-28-60"></a><span class="x">    }</span>
<a id="__codelineno-28-61" name="__codelineno-28-61" href="#__codelineno-28-61"></a><span class="x">}</span>
<a id="__codelineno-28-62" name="__codelineno-28-62" href="#__codelineno-28-62"></a>
<a id="__codelineno-28-63" name="__codelineno-28-63" href="#__codelineno-28-63"></a><span class="x">// Register handler</span>
<a id="__codelineno-28-64" name="__codelineno-28-64" href="#__codelineno-28-64"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-28-65" name="__codelineno-28-65" href="#__codelineno-28-65"></a><span class="x">\Bitrix\Voximplant\Line\Handler::register(&#39;custom_line&#39;, CustomLineHandler::class);</span>
<a id="__codelineno-28-66" name="__codelineno-28-66" href="#__codelineno-28-66"></a>
<a id="__codelineno-28-67" name="__codelineno-28-67" href="#__codelineno-28-67"></a><span class="x">// Legacy</span>
<a id="__codelineno-28-68" name="__codelineno-28-68" href="#__codelineno-28-68"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-28-69" name="__codelineno-28-69" href="#__codelineno-28-69"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-28-70" name="__codelineno-28-70" href="#__codelineno-28-70"></a><span class="x">class CCustomLineHandler extends CVoximplantLineHandler</span>
<a id="__codelineno-28-71" name="__codelineno-28-71" href="#__codelineno-28-71"></a><span class="x">{</span>
<a id="__codelineno-28-72" name="__codelineno-28-72" href="#__codelineno-28-72"></a><span class="x">    public function OnBeforeLineCreate($params)</span>
<a id="__codelineno-28-73" name="__codelineno-28-73" href="#__codelineno-28-73"></a><span class="x">    {</span>
<a id="__codelineno-28-74" name="__codelineno-28-74" href="#__codelineno-28-74"></a><span class="x">        // Code executed before line is created</span>
<a id="__codelineno-28-75" name="__codelineno-28-75" href="#__codelineno-28-75"></a><span class="x">        // Код, выполняемый перед созданием линии</span>
<a id="__codelineno-28-76" name="__codelineno-28-76" href="#__codelineno-28-76"></a><span class="x">        return $params;</span>
<a id="__codelineno-28-77" name="__codelineno-28-77" href="#__codelineno-28-77"></a><span class="x">    }</span>
<a id="__codelineno-28-78" name="__codelineno-28-78" href="#__codelineno-28-78"></a>
<a id="__codelineno-28-79" name="__codelineno-28-79" href="#__codelineno-28-79"></a><span class="x">    public function OnAfterLineCreate($params, $result)</span>
<a id="__codelineno-28-80" name="__codelineno-28-80" href="#__codelineno-28-80"></a><span class="x">    {</span>
<a id="__codelineno-28-81" name="__codelineno-28-81" href="#__codelineno-28-81"></a><span class="x">        // Code executed after line is created</span>
<a id="__codelineno-28-82" name="__codelineno-28-82" href="#__codelineno-28-82"></a><span class="x">        // Код, выполняемый после создания линии</span>
<a id="__codelineno-28-83" name="__codelineno-28-83" href="#__codelineno-28-83"></a><span class="x">        return $result;</span>
<a id="__codelineno-28-84" name="__codelineno-28-84" href="#__codelineno-28-84"></a><span class="x">    }</span>
<a id="__codelineno-28-85" name="__codelineno-28-85" href="#__codelineno-28-85"></a>
<a id="__codelineno-28-86" name="__codelineno-28-86" href="#__codelineno-28-86"></a><span class="x">    public function OnBeforeLineUpdate($params)</span>
<a id="__codelineno-28-87" name="__codelineno-28-87" href="#__codelineno-28-87"></a><span class="x">    {</span>
<a id="__codelineno-28-88" name="__codelineno-28-88" href="#__codelineno-28-88"></a><span class="x">        // Code executed before line is updated</span>
<a id="__codelineno-28-89" name="__codelineno-28-89" href="#__codelineno-28-89"></a><span class="x">        // Код, выполняемый перед обновлением линии</span>
<a id="__codelineno-28-90" name="__codelineno-28-90" href="#__codelineno-28-90"></a><span class="x">        return $params;</span>
<a id="__codelineno-28-91" name="__codelineno-28-91" href="#__codelineno-28-91"></a><span class="x">    }</span>
<a id="__codelineno-28-92" name="__codelineno-28-92" href="#__codelineno-28-92"></a>
<a id="__codelineno-28-93" name="__codelineno-28-93" href="#__codelineno-28-93"></a><span class="x">    public function OnAfterLineUpdate($params, $result)</span>
<a id="__codelineno-28-94" name="__codelineno-28-94" href="#__codelineno-28-94"></a><span class="x">    {</span>
<a id="__codelineno-28-95" name="__codelineno-28-95" href="#__codelineno-28-95"></a><span class="x">        // Code executed after line is updated</span>
<a id="__codelineno-28-96" name="__codelineno-28-96" href="#__codelineno-28-96"></a><span class="x">        // Код, выполняемый после обновления линии</span>
<a id="__codelineno-28-97" name="__codelineno-28-97" href="#__codelineno-28-97"></a><span class="x">        return $result;</span>
<a id="__codelineno-28-98" name="__codelineno-28-98" href="#__codelineno-28-98"></a><span class="x">    }</span>
<a id="__codelineno-28-99" name="__codelineno-28-99" href="#__codelineno-28-99"></a>
<a id="__codelineno-28-100" name="__codelineno-28-100" href="#__codelineno-28-100"></a><span class="x">    public function OnBeforeLineDelete($params)</span>
<a id="__codelineno-28-101" name="__codelineno-28-101" href="#__codelineno-28-101"></a><span class="x">    {</span>
<a id="__codelineno-28-102" name="__codelineno-28-102" href="#__codelineno-28-102"></a><span class="x">        // Code executed before line is deleted</span>
<a id="__codelineno-28-103" name="__codelineno-28-103" href="#__codelineno-28-103"></a><span class="x">        // Код, выполняемый перед удалением линии</span>
<a id="__codelineno-28-104" name="__codelineno-28-104" href="#__codelineno-28-104"></a><span class="x">        return $params;</span>
<a id="__codelineno-28-105" name="__codelineno-28-105" href="#__codelineno-28-105"></a><span class="x">    }</span>
<a id="__codelineno-28-106" name="__codelineno-28-106" href="#__codelineno-28-106"></a>
<a id="__codelineno-28-107" name="__codelineno-28-107" href="#__codelineno-28-107"></a><span class="x">    public function OnAfterLineDelete($params, $result)</span>
<a id="__codelineno-28-108" name="__codelineno-28-108" href="#__codelineno-28-108"></a><span class="x">    {</span>
<a id="__codelineno-28-109" name="__codelineno-28-109" href="#__codelineno-28-109"></a><span class="x">        // Code executed after line is deleted</span>
<a id="__codelineno-28-110" name="__codelineno-28-110" href="#__codelineno-28-110"></a><span class="x">        // Код, выполняемый после удаления линии</span>
<a id="__codelineno-28-111" name="__codelineno-28-111" href="#__codelineno-28-111"></a><span class="x">        return $result;</span>
<a id="__codelineno-28-112" name="__codelineno-28-112" href="#__codelineno-28-112"></a><span class="x">    }</span>
<a id="__codelineno-28-113" name="__codelineno-28-113" href="#__codelineno-28-113"></a>
<a id="__codelineno-28-114" name="__codelineno-28-114" href="#__codelineno-28-114"></a><span class="x">    public function OnBeforeLineAssign($params)</span>
<a id="__codelineno-28-115" name="__codelineno-28-115" href="#__codelineno-28-115"></a><span class="x">    {</span>
<a id="__codelineno-28-116" name="__codelineno-28-116" href="#__codelineno-28-116"></a><span class="x">        // Code executed before line is assigned</span>
<a id="__codelineno-28-117" name="__codelineno-28-117" href="#__codelineno-28-117"></a><span class="x">        // Код, выполняемый перед назначением линии</span>
<a id="__codelineno-28-118" name="__codelineno-28-118" href="#__codelineno-28-118"></a><span class="x">        return $params;</span>
<a id="__codelineno-28-119" name="__codelineno-28-119" href="#__codelineno-28-119"></a><span class="x">    }</span>
<a id="__codelineno-28-120" name="__codelineno-28-120" href="#__codelineno-28-120"></a>
<a id="__codelineno-28-121" name="__codelineno-28-121" href="#__codelineno-28-121"></a><span class="x">    public function OnAfterLineAssign($params, $result)</span>
<a id="__codelineno-28-122" name="__codelineno-28-122" href="#__codelineno-28-122"></a><span class="x">    {</span>
<a id="__codelineno-28-123" name="__codelineno-28-123" href="#__codelineno-28-123"></a><span class="x">        // Code executed after line is assigned</span>
<a id="__codelineno-28-124" name="__codelineno-28-124" href="#__codelineno-28-124"></a><span class="x">        // Код, выполняемый после назначения линии</span>
<a id="__codelineno-28-125" name="__codelineno-28-125" href="#__codelineno-28-125"></a><span class="x">        return $result;</span>
<a id="__codelineno-28-126" name="__codelineno-28-126" href="#__codelineno-28-126"></a><span class="x">    }</span>
<a id="__codelineno-28-127" name="__codelineno-28-127" href="#__codelineno-28-127"></a><span class="x">}</span>
<a id="__codelineno-28-128" name="__codelineno-28-128" href="#__codelineno-28-128"></a>
<a id="__codelineno-28-129" name="__codelineno-28-129" href="#__codelineno-28-129"></a><span class="x">// Register handler</span>
<a id="__codelineno-28-130" name="__codelineno-28-130" href="#__codelineno-28-130"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-28-131" name="__codelineno-28-131" href="#__codelineno-28-131"></a><span class="x">CVoximplantLineHandler::Register(&#39;custom_line&#39;, &#39;CCustomLineHandler&#39;);</span>
</code></pre></div>
<h3 id="user-handlers">User Handlers | Обработчики пользователей<a class="headerlink" href="#user-handlers" title="Permanent link">&para;</a></h3>
<h4 id="user-handler">User Handler | Обработчик пользователя<a class="headerlink" href="#user-handler" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="x">// D7</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="x">class CustomUserHandler extends \Bitrix\Voximplant\User\Handler</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="x">{</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="x">    public function onBeforeUserCreate($params)</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="x">    {</span>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="x">        // Code executed before user is created</span>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="x">        // Код, выполняемый перед созданием пользователя</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="x">        return $params;</span>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="x">    }</span>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="x">    public function onAfterUserCreate($params, $result)</span>
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="x">    {</span>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="x">        // Code executed after user is created</span>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="x">        // Код, выполняемый после создания пользователя</span>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="x">        return $result;</span>
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="x">    }</span>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a>
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="x">    public function onBeforeUserUpdate($params)</span>
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a><span class="x">    {</span>
<a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a><span class="x">        // Code executed before user is updated</span>
<a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a><span class="x">        // Код, выполняемый перед обновлением пользователя</span>
<a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a><span class="x">        return $params;</span>
<a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a><span class="x">    }</span>
<a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a>
<a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a><span class="x">    public function onAfterUserUpdate($params, $result)</span>
<a id="__codelineno-29-28" name="__codelineno-29-28" href="#__codelineno-29-28"></a><span class="x">    {</span>
<a id="__codelineno-29-29" name="__codelineno-29-29" href="#__codelineno-29-29"></a><span class="x">        // Code executed after user is updated</span>
<a id="__codelineno-29-30" name="__codelineno-29-30" href="#__codelineno-29-30"></a><span class="x">        // Код, выполняемый после обновления пользователя</span>
<a id="__codelineno-29-31" name="__codelineno-29-31" href="#__codelineno-29-31"></a><span class="x">        return $result;</span>
<a id="__codelineno-29-32" name="__codelineno-29-32" href="#__codelineno-29-32"></a><span class="x">    }</span>
<a id="__codelineno-29-33" name="__codelineno-29-33" href="#__codelineno-29-33"></a>
<a id="__codelineno-29-34" name="__codelineno-29-34" href="#__codelineno-29-34"></a><span class="x">    public function onBeforeUserDelete($params)</span>
<a id="__codelineno-29-35" name="__codelineno-29-35" href="#__codelineno-29-35"></a><span class="x">    {</span>
<a id="__codelineno-29-36" name="__codelineno-29-36" href="#__codelineno-29-36"></a><span class="x">        // Code executed before user is deleted</span>
<a id="__codelineno-29-37" name="__codelineno-29-37" href="#__codelineno-29-37"></a><span class="x">        // Код, выполняемый перед удалением пользователя</span>
<a id="__codelineno-29-38" name="__codelineno-29-38" href="#__codelineno-29-38"></a><span class="x">        return $params;</span>
<a id="__codelineno-29-39" name="__codelineno-29-39" href="#__codelineno-29-39"></a><span class="x">    }</span>
<a id="__codelineno-29-40" name="__codelineno-29-40" href="#__codelineno-29-40"></a>
<a id="__codelineno-29-41" name="__codelineno-29-41" href="#__codelineno-29-41"></a><span class="x">    public function onAfterUserDelete($params, $result)</span>
<a id="__codelineno-29-42" name="__codelineno-29-42" href="#__codelineno-29-42"></a><span class="x">    {</span>
<a id="__codelineno-29-43" name="__codelineno-29-43" href="#__codelineno-29-43"></a><span class="x">        // Code executed after user is deleted</span>
<a id="__codelineno-29-44" name="__codelineno-29-44" href="#__codelineno-29-44"></a><span class="x">        // Код, выполняемый после удаления пользователя</span>
<a id="__codelineno-29-45" name="__codelineno-29-45" href="#__codelineno-29-45"></a><span class="x">        return $result;</span>
<a id="__codelineno-29-46" name="__codelineno-29-46" href="#__codelineno-29-46"></a><span class="x">    }</span>
<a id="__codelineno-29-47" name="__codelineno-29-47" href="#__codelineno-29-47"></a>
<a id="__codelineno-29-48" name="__codelineno-29-48" href="#__codelineno-29-48"></a><span class="x">    public function onBeforeUserAssign($params)</span>
<a id="__codelineno-29-49" name="__codelineno-29-49" href="#__codelineno-29-49"></a><span class="x">    {</span>
<a id="__codelineno-29-50" name="__codelineno-29-50" href="#__codelineno-29-50"></a><span class="x">        // Code executed before user is assigned</span>
<a id="__codelineno-29-51" name="__codelineno-29-51" href="#__codelineno-29-51"></a><span class="x">        // Код, выполняемый перед назначением пользователя</span>
<a id="__codelineno-29-52" name="__codelineno-29-52" href="#__codelineno-29-52"></a><span class="x">        return $params;</span>
<a id="__codelineno-29-53" name="__codelineno-29-53" href="#__codelineno-29-53"></a><span class="x">    }</span>
<a id="__codelineno-29-54" name="__codelineno-29-54" href="#__codelineno-29-54"></a>
<a id="__codelineno-29-55" name="__codelineno-29-55" href="#__codelineno-29-55"></a><span class="x">    public function onAfterUserAssign($params, $result)</span>
<a id="__codelineno-29-56" name="__codelineno-29-56" href="#__codelineno-29-56"></a><span class="x">    {</span>
<a id="__codelineno-29-57" name="__codelineno-29-57" href="#__codelineno-29-57"></a><span class="x">        // Code executed after user is assigned</span>
<a id="__codelineno-29-58" name="__codelineno-29-58" href="#__codelineno-29-58"></a><span class="x">        // Код, выполняемый после назначения пользователя</span>
<a id="__codelineno-29-59" name="__codelineno-29-59" href="#__codelineno-29-59"></a><span class="x">        return $result;</span>
<a id="__codelineno-29-60" name="__codelineno-29-60" href="#__codelineno-29-60"></a><span class="x">    }</span>
<a id="__codelineno-29-61" name="__codelineno-29-61" href="#__codelineno-29-61"></a><span class="x">}</span>
<a id="__codelineno-29-62" name="__codelineno-29-62" href="#__codelineno-29-62"></a>
<a id="__codelineno-29-63" name="__codelineno-29-63" href="#__codelineno-29-63"></a><span class="x">// Register handler</span>
<a id="__codelineno-29-64" name="__codelineno-29-64" href="#__codelineno-29-64"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-29-65" name="__codelineno-29-65" href="#__codelineno-29-65"></a><span class="x">\Bitrix\Voximplant\User\Handler::register(&#39;custom_user&#39;, CustomUserHandler::class);</span>
<a id="__codelineno-29-66" name="__codelineno-29-66" href="#__codelineno-29-66"></a>
<a id="__codelineno-29-67" name="__codelineno-29-67" href="#__codelineno-29-67"></a><span class="x">// Legacy</span>
<a id="__codelineno-29-68" name="__codelineno-29-68" href="#__codelineno-29-68"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-29-69" name="__codelineno-29-69" href="#__codelineno-29-69"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-29-70" name="__codelineno-29-70" href="#__codelineno-29-70"></a><span class="x">class CCustomUserHandler extends CVoximplantUserHandler</span>
<a id="__codelineno-29-71" name="__codelineno-29-71" href="#__codelineno-29-71"></a><span class="x">{</span>
<a id="__codelineno-29-72" name="__codelineno-29-72" href="#__codelineno-29-72"></a><span class="x">    public function OnBeforeUserCreate($params)</span>
<a id="__codelineno-29-73" name="__codelineno-29-73" href="#__codelineno-29-73"></a><span class="x">    {</span>
<a id="__codelineno-29-74" name="__codelineno-29-74" href="#__codelineno-29-74"></a><span class="x">        // Code executed before user is created</span>
<a id="__codelineno-29-75" name="__codelineno-29-75" href="#__codelineno-29-75"></a><span class="x">        // Код, выполняемый перед созданием пользователя</span>
<a id="__codelineno-29-76" name="__codelineno-29-76" href="#__codelineno-29-76"></a><span class="x">        return $params;</span>
<a id="__codelineno-29-77" name="__codelineno-29-77" href="#__codelineno-29-77"></a><span class="x">    }</span>
<a id="__codelineno-29-78" name="__codelineno-29-78" href="#__codelineno-29-78"></a>
<a id="__codelineno-29-79" name="__codelineno-29-79" href="#__codelineno-29-79"></a><span class="x">    public function OnAfterUserCreate($params, $result)</span>
<a id="__codelineno-29-80" name="__codelineno-29-80" href="#__codelineno-29-80"></a><span class="x">    {</span>
<a id="__codelineno-29-81" name="__codelineno-29-81" href="#__codelineno-29-81"></a><span class="x">        // Code executed after user is created</span>
<a id="__codelineno-29-82" name="__codelineno-29-82" href="#__codelineno-29-82"></a><span class="x">        // Код, выполняемый после создания пользователя</span>
<a id="__codelineno-29-83" name="__codelineno-29-83" href="#__codelineno-29-83"></a><span class="x">        return $result;</span>
<a id="__codelineno-29-84" name="__codelineno-29-84" href="#__codelineno-29-84"></a><span class="x">    }</span>
<a id="__codelineno-29-85" name="__codelineno-29-85" href="#__codelineno-29-85"></a>
<a id="__codelineno-29-86" name="__codelineno-29-86" href="#__codelineno-29-86"></a><span class="x">    public function OnBeforeUserUpdate($params)</span>
<a id="__codelineno-29-87" name="__codelineno-29-87" href="#__codelineno-29-87"></a><span class="x">    {</span>
<a id="__codelineno-29-88" name="__codelineno-29-88" href="#__codelineno-29-88"></a><span class="x">        // Code executed before user is updated</span>
<a id="__codelineno-29-89" name="__codelineno-29-89" href="#__codelineno-29-89"></a><span class="x">        // Код, выполняемый перед обновлением пользователя</span>
<a id="__codelineno-29-90" name="__codelineno-29-90" href="#__codelineno-29-90"></a><span class="x">        return $params;</span>
<a id="__codelineno-29-91" name="__codelineno-29-91" href="#__codelineno-29-91"></a><span class="x">    }</span>
<a id="__codelineno-29-92" name="__codelineno-29-92" href="#__codelineno-29-92"></a>
<a id="__codelineno-29-93" name="__codelineno-29-93" href="#__codelineno-29-93"></a><span class="x">    public function OnAfterUserUpdate($params, $result)</span>
<a id="__codelineno-29-94" name="__codelineno-29-94" href="#__codelineno-29-94"></a><span class="x">    {</span>
<a id="__codelineno-29-95" name="__codelineno-29-95" href="#__codelineno-29-95"></a><span class="x">        // Code executed after user is updated</span>
<a id="__codelineno-29-96" name="__codelineno-29-96" href="#__codelineno-29-96"></a><span class="x">        // Код, выполняемый после обновления пользователя</span>
<a id="__codelineno-29-97" name="__codelineno-29-97" href="#__codelineno-29-97"></a><span class="x">        return $result;</span>
<a id="__codelineno-29-98" name="__codelineno-29-98" href="#__codelineno-29-98"></a><span class="x">    }</span>
<a id="__codelineno-29-99" name="__codelineno-29-99" href="#__codelineno-29-99"></a>
<a id="__codelineno-29-100" name="__codelineno-29-100" href="#__codelineno-29-100"></a><span class="x">    public function OnBeforeUserDelete($params)</span>
<a id="__codelineno-29-101" name="__codelineno-29-101" href="#__codelineno-29-101"></a><span class="x">    {</span>
<a id="__codelineno-29-102" name="__codelineno-29-102" href="#__codelineno-29-102"></a><span class="x">        // Code executed before user is deleted</span>
<a id="__codelineno-29-103" name="__codelineno-29-103" href="#__codelineno-29-103"></a><span class="x">        // Код, выполняемый перед удалением пользователя</span>
<a id="__codelineno-29-104" name="__codelineno-29-104" href="#__codelineno-29-104"></a><span class="x">        return $params;</span>
<a id="__codelineno-29-105" name="__codelineno-29-105" href="#__codelineno-29-105"></a><span class="x">    }</span>
<a id="__codelineno-29-106" name="__codelineno-29-106" href="#__codelineno-29-106"></a>
<a id="__codelineno-29-107" name="__codelineno-29-107" href="#__codelineno-29-107"></a><span class="x">    public function OnAfterUserDelete($params, $result)</span>
<a id="__codelineno-29-108" name="__codelineno-29-108" href="#__codelineno-29-108"></a><span class="x">    {</span>
<a id="__codelineno-29-109" name="__codelineno-29-109" href="#__codelineno-29-109"></a><span class="x">        // Code executed after user is deleted</span>
<a id="__codelineno-29-110" name="__codelineno-29-110" href="#__codelineno-29-110"></a><span class="x">        // Код, выполняемый после удаления пользователя</span>
<a id="__codelineno-29-111" name="__codelineno-29-111" href="#__codelineno-29-111"></a><span class="x">        return $result;</span>
<a id="__codelineno-29-112" name="__codelineno-29-112" href="#__codelineno-29-112"></a><span class="x">    }</span>
<a id="__codelineno-29-113" name="__codelineno-29-113" href="#__codelineno-29-113"></a>
<a id="__codelineno-29-114" name="__codelineno-29-114" href="#__codelineno-29-114"></a><span class="x">    public function OnBeforeUserAssign($params)</span>
<a id="__codelineno-29-115" name="__codelineno-29-115" href="#__codelineno-29-115"></a><span class="x">    {</span>
<a id="__codelineno-29-116" name="__codelineno-29-116" href="#__codelineno-29-116"></a><span class="x">        // Code executed before user is assigned</span>
<a id="__codelineno-29-117" name="__codelineno-29-117" href="#__codelineno-29-117"></a><span class="x">        // Код, выполняемый перед назначением пользователя</span>
<a id="__codelineno-29-118" name="__codelineno-29-118" href="#__codelineno-29-118"></a><span class="x">        return $params;</span>
<a id="__codelineno-29-119" name="__codelineno-29-119" href="#__codelineno-29-119"></a><span class="x">    }</span>
<a id="__codelineno-29-120" name="__codelineno-29-120" href="#__codelineno-29-120"></a>
<a id="__codelineno-29-121" name="__codelineno-29-121" href="#__codelineno-29-121"></a><span class="x">    public function OnAfterUserAssign($params, $result)</span>
<a id="__codelineno-29-122" name="__codelineno-29-122" href="#__codelineno-29-122"></a><span class="x">    {</span>
<a id="__codelineno-29-123" name="__codelineno-29-123" href="#__codelineno-29-123"></a><span class="x">        // Code executed after user is assigned</span>
<a id="__codelineno-29-124" name="__codelineno-29-124" href="#__codelineno-29-124"></a><span class="x">        // Код, выполняемый после назначения пользователя</span>
<a id="__codelineno-29-125" name="__codelineno-29-125" href="#__codelineno-29-125"></a><span class="x">        return $result;</span>
<a id="__codelineno-29-126" name="__codelineno-29-126" href="#__codelineno-29-126"></a><span class="x">    }</span>
<a id="__codelineno-29-127" name="__codelineno-29-127" href="#__codelineno-29-127"></a><span class="x">}</span>
<a id="__codelineno-29-128" name="__codelineno-29-128" href="#__codelineno-29-128"></a>
<a id="__codelineno-29-129" name="__codelineno-29-129" href="#__codelineno-29-129"></a><span class="x">// Register handler</span>
<a id="__codelineno-29-130" name="__codelineno-29-130" href="#__codelineno-29-130"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-29-131" name="__codelineno-29-131" href="#__codelineno-29-131"></a><span class="x">CVoximplantUserHandler::Register(&#39;custom_user&#39;, &#39;CCustomUserHandler&#39;);</span>
</code></pre></div>
<h3 id="call-flow-handlers">Call Flow Handlers | Обработчики потоков звонков<a class="headerlink" href="#call-flow-handlers" title="Permanent link">&para;</a></h3>
<h4 id="call-flow-handler">Call Flow Handler | Обработчик потока звонков<a class="headerlink" href="#call-flow-handler" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="x">// D7</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="x">class CustomCallFlowHandler extends \Bitrix\Voximplant\CallFlow\Handler</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="x">{</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="x">    public function onBeforeCallFlowCreate($params)</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="x">    {</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="x">        // Code executed before call flow is created</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="x">        // Код, выполняемый перед созданием потока звонков</span>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="x">        return $params;</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="x">    }</span>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="x">    public function onAfterCallFlowCreate($params, $result)</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="x">    {</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="x">        // Code executed after call flow is created</span>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a><span class="x">        // Код, выполняемый после создания потока звонков</span>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a><span class="x">        return $result;</span>
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="x">    }</span>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a><span class="x">    public function onBeforeCallFlowUpdate($params)</span>
<a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a><span class="x">    {</span>
<a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a><span class="x">        // Code executed before call flow is updated</span>
<a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a><span class="x">        // Код, выполняемый перед обновлением потока звонков</span>
<a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a><span class="x">        return $params;</span>
<a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a><span class="x">    }</span>
<a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a>
<a id="__codelineno-30-27" name="__codelineno-30-27" href="#__codelineno-30-27"></a><span class="x">    public function onAfterCallFlowUpdate($params, $result)</span>
<a id="__codelineno-30-28" name="__codelineno-30-28" href="#__codelineno-30-28"></a><span class="x">    {</span>
<a id="__codelineno-30-29" name="__codelineno-30-29" href="#__codelineno-30-29"></a><span class="x">        // Code executed after call flow is updated</span>
<a id="__codelineno-30-30" name="__codelineno-30-30" href="#__codelineno-30-30"></a><span class="x">        // Код, выполняемый после обновления потока звонков</span>
<a id="__codelineno-30-31" name="__codelineno-30-31" href="#__codelineno-30-31"></a><span class="x">        return $result;</span>
<a id="__codelineno-30-32" name="__codelineno-30-32" href="#__codelineno-30-32"></a><span class="x">    }</span>
<a id="__codelineno-30-33" name="__codelineno-30-33" href="#__codelineno-30-33"></a>
<a id="__codelineno-30-34" name="__codelineno-30-34" href="#__codelineno-30-34"></a><span class="x">    public function onBeforeCallFlowDelete($params)</span>
<a id="__codelineno-30-35" name="__codelineno-30-35" href="#__codelineno-30-35"></a><span class="x">    {</span>
<a id="__codelineno-30-36" name="__codelineno-30-36" href="#__codelineno-30-36"></a><span class="x">        // Code executed before call flow is deleted</span>
<a id="__codelineno-30-37" name="__codelineno-30-37" href="#__codelineno-30-37"></a><span class="x">        // Код, выполняемый перед удалением потока звонков</span>
<a id="__codelineno-30-38" name="__codelineno-30-38" href="#__codelineno-30-38"></a><span class="x">        return $params;</span>
<a id="__codelineno-30-39" name="__codelineno-30-39" href="#__codelineno-30-39"></a><span class="x">    }</span>
<a id="__codelineno-30-40" name="__codelineno-30-40" href="#__codelineno-30-40"></a>
<a id="__codelineno-30-41" name="__codelineno-30-41" href="#__codelineno-30-41"></a><span class="x">    public function onAfterCallFlowDelete($params, $result)</span>
<a id="__codelineno-30-42" name="__codelineno-30-42" href="#__codelineno-30-42"></a><span class="x">    {</span>
<a id="__codelineno-30-43" name="__codelineno-30-43" href="#__codelineno-30-43"></a><span class="x">        // Code executed after call flow is deleted</span>
<a id="__codelineno-30-44" name="__codelineno-30-44" href="#__codelineno-30-44"></a><span class="x">        // Код, выполняемый после удаления потока звонков</span>
<a id="__codelineno-30-45" name="__codelineno-30-45" href="#__codelineno-30-45"></a><span class="x">        return $result;</span>
<a id="__codelineno-30-46" name="__codelineno-30-46" href="#__codelineno-30-46"></a><span class="x">    }</span>
<a id="__codelineno-30-47" name="__codelineno-30-47" href="#__codelineno-30-47"></a>
<a id="__codelineno-30-48" name="__codelineno-30-48" href="#__codelineno-30-48"></a><span class="x">    public function onBeforeCallFlowExecute($params)</span>
<a id="__codelineno-30-49" name="__codelineno-30-49" href="#__codelineno-30-49"></a><span class="x">    {</span>
<a id="__codelineno-30-50" name="__codelineno-30-50" href="#__codelineno-30-50"></a><span class="x">        // Code executed before call flow is executed</span>
<a id="__codelineno-30-51" name="__codelineno-30-51" href="#__codelineno-30-51"></a><span class="x">        // Код, выполняемый перед выполнением потока звонков</span>
<a id="__codelineno-30-52" name="__codelineno-30-52" href="#__codelineno-30-52"></a><span class="x">        return $params;</span>
<a id="__codelineno-30-53" name="__codelineno-30-53" href="#__codelineno-30-53"></a><span class="x">    }</span>
<a id="__codelineno-30-54" name="__codelineno-30-54" href="#__codelineno-30-54"></a>
<a id="__codelineno-30-55" name="__codelineno-30-55" href="#__codelineno-30-55"></a><span class="x">    public function onAfterCallFlowExecute($params, $result)</span>
<a id="__codelineno-30-56" name="__codelineno-30-56" href="#__codelineno-30-56"></a><span class="x">    {</span>
<a id="__codelineno-30-57" name="__codelineno-30-57" href="#__codelineno-30-57"></a><span class="x">        // Code executed after call flow is executed</span>
<a id="__codelineno-30-58" name="__codelineno-30-58" href="#__codelineno-30-58"></a><span class="x">        // Код, выполняемый после выполнения потока звонков</span>
<a id="__codelineno-30-59" name="__codelineno-30-59" href="#__codelineno-30-59"></a><span class="x">        return $result;</span>
<a id="__codelineno-30-60" name="__codelineno-30-60" href="#__codelineno-30-60"></a><span class="x">    }</span>
<a id="__codelineno-30-61" name="__codelineno-30-61" href="#__codelineno-30-61"></a><span class="x">}</span>
<a id="__codelineno-30-62" name="__codelineno-30-62" href="#__codelineno-30-62"></a>
<a id="__codelineno-30-63" name="__codelineno-30-63" href="#__codelineno-30-63"></a><span class="x">// Register handler</span>
<a id="__codelineno-30-64" name="__codelineno-30-64" href="#__codelineno-30-64"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-30-65" name="__codelineno-30-65" href="#__codelineno-30-65"></a><span class="x">\Bitrix\Voximplant\CallFlow\Handler::register(&#39;custom_call_flow&#39;, CustomCallFlowHandler::class);</span>
<a id="__codelineno-30-66" name="__codelineno-30-66" href="#__codelineno-30-66"></a>
<a id="__codelineno-30-67" name="__codelineno-30-67" href="#__codelineno-30-67"></a><span class="x">// Legacy</span>
<a id="__codelineno-30-68" name="__codelineno-30-68" href="#__codelineno-30-68"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-30-69" name="__codelineno-30-69" href="#__codelineno-30-69"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-30-70" name="__codelineno-30-70" href="#__codelineno-30-70"></a><span class="x">class CCustomCallFlowHandler extends CVoximplantCallFlowHandler</span>
<a id="__codelineno-30-71" name="__codelineno-30-71" href="#__codelineno-30-71"></a><span class="x">{</span>
<a id="__codelineno-30-72" name="__codelineno-30-72" href="#__codelineno-30-72"></a><span class="x">    public function OnBeforeCallFlowCreate($params)</span>
<a id="__codelineno-30-73" name="__codelineno-30-73" href="#__codelineno-30-73"></a><span class="x">    {</span>
<a id="__codelineno-30-74" name="__codelineno-30-74" href="#__codelineno-30-74"></a><span class="x">        // Code executed before call flow is created</span>
<a id="__codelineno-30-75" name="__codelineno-30-75" href="#__codelineno-30-75"></a><span class="x">        // Код, выполняемый перед созданием потока звонков</span>
<a id="__codelineno-30-76" name="__codelineno-30-76" href="#__codelineno-30-76"></a><span class="x">        return $params;</span>
<a id="__codelineno-30-77" name="__codelineno-30-77" href="#__codelineno-30-77"></a><span class="x">    }</span>
<a id="__codelineno-30-78" name="__codelineno-30-78" href="#__codelineno-30-78"></a>
<a id="__codelineno-30-79" name="__codelineno-30-79" href="#__codelineno-30-79"></a><span class="x">    public function OnAfterCallFlowCreate($params, $result)</span>
<a id="__codelineno-30-80" name="__codelineno-30-80" href="#__codelineno-30-80"></a><span class="x">    {</span>
<a id="__codelineno-30-81" name="__codelineno-30-81" href="#__codelineno-30-81"></a><span class="x">        // Code executed after call flow is created</span>
<a id="__codelineno-30-82" name="__codelineno-30-82" href="#__codelineno-30-82"></a><span class="x">        // Код, выполняемый после создания потока звонков</span>
<a id="__codelineno-30-83" name="__codelineno-30-83" href="#__codelineno-30-83"></a><span class="x">        return $result;</span>
<a id="__codelineno-30-84" name="__codelineno-30-84" href="#__codelineno-30-84"></a><span class="x">    }</span>
<a id="__codelineno-30-85" name="__codelineno-30-85" href="#__codelineno-30-85"></a>
<a id="__codelineno-30-86" name="__codelineno-30-86" href="#__codelineno-30-86"></a><span class="x">    public function OnBeforeCallFlowUpdate($params)</span>
<a id="__codelineno-30-87" name="__codelineno-30-87" href="#__codelineno-30-87"></a><span class="x">    {</span>
<a id="__codelineno-30-88" name="__codelineno-30-88" href="#__codelineno-30-88"></a><span class="x">        // Code executed before call flow is updated</span>
<a id="__codelineno-30-89" name="__codelineno-30-89" href="#__codelineno-30-89"></a><span class="x">        // Код, выполняемый перед обновлением потока звонков</span>
<a id="__codelineno-30-90" name="__codelineno-30-90" href="#__codelineno-30-90"></a><span class="x">        return $params;</span>
<a id="__codelineno-30-91" name="__codelineno-30-91" href="#__codelineno-30-91"></a><span class="x">    }</span>
<a id="__codelineno-30-92" name="__codelineno-30-92" href="#__codelineno-30-92"></a>
<a id="__codelineno-30-93" name="__codelineno-30-93" href="#__codelineno-30-93"></a><span class="x">    public function OnAfterCallFlowUpdate($params, $result)</span>
<a id="__codelineno-30-94" name="__codelineno-30-94" href="#__codelineno-30-94"></a><span class="x">    {</span>
<a id="__codelineno-30-95" name="__codelineno-30-95" href="#__codelineno-30-95"></a><span class="x">        // Code executed after call flow is updated</span>
<a id="__codelineno-30-96" name="__codelineno-30-96" href="#__codelineno-30-96"></a><span class="x">        // Код, выполняемый после обновления потока звонков</span>
<a id="__codelineno-30-97" name="__codelineno-30-97" href="#__codelineno-30-97"></a><span class="x">        return $result;</span>
<a id="__codelineno-30-98" name="__codelineno-30-98" href="#__codelineno-30-98"></a><span class="x">    }</span>
<a id="__codelineno-30-99" name="__codelineno-30-99" href="#__codelineno-30-99"></a>
<a id="__codelineno-30-100" name="__codelineno-30-100" href="#__codelineno-30-100"></a><span class="x">    public function OnBeforeCallFlowDelete($params)</span>
<a id="__codelineno-30-101" name="__codelineno-30-101" href="#__codelineno-30-101"></a><span class="x">    {</span>
<a id="__codelineno-30-102" name="__codelineno-30-102" href="#__codelineno-30-102"></a><span class="x">        // Code executed before call flow is deleted</span>
<a id="__codelineno-30-103" name="__codelineno-30-103" href="#__codelineno-30-103"></a><span class="x">        // Код, выполняемый перед удалением потока звонков</span>
<a id="__codelineno-30-104" name="__codelineno-30-104" href="#__codelineno-30-104"></a><span class="x">        return $params;</span>
<a id="__codelineno-30-105" name="__codelineno-30-105" href="#__codelineno-30-105"></a><span class="x">    }</span>
<a id="__codelineno-30-106" name="__codelineno-30-106" href="#__codelineno-30-106"></a>
<a id="__codelineno-30-107" name="__codelineno-30-107" href="#__codelineno-30-107"></a><span class="x">    public function OnAfterCallFlowDelete($params, $result)</span>
<a id="__codelineno-30-108" name="__codelineno-30-108" href="#__codelineno-30-108"></a><span class="x">    {</span>
<a id="__codelineno-30-109" name="__codelineno-30-109" href="#__codelineno-30-109"></a><span class="x">        // Code executed after call flow is deleted</span>
<a id="__codelineno-30-110" name="__codelineno-30-110" href="#__codelineno-30-110"></a><span class="x">        // Код, выполняемый после удаления потока звонков</span>
<a id="__codelineno-30-111" name="__codelineno-30-111" href="#__codelineno-30-111"></a><span class="x">        return $result;</span>
<a id="__codelineno-30-112" name="__codelineno-30-112" href="#__codelineno-30-112"></a><span class="x">    }</span>
<a id="__codelineno-30-113" name="__codelineno-30-113" href="#__codelineno-30-113"></a>
<a id="__codelineno-30-114" name="__codelineno-30-114" href="#__codelineno-30-114"></a><span class="x">    public function OnBeforeCallFlowExecute($params)</span>
<a id="__codelineno-30-115" name="__codelineno-30-115" href="#__codelineno-30-115"></a><span class="x">    {</span>
<a id="__codelineno-30-116" name="__codelineno-30-116" href="#__codelineno-30-116"></a><span class="x">        // Code executed before call flow is executed</span>
<a id="__codelineno-30-117" name="__codelineno-30-117" href="#__codelineno-30-117"></a><span class="x">        // Код, выполняемый перед выполнением потока звонков</span>
<a id="__codelineno-30-118" name="__codelineno-30-118" href="#__codelineno-30-118"></a><span class="x">        return $params;</span>
<a id="__codelineno-30-119" name="__codelineno-30-119" href="#__codelineno-30-119"></a><span class="x">    }</span>
<a id="__codelineno-30-120" name="__codelineno-30-120" href="#__codelineno-30-120"></a>
<a id="__codelineno-30-121" name="__codelineno-30-121" href="#__codelineno-30-121"></a><span class="x">    public function OnAfterCallFlowExecute($params, $result)</span>
<a id="__codelineno-30-122" name="__codelineno-30-122" href="#__codelineno-30-122"></a><span class="x">    {</span>
<a id="__codelineno-30-123" name="__codelineno-30-123" href="#__codelineno-30-123"></a><span class="x">        // Code executed after call flow is executed</span>
<a id="__codelineno-30-124" name="__codelineno-30-124" href="#__codelineno-30-124"></a><span class="x">        // Код, выполняемый после выполнения потока звонков</span>
<a id="__codelineno-30-125" name="__codelineno-30-125" href="#__codelineno-30-125"></a><span class="x">        return $result;</span>
<a id="__codelineno-30-126" name="__codelineno-30-126" href="#__codelineno-30-126"></a><span class="x">    }</span>
<a id="__codelineno-30-127" name="__codelineno-30-127" href="#__codelineno-30-127"></a><span class="x">}</span>
<a id="__codelineno-30-128" name="__codelineno-30-128" href="#__codelineno-30-128"></a>
<a id="__codelineno-30-129" name="__codelineno-30-129" href="#__codelineno-30-129"></a><span class="x">// Register handler</span>
<a id="__codelineno-30-130" name="__codelineno-30-130" href="#__codelineno-30-130"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-30-131" name="__codelineno-30-131" href="#__codelineno-30-131"></a><span class="x">CVoximplantCallFlowHandler::Register(&#39;custom_call_flow&#39;, &#39;CCustomCallFlowHandler&#39;);</span>
</code></pre></div>
<h3 id="crm-integration-handlers-crm">CRM Integration Handlers | Обработчики интеграции с CRM<a class="headerlink" href="#crm-integration-handlers-crm" title="Permanent link">&para;</a></h3>
<h4 id="crm-integration-handler-crm">CRM Integration Handler | Обработчик интеграции с CRM<a class="headerlink" href="#crm-integration-handler-crm" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="x">// D7</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="x">class CustomCrmIntegrationHandler extends \Bitrix\Voximplant\CrmIntegration\Handler</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="x">{</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="x">    public function onBeforeCrmLeadCreate($params)</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="x">    {</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="x">        // Code executed before CRM lead is created</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="x">        // Код, выполняемый перед созданием лида в CRM</span>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="x">        return $params;</span>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="x">    }</span>
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="x">    public function onAfterCrmLeadCreate($params, $result)</span>
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a><span class="x">    {</span>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a><span class="x">        // Code executed after CRM lead is created</span>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a><span class="x">        // Код, выполняемый после создания лида в CRM</span>
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a><span class="x">        return $result;</span>
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a><span class="x">    }</span>
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a>
<a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a><span class="x">    public function onBeforeCrmContactCreate($params)</span>
<a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a><span class="x">    {</span>
<a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a><span class="x">        // Code executed before CRM contact is created</span>
<a id="__codelineno-31-23" name="__codelineno-31-23" href="#__codelineno-31-23"></a><span class="x">        // Код, выполняемый перед созданием контакта в CRM</span>
<a id="__codelineno-31-24" name="__codelineno-31-24" href="#__codelineno-31-24"></a><span class="x">        return $params;</span>
<a id="__codelineno-31-25" name="__codelineno-31-25" href="#__codelineno-31-25"></a><span class="x">    }</span>
<a id="__codelineno-31-26" name="__codelineno-31-26" href="#__codelineno-31-26"></a>
<a id="__codelineno-31-27" name="__codelineno-31-27" href="#__codelineno-31-27"></a><span class="x">    public function onAfterCrmContactCreate($params, $result)</span>
<a id="__codelineno-31-28" name="__codelineno-31-28" href="#__codelineno-31-28"></a><span class="x">    {</span>
<a id="__codelineno-31-29" name="__codelineno-31-29" href="#__codelineno-31-29"></a><span class="x">        // Code executed after CRM contact is created</span>
<a id="__codelineno-31-30" name="__codelineno-31-30" href="#__codelineno-31-30"></a><span class="x">        // Код, выполняемый после создания контакта в CRM</span>
<a id="__codelineno-31-31" name="__codelineno-31-31" href="#__codelineno-31-31"></a><span class="x">        return $result;</span>
<a id="__codelineno-31-32" name="__codelineno-31-32" href="#__codelineno-31-32"></a><span class="x">    }</span>
<a id="__codelineno-31-33" name="__codelineno-31-33" href="#__codelineno-31-33"></a>
<a id="__codelineno-31-34" name="__codelineno-31-34" href="#__codelineno-31-34"></a><span class="x">    public function onBeforeCrmDealCreate($params)</span>
<a id="__codelineno-31-35" name="__codelineno-31-35" href="#__codelineno-31-35"></a><span class="x">    {</span>
<a id="__codelineno-31-36" name="__codelineno-31-36" href="#__codelineno-31-36"></a><span class="x">        // Code executed before CRM deal is created</span>
<a id="__codelineno-31-37" name="__codelineno-31-37" href="#__codelineno-31-37"></a><span class="x">        // Код, выполняемый перед созданием сделки в CRM</span>
<a id="__codelineno-31-38" name="__codelineno-31-38" href="#__codelineno-31-38"></a><span class="x">        return $params;</span>
<a id="__codelineno-31-39" name="__codelineno-31-39" href="#__codelineno-31-39"></a><span class="x">    }</span>
<a id="__codelineno-31-40" name="__codelineno-31-40" href="#__codelineno-31-40"></a>
<a id="__codelineno-31-41" name="__codelineno-31-41" href="#__codelineno-31-41"></a><span class="x">    public function onAfterCrmDealCreate($params, $result)</span>
<a id="__codelineno-31-42" name="__codelineno-31-42" href="#__codelineno-31-42"></a><span class="x">    {</span>
<a id="__codelineno-31-43" name="__codelineno-31-43" href="#__codelineno-31-43"></a><span class="x">        // Code executed after CRM deal is created</span>
<a id="__codelineno-31-44" name="__codelineno-31-44" href="#__codelineno-31-44"></a><span class="x">        // Код, выполняемый после создания сделки в CRM</span>
<a id="__codelineno-31-45" name="__codelineno-31-45" href="#__codelineno-31-45"></a><span class="x">        return $result;</span>
<a id="__codelineno-31-46" name="__codelineno-31-46" href="#__codelineno-31-46"></a><span class="x">    }</span>
<a id="__codelineno-31-47" name="__codelineno-31-47" href="#__codelineno-31-47"></a>
<a id="__codelineno-31-48" name="__codelineno-31-48" href="#__codelineno-31-48"></a><span class="x">    public function onBeforeCrmActivityCreate($params)</span>
<a id="__codelineno-31-49" name="__codelineno-31-49" href="#__codelineno-31-49"></a><span class="x">    {</span>
<a id="__codelineno-31-50" name="__codelineno-31-50" href="#__codelineno-31-50"></a><span class="x">        // Code executed before CRM activity is created</span>
<a id="__codelineno-31-51" name="__codelineno-31-51" href="#__codelineno-31-51"></a><span class="x">        // Код, выполняемый перед созданием активности в CRM</span>
<a id="__codelineno-31-52" name="__codelineno-31-52" href="#__codelineno-31-52"></a><span class="x">        return $params;</span>
<a id="__codelineno-31-53" name="__codelineno-31-53" href="#__codelineno-31-53"></a><span class="x">    }</span>
<a id="__codelineno-31-54" name="__codelineno-31-54" href="#__codelineno-31-54"></a>
<a id="__codelineno-31-55" name="__codelineno-31-55" href="#__codelineno-31-55"></a><span class="x">    public function onAfterCrmActivityCreate($params, $result)</span>
<a id="__codelineno-31-56" name="__codelineno-31-56" href="#__codelineno-31-56"></a><span class="x">    {</span>
<a id="__codelineno-31-57" name="__codelineno-31-57" href="#__codelineno-31-57"></a><span class="x">        // Code executed after CRM activity is created</span>
<a id="__codelineno-31-58" name="__codelineno-31-58" href="#__codelineno-31-58"></a><span class="x">        // Код, выполняемый после создания активности в CRM</span>
<a id="__codelineno-31-59" name="__codelineno-31-59" href="#__codelineno-31-59"></a><span class="x">        return $result;</span>
<a id="__codelineno-31-60" name="__codelineno-31-60" href="#__codelineno-31-60"></a><span class="x">    }</span>
<a id="__codelineno-31-61" name="__codelineno-31-61" href="#__codelineno-31-61"></a><span class="x">}</span>
<a id="__codelineno-31-62" name="__codelineno-31-62" href="#__codelineno-31-62"></a>
<a id="__codelineno-31-63" name="__codelineno-31-63" href="#__codelineno-31-63"></a><span class="x">// Register handler</span>
<a id="__codelineno-31-64" name="__codelineno-31-64" href="#__codelineno-31-64"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-31-65" name="__codelineno-31-65" href="#__codelineno-31-65"></a><span class="x">\Bitrix\Voximplant\CrmIntegration\Handler::register(&#39;custom_crm_integration&#39;, CustomCrmIntegrationHandler::class);</span>
<a id="__codelineno-31-66" name="__codelineno-31-66" href="#__codelineno-31-66"></a>
<a id="__codelineno-31-67" name="__codelineno-31-67" href="#__codelineno-31-67"></a><span class="x">// Legacy</span>
<a id="__codelineno-31-68" name="__codelineno-31-68" href="#__codelineno-31-68"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-31-69" name="__codelineno-31-69" href="#__codelineno-31-69"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-31-70" name="__codelineno-31-70" href="#__codelineno-31-70"></a><span class="x">class CCustomCrmIntegrationHandler extends CVoximplantCrmIntegrationHandler</span>
<a id="__codelineno-31-71" name="__codelineno-31-71" href="#__codelineno-31-71"></a><span class="x">{</span>
<a id="__codelineno-31-72" name="__codelineno-31-72" href="#__codelineno-31-72"></a><span class="x">    public function OnBeforeCrmLeadCreate($params)</span>
<a id="__codelineno-31-73" name="__codelineno-31-73" href="#__codelineno-31-73"></a><span class="x">    {</span>
<a id="__codelineno-31-74" name="__codelineno-31-74" href="#__codelineno-31-74"></a><span class="x">        // Code executed before CRM lead is created</span>
<a id="__codelineno-31-75" name="__codelineno-31-75" href="#__codelineno-31-75"></a><span class="x">        // Код, выполняемый перед созданием лида в CRM</span>
<a id="__codelineno-31-76" name="__codelineno-31-76" href="#__codelineno-31-76"></a><span class="x">        return $params;</span>
<a id="__codelineno-31-77" name="__codelineno-31-77" href="#__codelineno-31-77"></a><span class="x">    }</span>
<a id="__codelineno-31-78" name="__codelineno-31-78" href="#__codelineno-31-78"></a>
<a id="__codelineno-31-79" name="__codelineno-31-79" href="#__codelineno-31-79"></a><span class="x">    public function OnAfterCrmLeadCreate($params, $result)</span>
<a id="__codelineno-31-80" name="__codelineno-31-80" href="#__codelineno-31-80"></a><span class="x">    {</span>
<a id="__codelineno-31-81" name="__codelineno-31-81" href="#__codelineno-31-81"></a><span class="x">        // Code executed after CRM lead is created</span>
<a id="__codelineno-31-82" name="__codelineno-31-82" href="#__codelineno-31-82"></a><span class="x">        // Код, выполняемый после создания лида в CRM</span>
<a id="__codelineno-31-83" name="__codelineno-31-83" href="#__codelineno-31-83"></a><span class="x">        return $result;</span>
<a id="__codelineno-31-84" name="__codelineno-31-84" href="#__codelineno-31-84"></a><span class="x">    }</span>
<a id="__codelineno-31-85" name="__codelineno-31-85" href="#__codelineno-31-85"></a>
<a id="__codelineno-31-86" name="__codelineno-31-86" href="#__codelineno-31-86"></a><span class="x">    public function OnBeforeCrmContactCreate($params)</span>
<a id="__codelineno-31-87" name="__codelineno-31-87" href="#__codelineno-31-87"></a><span class="x">    {</span>
<a id="__codelineno-31-88" name="__codelineno-31-88" href="#__codelineno-31-88"></a><span class="x">        // Code executed before CRM contact is created</span>
<a id="__codelineno-31-89" name="__codelineno-31-89" href="#__codelineno-31-89"></a><span class="x">        // Код, выполняемый перед созданием контакта в CRM</span>
<a id="__codelineno-31-90" name="__codelineno-31-90" href="#__codelineno-31-90"></a><span class="x">        return $params;</span>
<a id="__codelineno-31-91" name="__codelineno-31-91" href="#__codelineno-31-91"></a><span class="x">    }</span>
<a id="__codelineno-31-92" name="__codelineno-31-92" href="#__codelineno-31-92"></a>
<a id="__codelineno-31-93" name="__codelineno-31-93" href="#__codelineno-31-93"></a><span class="x">    public function OnAfterCrmContactCreate($params, $result)</span>
<a id="__codelineno-31-94" name="__codelineno-31-94" href="#__codelineno-31-94"></a><span class="x">    {</span>
<a id="__codelineno-31-95" name="__codelineno-31-95" href="#__codelineno-31-95"></a><span class="x">        // Code executed after CRM contact is created</span>
<a id="__codelineno-31-96" name="__codelineno-31-96" href="#__codelineno-31-96"></a><span class="x">        // Код, выполняемый после создания контакта в CRM</span>
<a id="__codelineno-31-97" name="__codelineno-31-97" href="#__codelineno-31-97"></a><span class="x">        return $result;</span>
<a id="__codelineno-31-98" name="__codelineno-31-98" href="#__codelineno-31-98"></a><span class="x">    }</span>
<a id="__codelineno-31-99" name="__codelineno-31-99" href="#__codelineno-31-99"></a>
<a id="__codelineno-31-100" name="__codelineno-31-100" href="#__codelineno-31-100"></a><span class="x">    public function OnBeforeCrmDealCreate($params)</span>
<a id="__codelineno-31-101" name="__codelineno-31-101" href="#__codelineno-31-101"></a><span class="x">    {</span>
<a id="__codelineno-31-102" name="__codelineno-31-102" href="#__codelineno-31-102"></a><span class="x">        // Code executed before CRM deal is created</span>
<a id="__codelineno-31-103" name="__codelineno-31-103" href="#__codelineno-31-103"></a><span class="x">        // Код, выполняемый перед созданием сделки в CRM</span>
<a id="__codelineno-31-104" name="__codelineno-31-104" href="#__codelineno-31-104"></a><span class="x">        return $params;</span>
<a id="__codelineno-31-105" name="__codelineno-31-105" href="#__codelineno-31-105"></a><span class="x">    }</span>
<a id="__codelineno-31-106" name="__codelineno-31-106" href="#__codelineno-31-106"></a>
<a id="__codelineno-31-107" name="__codelineno-31-107" href="#__codelineno-31-107"></a><span class="x">    public function OnAfterCrmDealCreate($params, $result)</span>
<a id="__codelineno-31-108" name="__codelineno-31-108" href="#__codelineno-31-108"></a><span class="x">    {</span>
<a id="__codelineno-31-109" name="__codelineno-31-109" href="#__codelineno-31-109"></a><span class="x">        // Code executed after CRM deal is created</span>
<a id="__codelineno-31-110" name="__codelineno-31-110" href="#__codelineno-31-110"></a><span class="x">        // Код, выполняемый после создания сделки в CRM</span>
<a id="__codelineno-31-111" name="__codelineno-31-111" href="#__codelineno-31-111"></a><span class="x">        return $result;</span>
<a id="__codelineno-31-112" name="__codelineno-31-112" href="#__codelineno-31-112"></a><span class="x">    }</span>
<a id="__codelineno-31-113" name="__codelineno-31-113" href="#__codelineno-31-113"></a>
<a id="__codelineno-31-114" name="__codelineno-31-114" href="#__codelineno-31-114"></a><span class="x">    public function OnBeforeCrmActivityCreate($params)</span>
<a id="__codelineno-31-115" name="__codelineno-31-115" href="#__codelineno-31-115"></a><span class="x">    {</span>
<a id="__codelineno-31-116" name="__codelineno-31-116" href="#__codelineno-31-116"></a><span class="x">        // Code executed before CRM activity is created</span>
<a id="__codelineno-31-117" name="__codelineno-31-117" href="#__codelineno-31-117"></a><span class="x">        // Код, выполняемый перед созданием активности в CRM</span>
<a id="__codelineno-31-118" name="__codelineno-31-118" href="#__codelineno-31-118"></a><span class="x">        return $params;</span>
<a id="__codelineno-31-119" name="__codelineno-31-119" href="#__codelineno-31-119"></a><span class="x">    }</span>
<a id="__codelineno-31-120" name="__codelineno-31-120" href="#__codelineno-31-120"></a>
<a id="__codelineno-31-121" name="__codelineno-31-121" href="#__codelineno-31-121"></a><span class="x">    public function OnAfterCrmActivityCreate($params, $result)</span>
<a id="__codelineno-31-122" name="__codelineno-31-122" href="#__codelineno-31-122"></a><span class="x">    {</span>
<a id="__codelineno-31-123" name="__codelineno-31-123" href="#__codelineno-31-123"></a><span class="x">        // Code executed after CRM activity is created</span>
<a id="__codelineno-31-124" name="__codelineno-31-124" href="#__codelineno-31-124"></a><span class="x">        // Код, выполняемый после создания активности в CRM</span>
<a id="__codelineno-31-125" name="__codelineno-31-125" href="#__codelineno-31-125"></a><span class="x">        return $result;</span>
<a id="__codelineno-31-126" name="__codelineno-31-126" href="#__codelineno-31-126"></a><span class="x">    }</span>
<a id="__codelineno-31-127" name="__codelineno-31-127" href="#__codelineno-31-127"></a><span class="x">}</span>
<a id="__codelineno-31-128" name="__codelineno-31-128" href="#__codelineno-31-128"></a>
<a id="__codelineno-31-129" name="__codelineno-31-129" href="#__codelineno-31-129"></a><span class="x">// Register handler</span>
<a id="__codelineno-31-130" name="__codelineno-31-130" href="#__codelineno-31-130"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-31-131" name="__codelineno-31-131" href="#__codelineno-31-131"></a><span class="x">CVoximplantCrmIntegrationHandler::Register(&#39;custom_crm_integration&#39;, &#39;CCustomCrmIntegrationHandler&#39;);</span>
</code></pre></div>
<h2 id="rest-api-rest-api">REST API | REST API<a class="headerlink" href="#rest-api-rest-api" title="Permanent link">&para;</a></h2>
<h3 id="call-management_1">Call Management | Управление звонками<a class="headerlink" href="#call-management_1" title="Permanent link">&para;</a></h3>
<h4 id="start-call">Start Call | Начало звонка<a class="headerlink" href="#start-call" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="x">// D7</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="x">$result = \Bitrix\Voximplant\Call::start([</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; &#39;+79001234567&#39;,</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="x">    &#39;LINE_ID&#39; =&gt; $lineId,</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="x">    &#39;CALLER_ID&#39; =&gt; $callerId,</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="x">    &#39;CRM_ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="x">    &#39;CRM_ENTITY_ID&#39; =&gt; $leadId</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="x">]);</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="x">// Legacy</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="x">$result = CVoximplant::StartCall([</span>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; &#39;+79001234567&#39;,</span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a><span class="x">    &#39;LINE_ID&#39; =&gt; $lineId,</span>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a><span class="x">    &#39;CALLER_ID&#39; =&gt; $callerId,</span>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a><span class="x">    &#39;CRM_ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a><span class="x">    &#39;CRM_ENTITY_ID&#39; =&gt; $leadId</span>
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="end-call_1">End Call | Завершение звонка<a class="headerlink" href="#end-call_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="x">// D7</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="x">$result = \Bitrix\Voximplant\Call::end($callId);</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="x">$result = CVoximplant::EndCall($callId);</span>
</code></pre></div>
<h4 id="transfer-call">Transfer Call | Перенаправление звонка<a class="headerlink" href="#transfer-call" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="x">// D7</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="x">$result = \Bitrix\Voximplant\Call::transfer($callId, $userId);</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="x">$result = CVoximplant::TransferCall($callId, $userId);</span>
</code></pre></div>
<h4 id="record-call">Record Call | Запись звонка<a class="headerlink" href="#record-call" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="x">// D7</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="x">$result = \Bitrix\Voximplant\Call::record($callId, true);</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="x">$result = CVoximplant::RecordCall($callId, true);</span>
</code></pre></div>
<h3 id="line-management">Line Management | Управление линиями<a class="headerlink" href="#line-management" title="Permanent link">&para;</a></h3>
<h4 id="create-line">Create Line | Создание линии<a class="headerlink" href="#create-line" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="x">// D7</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="x">$result = \Bitrix\Voximplant\Line::add([</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Main Line&#39;,</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Main phone line&#39;,</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; &#39;+79001234567&#39;,</span>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="x">    &#39;CALLER_ID&#39; =&gt; $callerId,</span>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;Y&#39;</span>
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="x">]);</span>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="x">// Legacy</span>
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a><span class="x">$result = CVoximplant::AddLine([</span>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Main Line&#39;,</span>
<a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Main phone line&#39;,</span>
<a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; &#39;+79001234567&#39;,</span>
<a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a><span class="x">    &#39;CALLER_ID&#39; =&gt; $callerId,</span>
<a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;Y&#39;</span>
<a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-line">Get Line | Получение линии<a class="headerlink" href="#get-line" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="x">// D7</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="x">$line = \Bitrix\Voximplant\Line::getById($lineId);</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="x">$line = CVoximplant::GetLine($lineId);</span>
</code></pre></div>
<h4 id="update-line">Update Line | Обновление линии<a class="headerlink" href="#update-line" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="x">// D7</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="x">$result = \Bitrix\Voximplant\Line::update($lineId, [</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Line&#39;,</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated phone line&#39;,</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;N&#39;</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="x">]);</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="x">// Legacy</span>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="x">$result = CVoximplant::UpdateLine($lineId, [</span>
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Line&#39;,</span>
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated phone line&#39;,</span>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;N&#39;</span>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-line">Delete Line | Удаление линии<a class="headerlink" href="#delete-line" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="x">// D7</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="x">$result = \Bitrix\Voximplant\Line::delete($lineId);</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="x">$result = CVoximplant::DeleteLine($lineId);</span>
</code></pre></div>
<h3 id="user-management">User Management | Управление пользователями<a class="headerlink" href="#user-management" title="Permanent link">&para;</a></h3>
<h4 id="assign-user">Assign User | Назначение пользователя<a class="headerlink" href="#assign-user" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="x">// D7</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="x">$result = \Bitrix\Voximplant\User::assign($userId, $lineId);</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="x">$result = CVoximplant::AssignUser($userId, $lineId);</span>
</code></pre></div>
<h4 id="unassign-user">Unassign User | Отмена назначения пользователя<a class="headerlink" href="#unassign-user" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="x">// D7</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="x">$result = \Bitrix\Voximplant\User::unassign($userId, $lineId);</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="x">$result = CVoximplant::UnassignUser($userId, $lineId);</span>
</code></pre></div>
<h3 id="call-flow-management">Call Flow Management | Управление потоками звонков<a class="headerlink" href="#call-flow-management" title="Permanent link">&para;</a></h3>
<h4 id="create-call-flow">Create Call Flow | Создание потока звонков<a class="headerlink" href="#create-call-flow" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="x">// D7</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="x">$result = \Bitrix\Voximplant\CallFlow::add([</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Main Flow&#39;,</span>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Main call flow&#39;,</span>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="x">    &#39;LINE_ID&#39; =&gt; $lineId,</span>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="x">    &#39;FLOW&#39; =&gt; [</span>
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="x">        &#39;type&#39; =&gt; &#39;menu&#39;,</span>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="x">        &#39;options&#39; =&gt; [</span>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a><span class="x">            &#39;message&#39; =&gt; &#39;Welcome to our company. Press 1 for sales, 2 for support.&#39;,</span>
<a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a><span class="x">            &#39;timeout&#39; =&gt; 5,</span>
<a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a><span class="x">            &#39;retries&#39; =&gt; 3,</span>
<a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a><span class="x">            &#39;items&#39; =&gt; [</span>
<a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a><span class="x">                [</span>
<a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a><span class="x">                    &#39;key&#39; =&gt; &#39;1&#39;,</span>
<a id="__codelineno-42-18" name="__codelineno-42-18" href="#__codelineno-42-18"></a><span class="x">                    &#39;action&#39; =&gt; &#39;transfer&#39;,</span>
<a id="__codelineno-42-19" name="__codelineno-42-19" href="#__codelineno-42-19"></a><span class="x">                    &#39;params&#39; =&gt; [</span>
<a id="__codelineno-42-20" name="__codelineno-42-20" href="#__codelineno-42-20"></a><span class="x">                        &#39;user_id&#39; =&gt; $salesUserId</span>
<a id="__codelineno-42-21" name="__codelineno-42-21" href="#__codelineno-42-21"></a><span class="x">                    ]</span>
<a id="__codelineno-42-22" name="__codelineno-42-22" href="#__codelineno-42-22"></a><span class="x">                ],</span>
<a id="__codelineno-42-23" name="__codelineno-42-23" href="#__codelineno-42-23"></a><span class="x">                [</span>
<a id="__codelineno-42-24" name="__codelineno-42-24" href="#__codelineno-42-24"></a><span class="x">                    &#39;key&#39; =&gt; &#39;2&#39;,</span>
<a id="__codelineno-42-25" name="__codelineno-42-25" href="#__codelineno-42-25"></a><span class="x">                    &#39;action&#39; =&gt; &#39;transfer&#39;,</span>
<a id="__codelineno-42-26" name="__codelineno-42-26" href="#__codelineno-42-26"></a><span class="x">                    &#39;params&#39; =&gt; [</span>
<a id="__codelineno-42-27" name="__codelineno-42-27" href="#__codelineno-42-27"></a><span class="x">                        &#39;user_id&#39; =&gt; $supportUserId</span>
<a id="__codelineno-42-28" name="__codelineno-42-28" href="#__codelineno-42-28"></a><span class="x">                    ]</span>
<a id="__codelineno-42-29" name="__codelineno-42-29" href="#__codelineno-42-29"></a><span class="x">                ]</span>
<a id="__codelineno-42-30" name="__codelineno-42-30" href="#__codelineno-42-30"></a><span class="x">            ]</span>
<a id="__codelineno-42-31" name="__codelineno-42-31" href="#__codelineno-42-31"></a><span class="x">        ]</span>
<a id="__codelineno-42-32" name="__codelineno-42-32" href="#__codelineno-42-32"></a><span class="x">    ]</span>
<a id="__codelineno-42-33" name="__codelineno-42-33" href="#__codelineno-42-33"></a><span class="x">]);</span>
<a id="__codelineno-42-34" name="__codelineno-42-34" href="#__codelineno-42-34"></a>
<a id="__codelineno-42-35" name="__codelineno-42-35" href="#__codelineno-42-35"></a><span class="x">// Legacy</span>
<a id="__codelineno-42-36" name="__codelineno-42-36" href="#__codelineno-42-36"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-42-37" name="__codelineno-42-37" href="#__codelineno-42-37"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-42-38" name="__codelineno-42-38" href="#__codelineno-42-38"></a><span class="x">$result = CVoximplant::AddCallFlow([</span>
<a id="__codelineno-42-39" name="__codelineno-42-39" href="#__codelineno-42-39"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Main Flow&#39;,</span>
<a id="__codelineno-42-40" name="__codelineno-42-40" href="#__codelineno-42-40"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Main call flow&#39;,</span>
<a id="__codelineno-42-41" name="__codelineno-42-41" href="#__codelineno-42-41"></a><span class="x">    &#39;LINE_ID&#39; =&gt; $lineId,</span>
<a id="__codelineno-42-42" name="__codelineno-42-42" href="#__codelineno-42-42"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-42-43" name="__codelineno-42-43" href="#__codelineno-42-43"></a><span class="x">    &#39;FLOW&#39; =&gt; [</span>
<a id="__codelineno-42-44" name="__codelineno-42-44" href="#__codelineno-42-44"></a><span class="x">        &#39;type&#39; =&gt; &#39;menu&#39;,</span>
<a id="__codelineno-42-45" name="__codelineno-42-45" href="#__codelineno-42-45"></a><span class="x">        &#39;options&#39; =&gt; [</span>
<a id="__codelineno-42-46" name="__codelineno-42-46" href="#__codelineno-42-46"></a><span class="x">            &#39;message&#39; =&gt; &#39;Welcome to our company. Press 1 for sales, 2 for support.&#39;,</span>
<a id="__codelineno-42-47" name="__codelineno-42-47" href="#__codelineno-42-47"></a><span class="x">            &#39;timeout&#39; =&gt; 5,</span>
<a id="__codelineno-42-48" name="__codelineno-42-48" href="#__codelineno-42-48"></a><span class="x">            &#39;retries&#39; =&gt; 3,</span>
<a id="__codelineno-42-49" name="__codelineno-42-49" href="#__codelineno-42-49"></a><span class="x">            &#39;items&#39; =&gt; [</span>
<a id="__codelineno-42-50" name="__codelineno-42-50" href="#__codelineno-42-50"></a><span class="x">                [</span>
<a id="__codelineno-42-51" name="__codelineno-42-51" href="#__codelineno-42-51"></a><span class="x">                    &#39;key&#39; =&gt; &#39;1&#39;,</span>
<a id="__codelineno-42-52" name="__codelineno-42-52" href="#__codelineno-42-52"></a><span class="x">                    &#39;action&#39; =&gt; &#39;transfer&#39;,</span>
<a id="__codelineno-42-53" name="__codelineno-42-53" href="#__codelineno-42-53"></a><span class="x">                    &#39;params&#39; =&gt; [</span>
<a id="__codelineno-42-54" name="__codelineno-42-54" href="#__codelineno-42-54"></a><span class="x">                        &#39;user_id&#39; =&gt; $salesUserId</span>
<a id="__codelineno-42-55" name="__codelineno-42-55" href="#__codelineno-42-55"></a><span class="x">                    ]</span>
<a id="__codelineno-42-56" name="__codelineno-42-56" href="#__codelineno-42-56"></a><span class="x">                ],</span>
<a id="__codelineno-42-57" name="__codelineno-42-57" href="#__codelineno-42-57"></a><span class="x">                [</span>
<a id="__codelineno-42-58" name="__codelineno-42-58" href="#__codelineno-42-58"></a><span class="x">                    &#39;key&#39; =&gt; &#39;2&#39;,</span>
<a id="__codelineno-42-59" name="__codelineno-42-59" href="#__codelineno-42-59"></a><span class="x">                    &#39;action&#39; =&gt; &#39;transfer&#39;,</span>
<a id="__codelineno-42-60" name="__codelineno-42-60" href="#__codelineno-42-60"></a><span class="x">                    &#39;params&#39; =&gt; [</span>
<a id="__codelineno-42-61" name="__codelineno-42-61" href="#__codelineno-42-61"></a><span class="x">                        &#39;user_id&#39; =&gt; $supportUserId</span>
<a id="__codelineno-42-62" name="__codelineno-42-62" href="#__codelineno-42-62"></a><span class="x">                    ]</span>
<a id="__codelineno-42-63" name="__codelineno-42-63" href="#__codelineno-42-63"></a><span class="x">                ]</span>
<a id="__codelineno-42-64" name="__codelineno-42-64" href="#__codelineno-42-64"></a><span class="x">            ]</span>
<a id="__codelineno-42-65" name="__codelineno-42-65" href="#__codelineno-42-65"></a><span class="x">        ]</span>
<a id="__codelineno-42-66" name="__codelineno-42-66" href="#__codelineno-42-66"></a><span class="x">    ]</span>
<a id="__codelineno-42-67" name="__codelineno-42-67" href="#__codelineno-42-67"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-call-flow">Get Call Flow | Получение потока звонков<a class="headerlink" href="#get-call-flow" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="x">// D7</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="x">$callFlow = \Bitrix\Voximplant\CallFlow::getById($callFlowId);</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="x">$callFlow = CVoximplant::GetCallFlow($callFlowId);</span>
</code></pre></div>
<h4 id="update-call-flow">Update Call Flow | Обновление потока звонков<a class="headerlink" href="#update-call-flow" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="x">// D7</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="x">$result = \Bitrix\Voximplant\CallFlow::update($callFlowId, [</span>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Flow&#39;,</span>
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated call flow&#39;,</span>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;N&#39;</span>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="x">]);</span>
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a><span class="x">// Legacy</span>
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a><span class="x">$result = CVoximplant::UpdateCallFlow($callFlowId, [</span>
<a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Flow&#39;,</span>
<a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated call flow&#39;,</span>
<a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a><span class="x">    &#39;ACTIVE&#39; =&gt; &#39;N&#39;</span>
<a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-call-flow">Delete Call Flow | Удаление потока звонков<a class="headerlink" href="#delete-call-flow" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="x">// D7</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="x">$result = \Bitrix\Voximplant\CallFlow::delete($callFlowId);</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="x">$result = CVoximplant::DeleteCallFlow($callFlowId);</span>
</code></pre></div>
<h3 id="crm-integration-crm_1">CRM Integration | Интеграция с CRM<a class="headerlink" href="#crm-integration-crm_1" title="Permanent link">&para;</a></h3>
<h4 id="create-crm-lead-crm">Create CRM Lead | Создание лида в CRM<a class="headerlink" href="#create-crm-lead-crm" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="x">// D7</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="x">$result = \Bitrix\Voximplant\CrmIntegration::createLead([</span>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Call from &#39; . $phoneNumber,</span>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="x">    &#39;NAME&#39; =&gt; $name,</span>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="x">    &#39;LAST_NAME&#39; =&gt; $lastName,</span>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="x">    &#39;PHONE&#39; =&gt; [</span>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="x">        [</span>
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="x">            &#39;VALUE&#39; =&gt; $phoneNumber,</span>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="x">            &#39;VALUE_TYPE&#39; =&gt; &#39;WORK&#39;</span>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a><span class="x">        ]</span>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="x">    ],</span>
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a><span class="x">    &#39;COMMENTS&#39; =&gt; &#39;Created from call&#39;,</span>
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a><span class="x">    &#39;SOURCE_ID&#39; =&gt; &#39;CALL&#39;,</span>
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="x">    &#39;ASSIGNED_BY_ID&#39; =&gt; $userId</span>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="x">]);</span>
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="x">// Legacy</span>
<a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a><span class="x">$result = CVoximplant::CreateCrmLead([</span>
<a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Call from &#39; . $phoneNumber,</span>
<a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a><span class="x">    &#39;NAME&#39; =&gt; $name,</span>
<a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a><span class="x">    &#39;LAST_NAME&#39; =&gt; $lastName,</span>
<a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a><span class="x">    &#39;PHONE&#39; =&gt; [</span>
<a id="__codelineno-46-27" name="__codelineno-46-27" href="#__codelineno-46-27"></a><span class="x">        [</span>
<a id="__codelineno-46-28" name="__codelineno-46-28" href="#__codelineno-46-28"></a><span class="x">            &#39;VALUE&#39; =&gt; $phoneNumber,</span>
<a id="__codelineno-46-29" name="__codelineno-46-29" href="#__codelineno-46-29"></a><span class="x">            &#39;VALUE_TYPE&#39; =&gt; &#39;WORK&#39;</span>
<a id="__codelineno-46-30" name="__codelineno-46-30" href="#__codelineno-46-30"></a><span class="x">        ]</span>
<a id="__codelineno-46-31" name="__codelineno-46-31" href="#__codelineno-46-31"></a><span class="x">    ],</span>
<a id="__codelineno-46-32" name="__codelineno-46-32" href="#__codelineno-46-32"></a><span class="x">    &#39;COMMENTS&#39; =&gt; &#39;Created from call&#39;,</span>
<a id="__codelineno-46-33" name="__codelineno-46-33" href="#__codelineno-46-33"></a><span class="x">    &#39;SOURCE_ID&#39; =&gt; &#39;CALL&#39;,</span>
<a id="__codelineno-46-34" name="__codelineno-46-34" href="#__codelineno-46-34"></a><span class="x">    &#39;ASSIGNED_BY_ID&#39; =&gt; $userId</span>
<a id="__codelineno-46-35" name="__codelineno-46-35" href="#__codelineno-46-35"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="create-crm-activity-crm_1">Create CRM Activity | Создание активности в CRM<a class="headerlink" href="#create-crm-activity-crm_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="x">// D7</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="x">$result = \Bitrix\Voximplant\CrmIntegration::createActivity([</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="x">    &#39;TYPE_ID&#39; =&gt; &#39;CALL&#39;,</span>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="x">    &#39;SUBJECT&#39; =&gt; &#39;Call with &#39; . $phoneNumber,</span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="x">    &#39;START_TIME&#39; =&gt; new \Bitrix\Main\Type\DateTime(),</span>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="x">    &#39;END_TIME&#39; =&gt; new \Bitrix\Main\Type\DateTime(),</span>
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a><span class="x">    &#39;COMPLETED&#39; =&gt; &#39;N&#39;,</span>
<a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a><span class="x">    &#39;RESPONSIBLE_ID&#39; =&gt; $userId,</span>
<a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a><span class="x">    &#39;PRIORITY&#39; =&gt; &#39;NORMAL&#39;,</span>
<a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Call duration: 5 minutes&#39;,</span>
<a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a><span class="x">    &#39;DIRECTION&#39; =&gt; &#39;INCOMING&#39;,</span>
<a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a><span class="x">    &#39;CALL_ID&#39; =&gt; $callId,</span>
<a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; $phoneNumber,</span>
<a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a><span class="x">    &#39;CRM_ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a><span class="x">    &#39;CRM_ENTITY_ID&#39; =&gt; $leadId</span>
<a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a><span class="x">]);</span>
<a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a>
<a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a><span class="x">// Legacy</span>
<a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a><span class="x">// Requires: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;voximplant&#39;)</span>
<a id="__codelineno-47-23" name="__codelineno-47-23" href="#__codelineno-47-23"></a><span class="x">$result = CVoximplant::CreateCrmActivity([</span>
<a id="__codelineno-47-24" name="__codelineno-47-24" href="#__codelineno-47-24"></a><span class="x">    &#39;TYPE_ID&#39; =&gt; &#39;CALL&#39;,</span>
<a id="__codelineno-47-25" name="__codelineno-47-25" href="#__codelineno-47-25"></a><span class="x">    &#39;SUBJECT&#39; =&gt; &#39;Call with &#39; . $phoneNumber,</span>
<a id="__codelineno-47-26" name="__codelineno-47-26" href="#__codelineno-47-26"></a><span class="x">    &#39;START_TIME&#39; =&gt; new \Bitrix\Main\Type\DateTime(),</span>
<a id="__codelineno-47-27" name="__codelineno-47-27" href="#__codelineno-47-27"></a><span class="x">    &#39;END_TIME&#39; =&gt; new \Bitrix\Main\Type\DateTime(),</span>
<a id="__codelineno-47-28" name="__codelineno-47-28" href="#__codelineno-47-28"></a><span class="x">    &#39;COMPLETED&#39; =&gt; &#39;N&#39;,</span>
<a id="__codelineno-47-29" name="__codelineno-47-29" href="#__codelineno-47-29"></a><span class="x">    &#39;RESPONSIBLE_ID&#39; =&gt; $userId,</span>
<a id="__codelineno-47-30" name="__codelineno-47-30" href="#__codelineno-47-30"></a><span class="x">    &#39;PRIORITY&#39; =&gt; &#39;NORMAL&#39;,</span>
<a id="__codelineno-47-31" name="__codelineno-47-31" href="#__codelineno-47-31"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Call duration: 5 minutes&#39;,</span>
<a id="__codelineno-47-32" name="__codelineno-47-32" href="#__codelineno-47-32"></a><span class="x">    &#39;DIRECTION&#39; =&gt; &#39;INCOMING&#39;,</span>
<a id="__codelineno-47-33" name="__codelineno-47-33" href="#__codelineno-47-33"></a><span class="x">    &#39;CALL_ID&#39; =&gt; $callId,</span>
<a id="__codelineno-47-34" name="__codelineno-47-34" href="#__codelineno-47-34"></a><span class="x">    &#39;PHONE_NUMBER&#39; =&gt; $phoneNumber,</span>
<a id="__codelineno-47-35" name="__codelineno-47-35" href="#__codelineno-47-35"></a><span class="x">    &#39;CRM_ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-47-36" name="__codelineno-47-36" href="#__codelineno-47-36"></a><span class="x">    &#39;CRM_ENTITY_ID&#39; =&gt; $leadId</span>
<a id="__codelineno-47-37" name="__codelineno-47-37" href="#__codelineno-47-37"></a><span class="x">]);</span>
</code></pre></div>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  К началу
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/axbuild" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://t.me/bitrixdevelopers" target="_blank" rel="noopener" title="t.me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716 43.8 43.8 0 0 1 .417 9.769"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Принять</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Управлять настройками</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "navigation.tracking", "navigation.expand", "navigation.path", "toc.integrate", "search.highlight", "search.share", "search.suggest", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": ["Bitrix24", "API", "REST API", "CRM", "Development", "Integration", "Modules", "Documentation"], "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>