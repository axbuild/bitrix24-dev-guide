
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Comprehensive Bitrix24 API Documentation and Developer Guide. Complete reference for Bitrix24 modules, REST API, and development best practices.">
      
      
        <meta name="author" content="Axbuild">
      
      
        <link rel="canonical" href="https://axbuild.github.io/bitrix24-dev-guide/modules/im/">
      
      
        <link rel="prev" href="../voximplant/">
      
      
        <link rel="next" href="../mobile/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Im - Bitrix24 Developer Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-XXXXXXXXXX"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-XXXXXXXXXX",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Im - Bitrix24 Developer Guide" >
      
        <meta  property="og:description"  content="Comprehensive Bitrix24 API Documentation and Developer Guide. Complete reference for Bitrix24 modules, REST API, and development best practices." >
      
        <meta  property="og:image"  content="https://axbuild.github.io/bitrix24-dev-guide/assets/images/social/modules/im/index.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://axbuild.github.io/bitrix24-dev-guide/modules/im/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Im - Bitrix24 Developer Guide" >
      
        <meta  name="twitter:description"  content="Comprehensive Bitrix24 API Documentation and Developer Guide. Complete reference for Bitrix24 modules, REST API, and development best practices." >
      
        <meta  name="twitter:image"  content="https://axbuild.github.io/bitrix24-dev-guide/assets/images/social/modules/im/index.png" >
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#im-module-im" class="md-skip">
          Перейти к содержанию
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул">
    <a href="../.." title="Bitrix24 Developer Guide" class="md-header__button md-logo" aria-label="Bitrix24 Developer Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Bitrix24 Developer Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Im
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Выберите язык">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Поиск" placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Поиск">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Поделиться" aria-label="Поделиться" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Очистить" aria-label="Очистить" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Инициализация поиска
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/axbuild/bitrix24-dev-guide" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    axbuild/bitrix24-dev-guide
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Вкладки" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Главная

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../main/" class="md-tabs__link">
          
  
  
    
  
  Модули

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/contributing.md" class="md-tabs__link">
          
  
  
    
  
  О проекте

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Навигация" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Bitrix24 Developer Guide" class="md-nav__button md-logo" aria-label="Bitrix24 Developer Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg>

    </a>
    Bitrix24 Developer Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/axbuild/bitrix24-dev-guide" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    axbuild/bitrix24-dev-guide
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Главная
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../main/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Модули
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Модули
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../crm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CRM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tasks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../iblock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Iblock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../form/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Form
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../disk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pull/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pull
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../socialnetwork/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Socialnetwork
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calendar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calendar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../forum/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Forum
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blog/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../catalog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Catalog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../support/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../voximplant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Voximplant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Im
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Im
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview | Обзор
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    <span class="md-ellipsis">
      Methods | Методы
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Methods | Методы">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chat-management" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Management | Управление чатами
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-management" class="md-nav__link">
    <span class="md-ellipsis">
      Message Management | Управление сообщениями
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-management" class="md-nav__link">
    <span class="md-ellipsis">
      User Management | Управление пользователями
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-management" class="md-nav__link">
    <span class="md-ellipsis">
      File Management | Управление файлами
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notifications" class="md-nav__link">
    <span class="md-ellipsis">
      Notifications | Уведомления
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bot-management" class="md-nav__link">
    <span class="md-ellipsis">
      Bot Management | Управление ботами
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#command-management" class="md-nav__link">
    <span class="md-ellipsis">
      Command Management | Управление командами
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-with-other-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Integration with Other Modules | Интеграция с другими модулями
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Client Integration | Интеграция с клиентом
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Handlers | Обработчики
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handlers | Обработчики">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#message-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Message Handlers | Обработчики сообщений
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chat-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Handlers | Обработчики чатов
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      User Handlers | Обработчики пользователей
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      File Handlers | Обработчики файлов
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notification-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Notification Handlers | Обработчики уведомлений
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rest-api-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      REST API | REST API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="REST API | REST API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#message-management_1" class="md-nav__link">
    <span class="md-ellipsis">
      Message Management | Управление сообщениями
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chat-management_1" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Management | Управление чатами
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-management_1" class="md-nav__link">
    <span class="md-ellipsis">
      User Management | Управление пользователями
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-management_1" class="md-nav__link">
    <span class="md-ellipsis">
      File Management | Управление файлами
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notification-management" class="md-nav__link">
    <span class="md-ellipsis">
      Notification Management | Управление уведомлениями
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mobile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mobile
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    О проекте
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            О проекте
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contributing.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/changelog.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="im-module-im">IM Module | Модуль IM<a class="headerlink" href="#im-module-im" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview | Обзор<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The IM module provides functionality for instant messaging in Bitrix24. It enables users to exchange messages, create group chats, share files, and integrate with other modules. | Модуль IM предоставляет функциональность для обмена мгновенными сообщениями в Bitrix24. Он позволяет пользователям обмениваться сообщениями, создавать групповые чаты, делиться файлами и интегрироваться с другими модулями.</p>
<h2 id="methods">Methods | Методы<a class="headerlink" href="#methods" title="Permanent link">&para;</a></h2>
<h3 id="chat-management">Chat Management | Управление чатами<a class="headerlink" href="#chat-management" title="Permanent link">&para;</a></h3>
<h4 id="create-chat">Create Chat | Создание чата<a class="headerlink" href="#create-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="x">// D7</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="x">$chat = \Bitrix\Im\Chat::add([</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Project Discussion&#39;,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="x">    &#39;TYPE&#39; =&gt; &#39;GROUP&#39;,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="x">    &#39;USERS&#39; =&gt; [$userId1, $userId2, $userId3],</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Chat for project team members&#39;,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="x">    &#39;COLOR&#39; =&gt; &#39;#FF0000&#39;,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="x">    &#39;AVATAR&#39; =&gt; $avatarId</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="x">]);</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="x">// Legacy</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="x">$chat = CIMChat::Add([</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Project Discussion&#39;,</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="x">    &#39;TYPE&#39; =&gt; &#39;GROUP&#39;,</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="x">    &#39;USERS&#39; =&gt; [$userId1, $userId2, $userId3],</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Chat for project team members&#39;,</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="x">    &#39;COLOR&#39; =&gt; &#39;#FF0000&#39;,</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="x">    &#39;AVATAR&#39; =&gt; $avatarId</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-chat">Get Chat | Получение чата<a class="headerlink" href="#get-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="x">// D7</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="x">$chat = \Bitrix\Im\Chat::getById($chatId);</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="x">$chat = CIMChat::GetByID($chatId);</span>
</code></pre></div>
<h4 id="get-chat-list">Get Chat List | Получение списка чатов<a class="headerlink" href="#get-chat-list" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="x">// D7</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="x">$chats = \Bitrix\Im\Chat::getList([</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="x">    &#39;select&#39; =&gt; [&#39;*&#39;],</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="x">    &#39;filter&#39; =&gt; [</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="x">        &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="x">        &#39;TYPE&#39; =&gt; &#39;GROUP&#39;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="x">    ],</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="x">    &#39;order&#39; =&gt; [&#39;LAST_MESSAGE_DATE&#39; =&gt; &#39;DESC&#39;]</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="x">]);</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="x">// Legacy</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="x">$chats = CIMChat::GetList([</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="x">    &#39;TYPE&#39; =&gt; &#39;GROUP&#39;</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="x">], [&#39;LAST_MESSAGE_DATE&#39; =&gt; &#39;DESC&#39;]);</span>
</code></pre></div>
<h4 id="update-chat">Update Chat | Обновление чата<a class="headerlink" href="#update-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="x">// D7</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="x">$chat = \Bitrix\Im\Chat::getById($chatId);</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="x">$result = $chat-&gt;update([</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Updated Project Discussion&#39;,</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated chat for project team members&#39;,</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="x">    &#39;COLOR&#39; =&gt; &#39;#00FF00&#39;</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="x">]);</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="x">// Legacy</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="x">$result = CIMChat::Update($chatId, [</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Updated Project Discussion&#39;,</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated chat for project team members&#39;,</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="x">    &#39;COLOR&#39; =&gt; &#39;#00FF00&#39;</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-chat">Delete Chat | Удаление чата<a class="headerlink" href="#delete-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="x">// D7</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="x">$chat = \Bitrix\Im\Chat::getById($chatId);</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="x">$result = $chat-&gt;delete();</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="x">$result = CIMChat::Delete($chatId);</span>
</code></pre></div>
<h3 id="message-management">Message Management | Управление сообщениями<a class="headerlink" href="#message-management" title="Permanent link">&para;</a></h3>
<h4 id="send-message">Send Message | Отправка сообщения<a class="headerlink" href="#send-message" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="x">// D7</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="x">$message = \Bitrix\Im\Message::add([</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="x">    &#39;FROM_USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="x">    &#39;MESSAGE&#39; =&gt; &#39;Hello, team!&#39;,</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="x">    &#39;PARAMS&#39; =&gt; [</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="x">        &#39;KEYBOARD&#39; =&gt; [</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="x">            [</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="x">                &#39;BOT_ID&#39; =&gt; $botId,</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="x">                &#39;COMMAND&#39; =&gt; &#39;start&#39;,</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="x">                &#39;TITLE&#39; =&gt; &#39;Start&#39;</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="x">            ]</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="x">        ]</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="x">    ]</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="x">]);</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="x">// Legacy</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="x">$message = CIMChat::AddMessage([</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="x">    &#39;FROM_USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="x">    &#39;MESSAGE&#39; =&gt; &#39;Hello, team!&#39;,</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="x">    &#39;PARAMS&#39; =&gt; [</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="x">        &#39;KEYBOARD&#39; =&gt; [</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="x">            [</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="x">                &#39;BOT_ID&#39; =&gt; $botId,</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="x">                &#39;COMMAND&#39; =&gt; &#39;start&#39;,</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="x">                &#39;TITLE&#39; =&gt; &#39;Start&#39;</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a><span class="x">            ]</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="x">        ]</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="x">    ]</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-message">Get Message | Получение сообщения<a class="headerlink" href="#get-message" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="x">// D7</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="x">$message = \Bitrix\Im\Message::getById($messageId);</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="x">$message = CIMChat::GetMessage($messageId);</span>
</code></pre></div>
<h4 id="get-message-list">Get Message List | Получение списка сообщений<a class="headerlink" href="#get-message-list" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="x">// D7</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="x">$messages = \Bitrix\Im\Message::getList([</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="x">    &#39;select&#39; =&gt; [&#39;*&#39;],</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="x">    &#39;filter&#39; =&gt; [</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="x">        &#39;CHAT_ID&#39; =&gt; $chatId</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="x">    ],</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="x">    &#39;order&#39; =&gt; [&#39;DATE_CREATE&#39; =&gt; &#39;DESC&#39;],</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="x">    &#39;limit&#39; =&gt; 50</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="x">]);</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="x">// Legacy</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="x">$messages = CIMChat::GetMessageList([</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="x">], [&#39;DATE_CREATE&#39; =&gt; &#39;DESC&#39;], 50);</span>
</code></pre></div>
<h4 id="update-message">Update Message | Обновление сообщения<a class="headerlink" href="#update-message" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="x">// D7</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="x">$message = \Bitrix\Im\Message::getById($messageId);</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="x">$result = $message-&gt;update([</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="x">    &#39;MESSAGE&#39; =&gt; &#39;Updated message text&#39;</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="x">]);</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="x">$result = CIMChat::UpdateMessage($messageId, [</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="x">    &#39;MESSAGE&#39; =&gt; &#39;Updated message text&#39;</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-message">Delete Message | Удаление сообщения<a class="headerlink" href="#delete-message" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="x">// D7</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="x">$message = \Bitrix\Im\Message::getById($messageId);</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="x">$result = $message-&gt;delete();</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="x">$result = CIMChat::DeleteMessage($messageId);</span>
</code></pre></div>
<h3 id="user-management">User Management | Управление пользователями<a class="headerlink" href="#user-management" title="Permanent link">&para;</a></h3>
<h4 id="add-user-to-chat">Add User to Chat | Добавление пользователя в чат<a class="headerlink" href="#add-user-to-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="x">// D7</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="x">$chat = \Bitrix\Im\Chat::getById($chatId);</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="x">$result = $chat-&gt;addUser($userId);</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="x">$result = CIMChat::AddUser($chatId, $userId);</span>
</code></pre></div>
<h4 id="remove-user-from-chat">Remove User from Chat | Удаление пользователя из чата<a class="headerlink" href="#remove-user-from-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="x">// D7</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="x">$chat = \Bitrix\Im\Chat::getById($chatId);</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="x">$result = $chat-&gt;removeUser($userId);</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="x">$result = CIMChat::RemoveUser($chatId, $userId);</span>
</code></pre></div>
<h4 id="get-chat-users">Get Chat Users | Получение пользователей чата<a class="headerlink" href="#get-chat-users" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="x">// D7</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="x">$chat = \Bitrix\Im\Chat::getById($chatId);</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="x">$users = $chat-&gt;getUsers();</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="x">$users = CIMChat::GetUsers($chatId);</span>
</code></pre></div>
<h4 id="set-chat-admin">Set Chat Admin | Назначение администратора чата<a class="headerlink" href="#set-chat-admin" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="x">// D7</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="x">$chat = \Bitrix\Im\Chat::getById($chatId);</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="x">$result = $chat-&gt;setAdmin($userId);</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="x">$result = CIMChat::SetAdmin($chatId, $userId);</span>
</code></pre></div>
<h3 id="file-management">File Management | Управление файлами<a class="headerlink" href="#file-management" title="Permanent link">&para;</a></h3>
<h4 id="upload-file">Upload File | Загрузка файла<a class="headerlink" href="#upload-file" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="x">// D7</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="x">$file = \Bitrix\Im\File::upload([</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="x">    &#39;FILE_ID&#39; =&gt; $fileId,</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;document.pdf&#39;,</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Project documentation&#39;</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="x">]);</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="x">// Legacy</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="x">$file = CIMDisk::UploadFile($chatId, $USER-&gt;GetID(), $fileId, [</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;document.pdf&#39;,</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Project documentation&#39;</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-file">Get File | Получение файла<a class="headerlink" href="#get-file" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="x">// D7</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="x">$file = \Bitrix\Im\File::getById($fileId);</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="x">$file = CIMDisk::GetFile($fileId);</span>
</code></pre></div>
<h4 id="get-chat-files">Get Chat Files | Получение файлов чата<a class="headerlink" href="#get-chat-files" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="x">// D7</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="x">$files = \Bitrix\Im\File::getList([</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="x">    &#39;select&#39; =&gt; [&#39;*&#39;],</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="x">    &#39;filter&#39; =&gt; [</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="x">        &#39;CHAT_ID&#39; =&gt; $chatId</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="x">    ],</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="x">    &#39;order&#39; =&gt; [&#39;DATE_CREATE&#39; =&gt; &#39;DESC&#39;]</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="x">]);</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="x">// Legacy</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="x">$files = CIMDisk::GetFiles($chatId, [&#39;DATE_CREATE&#39; =&gt; &#39;DESC&#39;]);</span>
</code></pre></div>
<h4 id="delete-file">Delete File | Удаление файла<a class="headerlink" href="#delete-file" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="x">// D7</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="x">$file = \Bitrix\Im\File::getById($fileId);</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="x">$result = $file-&gt;delete();</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="x">$result = CIMDisk::DeleteFile($fileId);</span>
</code></pre></div>
<h3 id="notifications">Notifications | Уведомления<a class="headerlink" href="#notifications" title="Permanent link">&para;</a></h3>
<h4 id="send-notification">Send Notification | Отправка уведомления<a class="headerlink" href="#send-notification" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="x">// D7</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="x">$notification = \Bitrix\Im\Notify::add([</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="x">    &#39;TO_USER_ID&#39; =&gt; $userId,</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="x">    &#39;FROM_USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="x">    &#39;NOTIFY_TYPE&#39; =&gt; &#39;IM&#39;,</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="x">    &#39;NOTIFY_MODULE&#39; =&gt; &#39;im&#39;,</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="x">    &#39;NOTIFY_EVENT&#39; =&gt; &#39;message&#39;,</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="x">    &#39;NOTIFY_TITLE&#39; =&gt; &#39;New message&#39;,</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="x">    &#39;NOTIFY_MESSAGE&#39; =&gt; &#39;You have a new message in chat&#39;,</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="x">    &#39;NOTIFY_DATA&#39; =&gt; [</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="x">        &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="x">        &#39;MESSAGE_ID&#39; =&gt; $messageId</span>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="x">    ]</span>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="x">]);</span>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="x">// Legacy</span>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="x">$notification = CIMNotify::Add([</span>
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="x">    &#39;TO_USER_ID&#39; =&gt; $userId,</span>
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a><span class="x">    &#39;FROM_USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a><span class="x">    &#39;NOTIFY_TYPE&#39; =&gt; &#39;IM&#39;,</span>
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a><span class="x">    &#39;NOTIFY_MODULE&#39; =&gt; &#39;im&#39;,</span>
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a><span class="x">    &#39;NOTIFY_EVENT&#39; =&gt; &#39;message&#39;,</span>
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a><span class="x">    &#39;NOTIFY_TITLE&#39; =&gt; &#39;New message&#39;,</span>
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a><span class="x">    &#39;NOTIFY_MESSAGE&#39; =&gt; &#39;You have a new message in chat&#39;,</span>
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a><span class="x">    &#39;NOTIFY_DATA&#39; =&gt; [</span>
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a><span class="x">        &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a><span class="x">        &#39;MESSAGE_ID&#39; =&gt; $messageId</span>
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a><span class="x">    ]</span>
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-notifications">Get Notifications | Получение уведомлений<a class="headerlink" href="#get-notifications" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="x">// D7</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="x">$notifications = \Bitrix\Im\Notify::getList([</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="x">    &#39;select&#39; =&gt; [&#39;*&#39;],</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="x">    &#39;filter&#39; =&gt; [</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="x">        &#39;TO_USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="x">        &#39;NOTIFY_TYPE&#39; =&gt; &#39;IM&#39;</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="x">    ],</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="x">    &#39;order&#39; =&gt; [&#39;DATE_CREATE&#39; =&gt; &#39;DESC&#39;],</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="x">    &#39;limit&#39; =&gt; 50</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="x">]);</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="x">// Legacy</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="x">$notifications = CIMNotify::GetList([</span>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="x">    &#39;TO_USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="x">    &#39;NOTIFY_TYPE&#39; =&gt; &#39;IM&#39;</span>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a><span class="x">], [&#39;DATE_CREATE&#39; =&gt; &#39;DESC&#39;], 50);</span>
</code></pre></div>
<h4 id="mark-notification-as-read">Mark Notification as Read | Отметка уведомления как прочитанного<a class="headerlink" href="#mark-notification-as-read" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="x">// D7</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="x">$notification = \Bitrix\Im\Notify::getById($notificationId);</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="x">$result = $notification-&gt;markAsRead();</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="x">$result = CIMNotify::MarkAsRead($notificationId);</span>
</code></pre></div>
<h4 id="delete-notification">Delete Notification | Удаление уведомления<a class="headerlink" href="#delete-notification" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="x">// D7</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="x">$notification = \Bitrix\Im\Notify::getById($notificationId);</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="x">$result = $notification-&gt;delete();</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="x">$result = CIMNotify::Delete($notificationId);</span>
</code></pre></div>
<h3 id="bot-management">Bot Management | Управление ботами<a class="headerlink" href="#bot-management" title="Permanent link">&para;</a></h3>
<h4 id="create-bot">Create Bot | Создание бота<a class="headerlink" href="#create-bot" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="x">// D7</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="x">$bot = \Bitrix\Im\Bot::add([</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Assistant Bot&#39;,</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Bot for answering common questions&#39;,</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="x">    &#39;TYPE&#39; =&gt; &#39;HUMAN&#39;,</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="x">    &#39;CLASS&#39; =&gt; &#39;\\Bitrix\\Im\\Bot\\Assistant&#39;,</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="x">    &#39;METHOD_MESSAGE&#39; =&gt; &#39;onMessage&#39;,</span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="x">    &#39;METHOD_WELCOME&#39; =&gt; &#39;onWelcome&#39;,</span>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="x">    &#39;METHOD_BOT_DELETE&#39; =&gt; &#39;onBotDelete&#39;,</span>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="x">    &#39;METHOD_LANGUAGE&#39; =&gt; &#39;onLanguage&#39;,</span>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="x">    &#39;LANG&#39; =&gt; [&#39;ru&#39;, &#39;en&#39;],</span>
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="x">    &#39;PROPERTIES&#39; =&gt; [</span>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="x">        &#39;LOGIN&#39; =&gt; &#39;assistant_bot&#39;,</span>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="x">        &#39;NAME&#39; =&gt; &#39;Assistant&#39;,</span>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="x">        &#39;WORK_POSITION&#39; =&gt; &#39;Bot&#39;,</span>
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="x">        &#39;PERSONAL_GENDER&#39; =&gt; &#39;M&#39;,</span>
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="x">        &#39;PERSONAL_PROFESSION&#39; =&gt; &#39;Assistant&#39;,</span>
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="x">        &#39;PERSONAL_WWW&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a><span class="x">        &#39;PERSONAL_BIRTHDAY&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a><span class="x">        &#39;PERSONAL_PHOTO&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a><span class="x">        &#39;PERSONAL_ICQ&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a><span class="x">        &#39;PERSONAL_PHONE&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a><span class="x">        &#39;PERSONAL_FAX&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a><span class="x">        &#39;PERSONAL_MOBILE&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a><span class="x">        &#39;PERSONAL_CITY&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-28" name="__codelineno-22-28" href="#__codelineno-22-28"></a><span class="x">        &#39;WORK_COMPANY&#39; =&gt; &#39;Bitrix24&#39;,</span>
<a id="__codelineno-22-29" name="__codelineno-22-29" href="#__codelineno-22-29"></a><span class="x">        &#39;WORK_POSITION&#39; =&gt; &#39;Bot&#39;,</span>
<a id="__codelineno-22-30" name="__codelineno-22-30" href="#__codelineno-22-30"></a><span class="x">        &#39;WORK_PHONE&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-31" name="__codelineno-22-31" href="#__codelineno-22-31"></a><span class="x">        &#39;WORK_FAX&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-32" name="__codelineno-22-32" href="#__codelineno-22-32"></a><span class="x">        &#39;WORK_MAILBOX&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-33" name="__codelineno-22-33" href="#__codelineno-22-33"></a><span class="x">        &#39;WORK_CITY&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-34" name="__codelineno-22-34" href="#__codelineno-22-34"></a><span class="x">        &#39;WORK_STATE&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-35" name="__codelineno-22-35" href="#__codelineno-22-35"></a><span class="x">        &#39;WORK_ZIP&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-36" name="__codelineno-22-36" href="#__codelineno-22-36"></a><span class="x">        &#39;WORK_COUNTRY&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-37" name="__codelineno-22-37" href="#__codelineno-22-37"></a><span class="x">        &#39;WORK_PROFILE&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-38" name="__codelineno-22-38" href="#__codelineno-22-38"></a><span class="x">        &#39;WORK_LOGO&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-39" name="__codelineno-22-39" href="#__codelineno-22-39"></a><span class="x">        &#39;WORK_NOTES&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-40" name="__codelineno-22-40" href="#__codelineno-22-40"></a><span class="x">        &#39;WORK_WWW&#39; =&gt; &#39;&#39;</span>
<a id="__codelineno-22-41" name="__codelineno-22-41" href="#__codelineno-22-41"></a><span class="x">    ]</span>
<a id="__codelineno-22-42" name="__codelineno-22-42" href="#__codelineno-22-42"></a><span class="x">]);</span>
<a id="__codelineno-22-43" name="__codelineno-22-43" href="#__codelineno-22-43"></a>
<a id="__codelineno-22-44" name="__codelineno-22-44" href="#__codelineno-22-44"></a><span class="x">// Legacy</span>
<a id="__codelineno-22-45" name="__codelineno-22-45" href="#__codelineno-22-45"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-22-46" name="__codelineno-22-46" href="#__codelineno-22-46"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-22-47" name="__codelineno-22-47" href="#__codelineno-22-47"></a><span class="x">$bot = CIMBot::Add([</span>
<a id="__codelineno-22-48" name="__codelineno-22-48" href="#__codelineno-22-48"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Assistant Bot&#39;,</span>
<a id="__codelineno-22-49" name="__codelineno-22-49" href="#__codelineno-22-49"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Bot for answering common questions&#39;,</span>
<a id="__codelineno-22-50" name="__codelineno-22-50" href="#__codelineno-22-50"></a><span class="x">    &#39;TYPE&#39; =&gt; &#39;HUMAN&#39;,</span>
<a id="__codelineno-22-51" name="__codelineno-22-51" href="#__codelineno-22-51"></a><span class="x">    &#39;CLASS&#39; =&gt; &#39;\\Bitrix\\Im\\Bot\\Assistant&#39;,</span>
<a id="__codelineno-22-52" name="__codelineno-22-52" href="#__codelineno-22-52"></a><span class="x">    &#39;METHOD_MESSAGE&#39; =&gt; &#39;onMessage&#39;,</span>
<a id="__codelineno-22-53" name="__codelineno-22-53" href="#__codelineno-22-53"></a><span class="x">    &#39;METHOD_WELCOME&#39; =&gt; &#39;onWelcome&#39;,</span>
<a id="__codelineno-22-54" name="__codelineno-22-54" href="#__codelineno-22-54"></a><span class="x">    &#39;METHOD_BOT_DELETE&#39; =&gt; &#39;onBotDelete&#39;,</span>
<a id="__codelineno-22-55" name="__codelineno-22-55" href="#__codelineno-22-55"></a><span class="x">    &#39;METHOD_LANGUAGE&#39; =&gt; &#39;onLanguage&#39;,</span>
<a id="__codelineno-22-56" name="__codelineno-22-56" href="#__codelineno-22-56"></a><span class="x">    &#39;LANG&#39; =&gt; [&#39;ru&#39;, &#39;en&#39;],</span>
<a id="__codelineno-22-57" name="__codelineno-22-57" href="#__codelineno-22-57"></a><span class="x">    &#39;PROPERTIES&#39; =&gt; [</span>
<a id="__codelineno-22-58" name="__codelineno-22-58" href="#__codelineno-22-58"></a><span class="x">        &#39;LOGIN&#39; =&gt; &#39;assistant_bot&#39;,</span>
<a id="__codelineno-22-59" name="__codelineno-22-59" href="#__codelineno-22-59"></a><span class="x">        &#39;NAME&#39; =&gt; &#39;Assistant&#39;,</span>
<a id="__codelineno-22-60" name="__codelineno-22-60" href="#__codelineno-22-60"></a><span class="x">        &#39;WORK_POSITION&#39; =&gt; &#39;Bot&#39;,</span>
<a id="__codelineno-22-61" name="__codelineno-22-61" href="#__codelineno-22-61"></a><span class="x">        &#39;PERSONAL_GENDER&#39; =&gt; &#39;M&#39;,</span>
<a id="__codelineno-22-62" name="__codelineno-22-62" href="#__codelineno-22-62"></a><span class="x">        &#39;PERSONAL_PROFESSION&#39; =&gt; &#39;Assistant&#39;,</span>
<a id="__codelineno-22-63" name="__codelineno-22-63" href="#__codelineno-22-63"></a><span class="x">        &#39;PERSONAL_WWW&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-64" name="__codelineno-22-64" href="#__codelineno-22-64"></a><span class="x">        &#39;PERSONAL_BIRTHDAY&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-65" name="__codelineno-22-65" href="#__codelineno-22-65"></a><span class="x">        &#39;PERSONAL_PHOTO&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-66" name="__codelineno-22-66" href="#__codelineno-22-66"></a><span class="x">        &#39;PERSONAL_ICQ&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-67" name="__codelineno-22-67" href="#__codelineno-22-67"></a><span class="x">        &#39;PERSONAL_PHONE&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-68" name="__codelineno-22-68" href="#__codelineno-22-68"></a><span class="x">        &#39;PERSONAL_FAX&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-69" name="__codelineno-22-69" href="#__codelineno-22-69"></a><span class="x">        &#39;PERSONAL_MOBILE&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-70" name="__codelineno-22-70" href="#__codelineno-22-70"></a><span class="x">        &#39;PERSONAL_CITY&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-71" name="__codelineno-22-71" href="#__codelineno-22-71"></a><span class="x">        &#39;WORK_COMPANY&#39; =&gt; &#39;Bitrix24&#39;,</span>
<a id="__codelineno-22-72" name="__codelineno-22-72" href="#__codelineno-22-72"></a><span class="x">        &#39;WORK_POSITION&#39; =&gt; &#39;Bot&#39;,</span>
<a id="__codelineno-22-73" name="__codelineno-22-73" href="#__codelineno-22-73"></a><span class="x">        &#39;WORK_PHONE&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-74" name="__codelineno-22-74" href="#__codelineno-22-74"></a><span class="x">        &#39;WORK_FAX&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-75" name="__codelineno-22-75" href="#__codelineno-22-75"></a><span class="x">        &#39;WORK_MAILBOX&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-76" name="__codelineno-22-76" href="#__codelineno-22-76"></a><span class="x">        &#39;WORK_CITY&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-77" name="__codelineno-22-77" href="#__codelineno-22-77"></a><span class="x">        &#39;WORK_STATE&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-78" name="__codelineno-22-78" href="#__codelineno-22-78"></a><span class="x">        &#39;WORK_ZIP&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-79" name="__codelineno-22-79" href="#__codelineno-22-79"></a><span class="x">        &#39;WORK_COUNTRY&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-80" name="__codelineno-22-80" href="#__codelineno-22-80"></a><span class="x">        &#39;WORK_PROFILE&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-81" name="__codelineno-22-81" href="#__codelineno-22-81"></a><span class="x">        &#39;WORK_LOGO&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-82" name="__codelineno-22-82" href="#__codelineno-22-82"></a><span class="x">        &#39;WORK_NOTES&#39; =&gt; &#39;&#39;,</span>
<a id="__codelineno-22-83" name="__codelineno-22-83" href="#__codelineno-22-83"></a><span class="x">        &#39;WORK_WWW&#39; =&gt; &#39;&#39;</span>
<a id="__codelineno-22-84" name="__codelineno-22-84" href="#__codelineno-22-84"></a><span class="x">    ]</span>
<a id="__codelineno-22-85" name="__codelineno-22-85" href="#__codelineno-22-85"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-bot">Get Bot | Получение бота<a class="headerlink" href="#get-bot" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="x">// D7</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="x">$bot = \Bitrix\Im\Bot::getById($botId);</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="x">$bot = CIMBot::GetByID($botId);</span>
</code></pre></div>
<h4 id="get-bot-list">Get Bot List | Получение списка ботов<a class="headerlink" href="#get-bot-list" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="x">// D7</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="x">$bots = \Bitrix\Im\Bot::getList([</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="x">    &#39;select&#39; =&gt; [&#39;*&#39;],</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="x">    &#39;filter&#39; =&gt; [</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="x">        &#39;TYPE&#39; =&gt; &#39;HUMAN&#39;</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="x">    ],</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="x">    &#39;order&#39; =&gt; [&#39;NAME&#39; =&gt; &#39;ASC&#39;]</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="x">]);</span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="x">// Legacy</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="x">$bots = CIMBot::GetList([], [&#39;TYPE&#39; =&gt; &#39;HUMAN&#39;], [&#39;NAME&#39; =&gt; &#39;ASC&#39;]);</span>
</code></pre></div>
<h4 id="update-bot">Update Bot | Обновление бота<a class="headerlink" href="#update-bot" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="x">// D7</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="x">$bot = \Bitrix\Im\Bot::getById($botId);</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="x">$result = $bot-&gt;update([</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Assistant Bot&#39;,</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated bot for answering common questions&#39;</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="x">]);</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="x">// Legacy</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span class="x">$result = CIMBot::Update($botId, [</span>
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Updated Assistant Bot&#39;,</span>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated bot for answering common questions&#39;</span>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-bot">Delete Bot | Удаление бота<a class="headerlink" href="#delete-bot" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="x">// D7</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="x">$bot = \Bitrix\Im\Bot::getById($botId);</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="x">$result = $bot-&gt;delete();</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="x">$result = CIMBot::Delete($botId);</span>
</code></pre></div>
<h3 id="command-management">Command Management | Управление командами<a class="headerlink" href="#command-management" title="Permanent link">&para;</a></h3>
<h4 id="register-command">Register Command | Регистрация команды<a class="headerlink" href="#register-command" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="x">// D7</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="x">$command = \Bitrix\Im\Command::register([</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="x">    &#39;BOT_ID&#39; =&gt; $botId,</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="x">    &#39;COMMAND&#39; =&gt; &#39;start&#39;,</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="x">    &#39;COMMAND_ID&#39; =&gt; &#39;start&#39;,</span>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Start&#39;,</span>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Start the bot&#39;,</span>
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="x">    &#39;PARAMS&#39; =&gt; [</span>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="x">        &#39;COMMAND&#39; =&gt; &#39;start&#39;,</span>
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="x">        &#39;HIDDEN&#39; =&gt; &#39;N&#39;</span>
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="x">    ]</span>
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="x">]);</span>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="x">// Legacy</span>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a><span class="x">$command = CIMBot::RegisterCommand($botId, [</span>
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a><span class="x">    &#39;COMMAND&#39; =&gt; &#39;start&#39;,</span>
<a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a><span class="x">    &#39;COMMAND_ID&#39; =&gt; &#39;start&#39;,</span>
<a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Start&#39;,</span>
<a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Start the bot&#39;,</span>
<a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a><span class="x">    &#39;PARAMS&#39; =&gt; [</span>
<a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a><span class="x">        &#39;COMMAND&#39; =&gt; &#39;start&#39;,</span>
<a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a><span class="x">        &#39;HIDDEN&#39; =&gt; &#39;N&#39;</span>
<a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a><span class="x">    ]</span>
<a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-command">Get Command | Получение команды<a class="headerlink" href="#get-command" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="x">// D7</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="x">$command = \Bitrix\Im\Command::getById($commandId);</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="x">$command = CIMBot::GetCommand($commandId);</span>
</code></pre></div>
<h4 id="get-command-list">Get Command List | Получение списка команд<a class="headerlink" href="#get-command-list" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="x">// D7</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="x">$commands = \Bitrix\Im\Command::getList([</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="x">    &#39;select&#39; =&gt; [&#39;*&#39;],</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="x">    &#39;filter&#39; =&gt; [</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="x">        &#39;BOT_ID&#39; =&gt; $botId</span>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="x">    ],</span>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="x">    &#39;order&#39; =&gt; [&#39;TITLE&#39; =&gt; &#39;ASC&#39;]</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="x">]);</span>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="x">// Legacy</span>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="x">$commands = CIMBot::GetCommandList($botId, [&#39;TITLE&#39; =&gt; &#39;ASC&#39;]);</span>
</code></pre></div>
<h4 id="update-command">Update Command | Обновление команды<a class="headerlink" href="#update-command" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="x">// D7</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="x">$command = \Bitrix\Im\Command::getById($commandId);</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="x">$result = $command-&gt;update([</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Updated Start&#39;,</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated start the bot&#39;</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="x">]);</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="x">// Legacy</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="x">$result = CIMBot::UpdateCommand($commandId, [</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Updated Start&#39;,</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Updated start the bot&#39;</span>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-command">Delete Command | Удаление команды<a class="headerlink" href="#delete-command" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="x">// D7</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="x">$command = \Bitrix\Im\Command::getById($commandId);</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="x">$result = $command-&gt;delete();</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="x">// Legacy</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="x">$result = CIMBot::DeleteCommand($commandId);</span>
</code></pre></div>
<h3 id="integration-with-other-modules">Integration with Other Modules | Интеграция с другими модулями<a class="headerlink" href="#integration-with-other-modules" title="Permanent link">&para;</a></h3>
<h4 id="create-task-from-chat">Create Task from Chat | Создание задачи из чата<a class="headerlink" href="#create-task-from-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="x">// D7</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;tasks&#39;)</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;tasks&#39;)</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="x">$task = \Bitrix\Im\Integration\Tasks::createFromChat([</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;New task from chat&#39;,</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Task description&#39;,</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="x">    &#39;RESPONSIBLE_ID&#39; =&gt; $userId,</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="x">    &#39;CREATOR_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="x">    &#39;GROUP_ID&#39; =&gt; $groupId</span>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="x">]);</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="x">// Legacy</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a><span class="x">// Requires: CModule::IncludeModule(&#39;tasks&#39;)</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;tasks&#39;)</span>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a><span class="x">$task = CIMTask::CreateFromChat([</span>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;New task from chat&#39;,</span>
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Task description&#39;,</span>
<a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a><span class="x">    &#39;RESPONSIBLE_ID&#39; =&gt; $userId,</span>
<a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a><span class="x">    &#39;CREATOR_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a><span class="x">    &#39;GROUP_ID&#39; =&gt; $groupId</span>
<a id="__codelineno-32-27" name="__codelineno-32-27" href="#__codelineno-32-27"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="create-calendar-event-from-chat">Create Calendar Event from Chat | Создание события календаря из чата<a class="headerlink" href="#create-calendar-event-from-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="x">// D7</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;calendar&#39;)</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;calendar&#39;)</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="x">$event = \Bitrix\Im\Integration\Calendar::createFromChat([</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Meeting from chat&#39;,</span>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Meeting description&#39;,</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="x">    &#39;FROM&#39; =&gt; new \Bitrix\Main\Type\DateTime(&#39;2023-12-01 10:00:00&#39;),</span>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="x">    &#39;TO&#39; =&gt; new \Bitrix\Main\Type\DateTime(&#39;2023-12-01 11:00:00&#39;),</span>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="x">    &#39;TZ_FROM&#39; =&gt; &#39;Europe/Moscow&#39;,</span>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="x">    &#39;TZ_TO&#39; =&gt; &#39;Europe/Moscow&#39;,</span>
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a><span class="x">    &#39;ACCESSIBILITY&#39; =&gt; &#39;busy&#39;,</span>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a><span class="x">    &#39;IMPORTANCE&#39; =&gt; &#39;normal&#39;,</span>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a><span class="x">    &#39;EVENT_TYPE&#39; =&gt; &#39;meeting&#39;,</span>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a><span class="x">    &#39;COLOR&#39; =&gt; &#39;#FF0000&#39;,</span>
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a><span class="x">    &#39;TEXT_COLOR&#39; =&gt; &#39;#FFFFFF&#39;,</span>
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a><span class="x">    &#39;LOCATION&#39; =&gt; &#39;Conference Room&#39;,</span>
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a><span class="x">    &#39;ATTENDEES&#39; =&gt; [</span>
<a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a><span class="x">        [</span>
<a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a><span class="x">            &#39;USER_ID&#39; =&gt; $userId1,</span>
<a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a><span class="x">            &#39;STATUS&#39; =&gt; &#39;accepted&#39;</span>
<a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a><span class="x">        ],</span>
<a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a><span class="x">        [</span>
<a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a><span class="x">            &#39;USER_ID&#39; =&gt; $userId2,</span>
<a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a><span class="x">            &#39;STATUS&#39; =&gt; &#39;pending&#39;</span>
<a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a><span class="x">        ]</span>
<a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a><span class="x">    ]</span>
<a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a><span class="x">]);</span>
<a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a>
<a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a><span class="x">// Legacy</span>
<a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-33-34" name="__codelineno-33-34" href="#__codelineno-33-34"></a><span class="x">// Requires: CModule::IncludeModule(&#39;calendar&#39;)</span>
<a id="__codelineno-33-35" name="__codelineno-33-35" href="#__codelineno-33-35"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-33-36" name="__codelineno-33-36" href="#__codelineno-33-36"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;calendar&#39;)</span>
<a id="__codelineno-33-37" name="__codelineno-33-37" href="#__codelineno-33-37"></a><span class="x">$event = CIMCalendar::CreateFromChat([</span>
<a id="__codelineno-33-38" name="__codelineno-33-38" href="#__codelineno-33-38"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-33-39" name="__codelineno-33-39" href="#__codelineno-33-39"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;Meeting from chat&#39;,</span>
<a id="__codelineno-33-40" name="__codelineno-33-40" href="#__codelineno-33-40"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Meeting description&#39;,</span>
<a id="__codelineno-33-41" name="__codelineno-33-41" href="#__codelineno-33-41"></a><span class="x">    &#39;FROM&#39; =&gt; &#39;2023-12-01 10:00:00&#39;,</span>
<a id="__codelineno-33-42" name="__codelineno-33-42" href="#__codelineno-33-42"></a><span class="x">    &#39;TO&#39; =&gt; &#39;2023-12-01 11:00:00&#39;,</span>
<a id="__codelineno-33-43" name="__codelineno-33-43" href="#__codelineno-33-43"></a><span class="x">    &#39;TZ_FROM&#39; =&gt; &#39;Europe/Moscow&#39;,</span>
<a id="__codelineno-33-44" name="__codelineno-33-44" href="#__codelineno-33-44"></a><span class="x">    &#39;TZ_TO&#39; =&gt; &#39;Europe/Moscow&#39;,</span>
<a id="__codelineno-33-45" name="__codelineno-33-45" href="#__codelineno-33-45"></a><span class="x">    &#39;ACCESSIBILITY&#39; =&gt; &#39;busy&#39;,</span>
<a id="__codelineno-33-46" name="__codelineno-33-46" href="#__codelineno-33-46"></a><span class="x">    &#39;IMPORTANCE&#39; =&gt; &#39;normal&#39;,</span>
<a id="__codelineno-33-47" name="__codelineno-33-47" href="#__codelineno-33-47"></a><span class="x">    &#39;EVENT_TYPE&#39; =&gt; &#39;meeting&#39;,</span>
<a id="__codelineno-33-48" name="__codelineno-33-48" href="#__codelineno-33-48"></a><span class="x">    &#39;COLOR&#39; =&gt; &#39;#FF0000&#39;,</span>
<a id="__codelineno-33-49" name="__codelineno-33-49" href="#__codelineno-33-49"></a><span class="x">    &#39;TEXT_COLOR&#39; =&gt; &#39;#FFFFFF&#39;,</span>
<a id="__codelineno-33-50" name="__codelineno-33-50" href="#__codelineno-33-50"></a><span class="x">    &#39;LOCATION&#39; =&gt; &#39;Conference Room&#39;,</span>
<a id="__codelineno-33-51" name="__codelineno-33-51" href="#__codelineno-33-51"></a><span class="x">    &#39;ATTENDEES&#39; =&gt; [</span>
<a id="__codelineno-33-52" name="__codelineno-33-52" href="#__codelineno-33-52"></a><span class="x">        [</span>
<a id="__codelineno-33-53" name="__codelineno-33-53" href="#__codelineno-33-53"></a><span class="x">            &#39;USER_ID&#39; =&gt; $userId1,</span>
<a id="__codelineno-33-54" name="__codelineno-33-54" href="#__codelineno-33-54"></a><span class="x">            &#39;STATUS&#39; =&gt; &#39;accepted&#39;</span>
<a id="__codelineno-33-55" name="__codelineno-33-55" href="#__codelineno-33-55"></a><span class="x">        ],</span>
<a id="__codelineno-33-56" name="__codelineno-33-56" href="#__codelineno-33-56"></a><span class="x">        [</span>
<a id="__codelineno-33-57" name="__codelineno-33-57" href="#__codelineno-33-57"></a><span class="x">            &#39;USER_ID&#39; =&gt; $userId2,</span>
<a id="__codelineno-33-58" name="__codelineno-33-58" href="#__codelineno-33-58"></a><span class="x">            &#39;STATUS&#39; =&gt; &#39;pending&#39;</span>
<a id="__codelineno-33-59" name="__codelineno-33-59" href="#__codelineno-33-59"></a><span class="x">        ]</span>
<a id="__codelineno-33-60" name="__codelineno-33-60" href="#__codelineno-33-60"></a><span class="x">    ]</span>
<a id="__codelineno-33-61" name="__codelineno-33-61" href="#__codelineno-33-61"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="create-crm-activity-from-chat-crm">Create CRM Activity from Chat | Создание активности CRM из чата<a class="headerlink" href="#create-crm-activity-from-chat-crm" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="x">// D7</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;crm&#39;)</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;crm&#39;)</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="x">$activity = \Bitrix\Im\Integration\Crm::createFromChat([</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="x">    &#39;ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="x">    &#39;ENTITY_ID&#39; =&gt; $leadId,</span>
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="x">    &#39;SUBJECT&#39; =&gt; &#39;Activity from chat&#39;,</span>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Activity description&#39;,</span>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="x">    &#39;RESPONSIBLE_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="x">    &#39;DIRECTION&#39; =&gt; &#39;INCOMING&#39;,</span>
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="x">    &#39;TYPE_ID&#39; =&gt; &#39;CALL&#39;,</span>
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="x">    &#39;PRIORITY&#39; =&gt; &#39;NORMAL&#39;,</span>
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a><span class="x">    &#39;COMPLETED&#39; =&gt; &#39;N&#39;</span>
<a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a><span class="x">]);</span>
<a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a>
<a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a><span class="x">// Legacy</span>
<a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a><span class="x">// Requires: CModule::IncludeModule(&#39;crm&#39;)</span>
<a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;crm&#39;)</span>
<a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a><span class="x">$activity = CIMCrm::CreateFromChat([</span>
<a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a><span class="x">    &#39;ENTITY_TYPE&#39; =&gt; &#39;LEAD&#39;,</span>
<a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a><span class="x">    &#39;ENTITY_ID&#39; =&gt; $leadId,</span>
<a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a><span class="x">    &#39;SUBJECT&#39; =&gt; &#39;Activity from chat&#39;,</span>
<a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;Activity description&#39;,</span>
<a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a><span class="x">    &#39;RESPONSIBLE_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-34-31" name="__codelineno-34-31" href="#__codelineno-34-31"></a><span class="x">    &#39;DIRECTION&#39; =&gt; &#39;INCOMING&#39;,</span>
<a id="__codelineno-34-32" name="__codelineno-34-32" href="#__codelineno-34-32"></a><span class="x">    &#39;TYPE_ID&#39; =&gt; &#39;CALL&#39;,</span>
<a id="__codelineno-34-33" name="__codelineno-34-33" href="#__codelineno-34-33"></a><span class="x">    &#39;PRIORITY&#39; =&gt; &#39;NORMAL&#39;,</span>
<a id="__codelineno-34-34" name="__codelineno-34-34" href="#__codelineno-34-34"></a><span class="x">    &#39;COMPLETED&#39; =&gt; &#39;N&#39;</span>
<a id="__codelineno-34-35" name="__codelineno-34-35" href="#__codelineno-34-35"></a><span class="x">]);</span>
</code></pre></div>
<h3 id="client-integration">Client Integration | Интеграция с клиентом<a class="headerlink" href="#client-integration" title="Permanent link">&para;</a></h3>
<h4 id="get-client-script">Get Client Script | Получение клиентского скрипта<a class="headerlink" href="#get-client-script" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="x">// D7</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="x">$script = \Bitrix\Im\Client::getScript([</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="x">    &#39;LANGUAGE_ID&#39; =&gt; LANGUAGE_ID,</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="x">    &#39;DEVICE_TYPE&#39; =&gt; &#39;desktop&#39;</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="x">]);</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="x">// Legacy</span>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="x">$script = CIMClient::GetScript([</span>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a><span class="x">    &#39;LANGUAGE_ID&#39; =&gt; LANGUAGE_ID,</span>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="x">    &#39;DEVICE_TYPE&#39; =&gt; &#39;desktop&#39;</span>
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="initialize-client">Initialize Client | Инициализация клиента<a class="headerlink" href="#initialize-client" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="x">// D7</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="x">$client = \Bitrix\Im\Client::initialize([</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="x">    &#39;DEVICE_TYPE&#39; =&gt; &#39;desktop&#39;</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="x">]);</span>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="x">$client = CIMClient::Initialize([</span>
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a><span class="x">    &#39;DEVICE_TYPE&#39; =&gt; &#39;desktop&#39;</span>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="get-client-settings">Get Client Settings | Получение настроек клиента<a class="headerlink" href="#get-client-settings" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="x">// D7</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="x">$settings = \Bitrix\Im\Client::getSettings($USER-&gt;GetID());</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="x">$settings = CIMClient::GetSettings($USER-&gt;GetID());</span>
</code></pre></div>
<h4 id="update-client-settings">Update Client Settings | Обновление настроек клиента<a class="headerlink" href="#update-client-settings" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="x">// D7</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="x">$result = \Bitrix\Im\Client::updateSettings($USER-&gt;GetID(), [</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="x">    &#39;DEVICE_TYPE&#39; =&gt; &#39;mobile&#39;,</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="x">    &#39;ENABLE_NOTIFICATIONS&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="x">    &#39;ENABLE_SOUND&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="x">    &#39;ENABLE_DESKTOP&#39; =&gt; &#39;N&#39;</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="x">]);</span>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="x">// Legacy</span>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="x">$result = CIMClient::UpdateSettings($USER-&gt;GetID(), [</span>
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="x">    &#39;DEVICE_TYPE&#39; =&gt; &#39;mobile&#39;,</span>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="x">    &#39;ENABLE_NOTIFICATIONS&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="x">    &#39;ENABLE_SOUND&#39; =&gt; &#39;Y&#39;,</span>
<a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a><span class="x">    &#39;ENABLE_DESKTOP&#39; =&gt; &#39;N&#39;</span>
<a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a><span class="x">]);</span>
</code></pre></div>
<h2 id="handlers">Handlers | Обработчики<a class="headerlink" href="#handlers" title="Permanent link">&para;</a></h2>
<h3 id="message-handlers">Message Handlers | Обработчики сообщений<a class="headerlink" href="#message-handlers" title="Permanent link">&para;</a></h3>
<h4 id="message-handler">Message Handler | Обработчик сообщения<a class="headerlink" href="#message-handler" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="x">// D7</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="x">class CustomMessageHandler extends \Bitrix\Im\Message\Handler</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="x">{</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="x">    public function onBeforeMessageCreate($params)</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="x">    {</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="x">        // Code executed before message is created</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="x">        // Код, выполняемый перед созданием сообщения</span>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="x">    }</span>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="x">    public function onAfterMessageCreate($params, $result)</span>
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a><span class="x">    {</span>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a><span class="x">        // Code executed after message is created</span>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a><span class="x">        // Код, выполняемый после создания сообщения</span>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a><span class="x">    }</span>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a><span class="x">    public function onBeforeMessageUpdate($params)</span>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a><span class="x">    {</span>
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a><span class="x">        // Code executed before message is updated</span>
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a><span class="x">        // Код, выполняемый перед обновлением сообщения</span>
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a><span class="x">    }</span>
<a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a>
<a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a><span class="x">    public function onAfterMessageUpdate($params, $result)</span>
<a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a><span class="x">    {</span>
<a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a><span class="x">        // Code executed after message is updated</span>
<a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a><span class="x">        // Код, выполняемый после обновления сообщения</span>
<a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a><span class="x">    }</span>
<a id="__codelineno-39-33" name="__codelineno-39-33" href="#__codelineno-39-33"></a>
<a id="__codelineno-39-34" name="__codelineno-39-34" href="#__codelineno-39-34"></a><span class="x">    public function onBeforeMessageDelete($params)</span>
<a id="__codelineno-39-35" name="__codelineno-39-35" href="#__codelineno-39-35"></a><span class="x">    {</span>
<a id="__codelineno-39-36" name="__codelineno-39-36" href="#__codelineno-39-36"></a><span class="x">        // Code executed before message is deleted</span>
<a id="__codelineno-39-37" name="__codelineno-39-37" href="#__codelineno-39-37"></a><span class="x">        // Код, выполняемый перед удалением сообщения</span>
<a id="__codelineno-39-38" name="__codelineno-39-38" href="#__codelineno-39-38"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-39" name="__codelineno-39-39" href="#__codelineno-39-39"></a><span class="x">    }</span>
<a id="__codelineno-39-40" name="__codelineno-39-40" href="#__codelineno-39-40"></a>
<a id="__codelineno-39-41" name="__codelineno-39-41" href="#__codelineno-39-41"></a><span class="x">    public function onAfterMessageDelete($params, $result)</span>
<a id="__codelineno-39-42" name="__codelineno-39-42" href="#__codelineno-39-42"></a><span class="x">    {</span>
<a id="__codelineno-39-43" name="__codelineno-39-43" href="#__codelineno-39-43"></a><span class="x">        // Code executed after message is deleted</span>
<a id="__codelineno-39-44" name="__codelineno-39-44" href="#__codelineno-39-44"></a><span class="x">        // Код, выполняемый после удаления сообщения</span>
<a id="__codelineno-39-45" name="__codelineno-39-45" href="#__codelineno-39-45"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-46" name="__codelineno-39-46" href="#__codelineno-39-46"></a><span class="x">    }</span>
<a id="__codelineno-39-47" name="__codelineno-39-47" href="#__codelineno-39-47"></a>
<a id="__codelineno-39-48" name="__codelineno-39-48" href="#__codelineno-39-48"></a><span class="x">    public function onBeforeMessageRead($params)</span>
<a id="__codelineno-39-49" name="__codelineno-39-49" href="#__codelineno-39-49"></a><span class="x">    {</span>
<a id="__codelineno-39-50" name="__codelineno-39-50" href="#__codelineno-39-50"></a><span class="x">        // Code executed before message is read</span>
<a id="__codelineno-39-51" name="__codelineno-39-51" href="#__codelineno-39-51"></a><span class="x">        // Код, выполняемый перед прочтением сообщения</span>
<a id="__codelineno-39-52" name="__codelineno-39-52" href="#__codelineno-39-52"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-53" name="__codelineno-39-53" href="#__codelineno-39-53"></a><span class="x">    }</span>
<a id="__codelineno-39-54" name="__codelineno-39-54" href="#__codelineno-39-54"></a>
<a id="__codelineno-39-55" name="__codelineno-39-55" href="#__codelineno-39-55"></a><span class="x">    public function onAfterMessageRead($params, $result)</span>
<a id="__codelineno-39-56" name="__codelineno-39-56" href="#__codelineno-39-56"></a><span class="x">    {</span>
<a id="__codelineno-39-57" name="__codelineno-39-57" href="#__codelineno-39-57"></a><span class="x">        // Code executed after message is read</span>
<a id="__codelineno-39-58" name="__codelineno-39-58" href="#__codelineno-39-58"></a><span class="x">        // Код, выполняемый после прочтения сообщения</span>
<a id="__codelineno-39-59" name="__codelineno-39-59" href="#__codelineno-39-59"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-60" name="__codelineno-39-60" href="#__codelineno-39-60"></a><span class="x">    }</span>
<a id="__codelineno-39-61" name="__codelineno-39-61" href="#__codelineno-39-61"></a>
<a id="__codelineno-39-62" name="__codelineno-39-62" href="#__codelineno-39-62"></a><span class="x">    public function onBeforeMessageLike($params)</span>
<a id="__codelineno-39-63" name="__codelineno-39-63" href="#__codelineno-39-63"></a><span class="x">    {</span>
<a id="__codelineno-39-64" name="__codelineno-39-64" href="#__codelineno-39-64"></a><span class="x">        // Code executed before message is liked</span>
<a id="__codelineno-39-65" name="__codelineno-39-65" href="#__codelineno-39-65"></a><span class="x">        // Код, выполняемый перед добавлением лайка к сообщению</span>
<a id="__codelineno-39-66" name="__codelineno-39-66" href="#__codelineno-39-66"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-67" name="__codelineno-39-67" href="#__codelineno-39-67"></a><span class="x">    }</span>
<a id="__codelineno-39-68" name="__codelineno-39-68" href="#__codelineno-39-68"></a>
<a id="__codelineno-39-69" name="__codelineno-39-69" href="#__codelineno-39-69"></a><span class="x">    public function onAfterMessageLike($params, $result)</span>
<a id="__codelineno-39-70" name="__codelineno-39-70" href="#__codelineno-39-70"></a><span class="x">    {</span>
<a id="__codelineno-39-71" name="__codelineno-39-71" href="#__codelineno-39-71"></a><span class="x">        // Code executed after message is liked</span>
<a id="__codelineno-39-72" name="__codelineno-39-72" href="#__codelineno-39-72"></a><span class="x">        // Код, выполняемый после добавления лайка к сообщению</span>
<a id="__codelineno-39-73" name="__codelineno-39-73" href="#__codelineno-39-73"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-74" name="__codelineno-39-74" href="#__codelineno-39-74"></a><span class="x">    }</span>
<a id="__codelineno-39-75" name="__codelineno-39-75" href="#__codelineno-39-75"></a>
<a id="__codelineno-39-76" name="__codelineno-39-76" href="#__codelineno-39-76"></a><span class="x">    public function onBeforeMessageUnlike($params)</span>
<a id="__codelineno-39-77" name="__codelineno-39-77" href="#__codelineno-39-77"></a><span class="x">    {</span>
<a id="__codelineno-39-78" name="__codelineno-39-78" href="#__codelineno-39-78"></a><span class="x">        // Code executed before message is unliked</span>
<a id="__codelineno-39-79" name="__codelineno-39-79" href="#__codelineno-39-79"></a><span class="x">        // Код, выполняемый перед удалением лайка с сообщения</span>
<a id="__codelineno-39-80" name="__codelineno-39-80" href="#__codelineno-39-80"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-81" name="__codelineno-39-81" href="#__codelineno-39-81"></a><span class="x">    }</span>
<a id="__codelineno-39-82" name="__codelineno-39-82" href="#__codelineno-39-82"></a>
<a id="__codelineno-39-83" name="__codelineno-39-83" href="#__codelineno-39-83"></a><span class="x">    public function onAfterMessageUnlike($params, $result)</span>
<a id="__codelineno-39-84" name="__codelineno-39-84" href="#__codelineno-39-84"></a><span class="x">    {</span>
<a id="__codelineno-39-85" name="__codelineno-39-85" href="#__codelineno-39-85"></a><span class="x">        // Code executed after message is unliked</span>
<a id="__codelineno-39-86" name="__codelineno-39-86" href="#__codelineno-39-86"></a><span class="x">        // Код, выполняемый после удаления лайка с сообщения</span>
<a id="__codelineno-39-87" name="__codelineno-39-87" href="#__codelineno-39-87"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-88" name="__codelineno-39-88" href="#__codelineno-39-88"></a><span class="x">    }</span>
<a id="__codelineno-39-89" name="__codelineno-39-89" href="#__codelineno-39-89"></a><span class="x">}</span>
<a id="__codelineno-39-90" name="__codelineno-39-90" href="#__codelineno-39-90"></a>
<a id="__codelineno-39-91" name="__codelineno-39-91" href="#__codelineno-39-91"></a><span class="x">// Register handler</span>
<a id="__codelineno-39-92" name="__codelineno-39-92" href="#__codelineno-39-92"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-39-93" name="__codelineno-39-93" href="#__codelineno-39-93"></a><span class="x">\Bitrix\Im\Message\Handler::register(&#39;custom_message&#39;, CustomMessageHandler::class);</span>
<a id="__codelineno-39-94" name="__codelineno-39-94" href="#__codelineno-39-94"></a>
<a id="__codelineno-39-95" name="__codelineno-39-95" href="#__codelineno-39-95"></a><span class="x">// Legacy</span>
<a id="__codelineno-39-96" name="__codelineno-39-96" href="#__codelineno-39-96"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-39-97" name="__codelineno-39-97" href="#__codelineno-39-97"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-39-98" name="__codelineno-39-98" href="#__codelineno-39-98"></a><span class="x">class CCustomMessageHandler extends CIMMessageHandler</span>
<a id="__codelineno-39-99" name="__codelineno-39-99" href="#__codelineno-39-99"></a><span class="x">{</span>
<a id="__codelineno-39-100" name="__codelineno-39-100" href="#__codelineno-39-100"></a><span class="x">    public function OnBeforeMessageCreate($params)</span>
<a id="__codelineno-39-101" name="__codelineno-39-101" href="#__codelineno-39-101"></a><span class="x">    {</span>
<a id="__codelineno-39-102" name="__codelineno-39-102" href="#__codelineno-39-102"></a><span class="x">        // Code executed before message is created</span>
<a id="__codelineno-39-103" name="__codelineno-39-103" href="#__codelineno-39-103"></a><span class="x">        // Код, выполняемый перед созданием сообщения</span>
<a id="__codelineno-39-104" name="__codelineno-39-104" href="#__codelineno-39-104"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-105" name="__codelineno-39-105" href="#__codelineno-39-105"></a><span class="x">    }</span>
<a id="__codelineno-39-106" name="__codelineno-39-106" href="#__codelineno-39-106"></a>
<a id="__codelineno-39-107" name="__codelineno-39-107" href="#__codelineno-39-107"></a><span class="x">    public function OnAfterMessageCreate($params, $result)</span>
<a id="__codelineno-39-108" name="__codelineno-39-108" href="#__codelineno-39-108"></a><span class="x">    {</span>
<a id="__codelineno-39-109" name="__codelineno-39-109" href="#__codelineno-39-109"></a><span class="x">        // Code executed after message is created</span>
<a id="__codelineno-39-110" name="__codelineno-39-110" href="#__codelineno-39-110"></a><span class="x">        // Код, выполняемый после создания сообщения</span>
<a id="__codelineno-39-111" name="__codelineno-39-111" href="#__codelineno-39-111"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-112" name="__codelineno-39-112" href="#__codelineno-39-112"></a><span class="x">    }</span>
<a id="__codelineno-39-113" name="__codelineno-39-113" href="#__codelineno-39-113"></a>
<a id="__codelineno-39-114" name="__codelineno-39-114" href="#__codelineno-39-114"></a><span class="x">    public function OnBeforeMessageUpdate($params)</span>
<a id="__codelineno-39-115" name="__codelineno-39-115" href="#__codelineno-39-115"></a><span class="x">    {</span>
<a id="__codelineno-39-116" name="__codelineno-39-116" href="#__codelineno-39-116"></a><span class="x">        // Code executed before message is updated</span>
<a id="__codelineno-39-117" name="__codelineno-39-117" href="#__codelineno-39-117"></a><span class="x">        // Код, выполняемый перед обновлением сообщения</span>
<a id="__codelineno-39-118" name="__codelineno-39-118" href="#__codelineno-39-118"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-119" name="__codelineno-39-119" href="#__codelineno-39-119"></a><span class="x">    }</span>
<a id="__codelineno-39-120" name="__codelineno-39-120" href="#__codelineno-39-120"></a>
<a id="__codelineno-39-121" name="__codelineno-39-121" href="#__codelineno-39-121"></a><span class="x">    public function OnAfterMessageUpdate($params, $result)</span>
<a id="__codelineno-39-122" name="__codelineno-39-122" href="#__codelineno-39-122"></a><span class="x">    {</span>
<a id="__codelineno-39-123" name="__codelineno-39-123" href="#__codelineno-39-123"></a><span class="x">        // Code executed after message is updated</span>
<a id="__codelineno-39-124" name="__codelineno-39-124" href="#__codelineno-39-124"></a><span class="x">        // Код, выполняемый после обновления сообщения</span>
<a id="__codelineno-39-125" name="__codelineno-39-125" href="#__codelineno-39-125"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-126" name="__codelineno-39-126" href="#__codelineno-39-126"></a><span class="x">    }</span>
<a id="__codelineno-39-127" name="__codelineno-39-127" href="#__codelineno-39-127"></a>
<a id="__codelineno-39-128" name="__codelineno-39-128" href="#__codelineno-39-128"></a><span class="x">    public function OnBeforeMessageDelete($params)</span>
<a id="__codelineno-39-129" name="__codelineno-39-129" href="#__codelineno-39-129"></a><span class="x">    {</span>
<a id="__codelineno-39-130" name="__codelineno-39-130" href="#__codelineno-39-130"></a><span class="x">        // Code executed before message is deleted</span>
<a id="__codelineno-39-131" name="__codelineno-39-131" href="#__codelineno-39-131"></a><span class="x">        // Код, выполняемый перед удалением сообщения</span>
<a id="__codelineno-39-132" name="__codelineno-39-132" href="#__codelineno-39-132"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-133" name="__codelineno-39-133" href="#__codelineno-39-133"></a><span class="x">    }</span>
<a id="__codelineno-39-134" name="__codelineno-39-134" href="#__codelineno-39-134"></a>
<a id="__codelineno-39-135" name="__codelineno-39-135" href="#__codelineno-39-135"></a><span class="x">    public function OnAfterMessageDelete($params, $result)</span>
<a id="__codelineno-39-136" name="__codelineno-39-136" href="#__codelineno-39-136"></a><span class="x">    {</span>
<a id="__codelineno-39-137" name="__codelineno-39-137" href="#__codelineno-39-137"></a><span class="x">        // Code executed after message is deleted</span>
<a id="__codelineno-39-138" name="__codelineno-39-138" href="#__codelineno-39-138"></a><span class="x">        // Код, выполняемый после удаления сообщения</span>
<a id="__codelineno-39-139" name="__codelineno-39-139" href="#__codelineno-39-139"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-140" name="__codelineno-39-140" href="#__codelineno-39-140"></a><span class="x">    }</span>
<a id="__codelineno-39-141" name="__codelineno-39-141" href="#__codelineno-39-141"></a>
<a id="__codelineno-39-142" name="__codelineno-39-142" href="#__codelineno-39-142"></a><span class="x">    public function OnBeforeMessageRead($params)</span>
<a id="__codelineno-39-143" name="__codelineno-39-143" href="#__codelineno-39-143"></a><span class="x">    {</span>
<a id="__codelineno-39-144" name="__codelineno-39-144" href="#__codelineno-39-144"></a><span class="x">        // Code executed before message is read</span>
<a id="__codelineno-39-145" name="__codelineno-39-145" href="#__codelineno-39-145"></a><span class="x">        // Код, выполняемый перед прочтением сообщения</span>
<a id="__codelineno-39-146" name="__codelineno-39-146" href="#__codelineno-39-146"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-147" name="__codelineno-39-147" href="#__codelineno-39-147"></a><span class="x">    }</span>
<a id="__codelineno-39-148" name="__codelineno-39-148" href="#__codelineno-39-148"></a>
<a id="__codelineno-39-149" name="__codelineno-39-149" href="#__codelineno-39-149"></a><span class="x">    public function OnAfterMessageRead($params, $result)</span>
<a id="__codelineno-39-150" name="__codelineno-39-150" href="#__codelineno-39-150"></a><span class="x">    {</span>
<a id="__codelineno-39-151" name="__codelineno-39-151" href="#__codelineno-39-151"></a><span class="x">        // Code executed after message is read</span>
<a id="__codelineno-39-152" name="__codelineno-39-152" href="#__codelineno-39-152"></a><span class="x">        // Код, выполняемый после прочтения сообщения</span>
<a id="__codelineno-39-153" name="__codelineno-39-153" href="#__codelineno-39-153"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-154" name="__codelineno-39-154" href="#__codelineno-39-154"></a><span class="x">    }</span>
<a id="__codelineno-39-155" name="__codelineno-39-155" href="#__codelineno-39-155"></a>
<a id="__codelineno-39-156" name="__codelineno-39-156" href="#__codelineno-39-156"></a><span class="x">    public function OnBeforeMessageLike($params)</span>
<a id="__codelineno-39-157" name="__codelineno-39-157" href="#__codelineno-39-157"></a><span class="x">    {</span>
<a id="__codelineno-39-158" name="__codelineno-39-158" href="#__codelineno-39-158"></a><span class="x">        // Code executed before message is liked</span>
<a id="__codelineno-39-159" name="__codelineno-39-159" href="#__codelineno-39-159"></a><span class="x">        // Код, выполняемый перед добавлением лайка к сообщению</span>
<a id="__codelineno-39-160" name="__codelineno-39-160" href="#__codelineno-39-160"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-161" name="__codelineno-39-161" href="#__codelineno-39-161"></a><span class="x">    }</span>
<a id="__codelineno-39-162" name="__codelineno-39-162" href="#__codelineno-39-162"></a>
<a id="__codelineno-39-163" name="__codelineno-39-163" href="#__codelineno-39-163"></a><span class="x">    public function OnAfterMessageLike($params, $result)</span>
<a id="__codelineno-39-164" name="__codelineno-39-164" href="#__codelineno-39-164"></a><span class="x">    {</span>
<a id="__codelineno-39-165" name="__codelineno-39-165" href="#__codelineno-39-165"></a><span class="x">        // Code executed after message is liked</span>
<a id="__codelineno-39-166" name="__codelineno-39-166" href="#__codelineno-39-166"></a><span class="x">        // Код, выполняемый после добавления лайка к сообщению</span>
<a id="__codelineno-39-167" name="__codelineno-39-167" href="#__codelineno-39-167"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-168" name="__codelineno-39-168" href="#__codelineno-39-168"></a><span class="x">    }</span>
<a id="__codelineno-39-169" name="__codelineno-39-169" href="#__codelineno-39-169"></a>
<a id="__codelineno-39-170" name="__codelineno-39-170" href="#__codelineno-39-170"></a><span class="x">    public function OnBeforeMessageUnlike($params)</span>
<a id="__codelineno-39-171" name="__codelineno-39-171" href="#__codelineno-39-171"></a><span class="x">    {</span>
<a id="__codelineno-39-172" name="__codelineno-39-172" href="#__codelineno-39-172"></a><span class="x">        // Code executed before message is unliked</span>
<a id="__codelineno-39-173" name="__codelineno-39-173" href="#__codelineno-39-173"></a><span class="x">        // Код, выполняемый перед удалением лайка с сообщения</span>
<a id="__codelineno-39-174" name="__codelineno-39-174" href="#__codelineno-39-174"></a><span class="x">        return $params;</span>
<a id="__codelineno-39-175" name="__codelineno-39-175" href="#__codelineno-39-175"></a><span class="x">    }</span>
<a id="__codelineno-39-176" name="__codelineno-39-176" href="#__codelineno-39-176"></a>
<a id="__codelineno-39-177" name="__codelineno-39-177" href="#__codelineno-39-177"></a><span class="x">    public function OnAfterMessageUnlike($params, $result)</span>
<a id="__codelineno-39-178" name="__codelineno-39-178" href="#__codelineno-39-178"></a><span class="x">    {</span>
<a id="__codelineno-39-179" name="__codelineno-39-179" href="#__codelineno-39-179"></a><span class="x">        // Code executed after message is unliked</span>
<a id="__codelineno-39-180" name="__codelineno-39-180" href="#__codelineno-39-180"></a><span class="x">        // Код, выполняемый после удаления лайка с сообщения</span>
<a id="__codelineno-39-181" name="__codelineno-39-181" href="#__codelineno-39-181"></a><span class="x">        return $result;</span>
<a id="__codelineno-39-182" name="__codelineno-39-182" href="#__codelineno-39-182"></a><span class="x">    }</span>
<a id="__codelineno-39-183" name="__codelineno-39-183" href="#__codelineno-39-183"></a><span class="x">}</span>
<a id="__codelineno-39-184" name="__codelineno-39-184" href="#__codelineno-39-184"></a>
<a id="__codelineno-39-185" name="__codelineno-39-185" href="#__codelineno-39-185"></a><span class="x">// Register handler</span>
<a id="__codelineno-39-186" name="__codelineno-39-186" href="#__codelineno-39-186"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-39-187" name="__codelineno-39-187" href="#__codelineno-39-187"></a><span class="x">CIMMessageHandler::Register(&#39;custom_message&#39;, &#39;CCustomMessageHandler&#39;);</span>
</code></pre></div>
<h3 id="chat-handlers">Chat Handlers | Обработчики чатов<a class="headerlink" href="#chat-handlers" title="Permanent link">&para;</a></h3>
<h4 id="chat-handler">Chat Handler | Обработчик чата<a class="headerlink" href="#chat-handler" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="x">// D7</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="x">class CustomChatHandler extends \Bitrix\Im\Chat\Handler</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="x">{</span>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="x">    public function onBeforeChatCreate($params)</span>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="x">    {</span>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="x">        // Code executed before chat is created</span>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="x">        // Код, выполняемый перед созданием чата</span>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="x">    }</span>
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a>
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a><span class="x">    public function onAfterChatCreate($params, $result)</span>
<a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="x">    {</span>
<a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a><span class="x">        // Code executed after chat is created</span>
<a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a><span class="x">        // Код, выполняемый после создания чата</span>
<a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a><span class="x">    }</span>
<a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a>
<a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a><span class="x">    public function onBeforeChatUpdate($params)</span>
<a id="__codelineno-40-21" name="__codelineno-40-21" href="#__codelineno-40-21"></a><span class="x">    {</span>
<a id="__codelineno-40-22" name="__codelineno-40-22" href="#__codelineno-40-22"></a><span class="x">        // Code executed before chat is updated</span>
<a id="__codelineno-40-23" name="__codelineno-40-23" href="#__codelineno-40-23"></a><span class="x">        // Код, выполняемый перед обновлением чата</span>
<a id="__codelineno-40-24" name="__codelineno-40-24" href="#__codelineno-40-24"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-25" name="__codelineno-40-25" href="#__codelineno-40-25"></a><span class="x">    }</span>
<a id="__codelineno-40-26" name="__codelineno-40-26" href="#__codelineno-40-26"></a>
<a id="__codelineno-40-27" name="__codelineno-40-27" href="#__codelineno-40-27"></a><span class="x">    public function onAfterChatUpdate($params, $result)</span>
<a id="__codelineno-40-28" name="__codelineno-40-28" href="#__codelineno-40-28"></a><span class="x">    {</span>
<a id="__codelineno-40-29" name="__codelineno-40-29" href="#__codelineno-40-29"></a><span class="x">        // Code executed after chat is updated</span>
<a id="__codelineno-40-30" name="__codelineno-40-30" href="#__codelineno-40-30"></a><span class="x">        // Код, выполняемый после обновления чата</span>
<a id="__codelineno-40-31" name="__codelineno-40-31" href="#__codelineno-40-31"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-32" name="__codelineno-40-32" href="#__codelineno-40-32"></a><span class="x">    }</span>
<a id="__codelineno-40-33" name="__codelineno-40-33" href="#__codelineno-40-33"></a>
<a id="__codelineno-40-34" name="__codelineno-40-34" href="#__codelineno-40-34"></a><span class="x">    public function onBeforeChatDelete($params)</span>
<a id="__codelineno-40-35" name="__codelineno-40-35" href="#__codelineno-40-35"></a><span class="x">    {</span>
<a id="__codelineno-40-36" name="__codelineno-40-36" href="#__codelineno-40-36"></a><span class="x">        // Code executed before chat is deleted</span>
<a id="__codelineno-40-37" name="__codelineno-40-37" href="#__codelineno-40-37"></a><span class="x">        // Код, выполняемый перед удалением чата</span>
<a id="__codelineno-40-38" name="__codelineno-40-38" href="#__codelineno-40-38"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-39" name="__codelineno-40-39" href="#__codelineno-40-39"></a><span class="x">    }</span>
<a id="__codelineno-40-40" name="__codelineno-40-40" href="#__codelineno-40-40"></a>
<a id="__codelineno-40-41" name="__codelineno-40-41" href="#__codelineno-40-41"></a><span class="x">    public function onAfterChatDelete($params, $result)</span>
<a id="__codelineno-40-42" name="__codelineno-40-42" href="#__codelineno-40-42"></a><span class="x">    {</span>
<a id="__codelineno-40-43" name="__codelineno-40-43" href="#__codelineno-40-43"></a><span class="x">        // Code executed after chat is deleted</span>
<a id="__codelineno-40-44" name="__codelineno-40-44" href="#__codelineno-40-44"></a><span class="x">        // Код, выполняемый после удаления чата</span>
<a id="__codelineno-40-45" name="__codelineno-40-45" href="#__codelineno-40-45"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-46" name="__codelineno-40-46" href="#__codelineno-40-46"></a><span class="x">    }</span>
<a id="__codelineno-40-47" name="__codelineno-40-47" href="#__codelineno-40-47"></a>
<a id="__codelineno-40-48" name="__codelineno-40-48" href="#__codelineno-40-48"></a><span class="x">    public function onBeforeChatJoin($params)</span>
<a id="__codelineno-40-49" name="__codelineno-40-49" href="#__codelineno-40-49"></a><span class="x">    {</span>
<a id="__codelineno-40-50" name="__codelineno-40-50" href="#__codelineno-40-50"></a><span class="x">        // Code executed before user joins chat</span>
<a id="__codelineno-40-51" name="__codelineno-40-51" href="#__codelineno-40-51"></a><span class="x">        // Код, выполняемый перед присоединением пользователя к чату</span>
<a id="__codelineno-40-52" name="__codelineno-40-52" href="#__codelineno-40-52"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-53" name="__codelineno-40-53" href="#__codelineno-40-53"></a><span class="x">    }</span>
<a id="__codelineno-40-54" name="__codelineno-40-54" href="#__codelineno-40-54"></a>
<a id="__codelineno-40-55" name="__codelineno-40-55" href="#__codelineno-40-55"></a><span class="x">    public function onAfterChatJoin($params, $result)</span>
<a id="__codelineno-40-56" name="__codelineno-40-56" href="#__codelineno-40-56"></a><span class="x">    {</span>
<a id="__codelineno-40-57" name="__codelineno-40-57" href="#__codelineno-40-57"></a><span class="x">        // Code executed after user joins chat</span>
<a id="__codelineno-40-58" name="__codelineno-40-58" href="#__codelineno-40-58"></a><span class="x">        // Код, выполняемый после присоединения пользователя к чату</span>
<a id="__codelineno-40-59" name="__codelineno-40-59" href="#__codelineno-40-59"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-60" name="__codelineno-40-60" href="#__codelineno-40-60"></a><span class="x">    }</span>
<a id="__codelineno-40-61" name="__codelineno-40-61" href="#__codelineno-40-61"></a>
<a id="__codelineno-40-62" name="__codelineno-40-62" href="#__codelineno-40-62"></a><span class="x">    public function onBeforeChatLeave($params)</span>
<a id="__codelineno-40-63" name="__codelineno-40-63" href="#__codelineno-40-63"></a><span class="x">    {</span>
<a id="__codelineno-40-64" name="__codelineno-40-64" href="#__codelineno-40-64"></a><span class="x">        // Code executed before user leaves chat</span>
<a id="__codelineno-40-65" name="__codelineno-40-65" href="#__codelineno-40-65"></a><span class="x">        // Код, выполняемый перед выходом пользователя из чата</span>
<a id="__codelineno-40-66" name="__codelineno-40-66" href="#__codelineno-40-66"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-67" name="__codelineno-40-67" href="#__codelineno-40-67"></a><span class="x">    }</span>
<a id="__codelineno-40-68" name="__codelineno-40-68" href="#__codelineno-40-68"></a>
<a id="__codelineno-40-69" name="__codelineno-40-69" href="#__codelineno-40-69"></a><span class="x">    public function onAfterChatLeave($params, $result)</span>
<a id="__codelineno-40-70" name="__codelineno-40-70" href="#__codelineno-40-70"></a><span class="x">    {</span>
<a id="__codelineno-40-71" name="__codelineno-40-71" href="#__codelineno-40-71"></a><span class="x">        // Code executed after user leaves chat</span>
<a id="__codelineno-40-72" name="__codelineno-40-72" href="#__codelineno-40-72"></a><span class="x">        // Код, выполняемый после выхода пользователя из чата</span>
<a id="__codelineno-40-73" name="__codelineno-40-73" href="#__codelineno-40-73"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-74" name="__codelineno-40-74" href="#__codelineno-40-74"></a><span class="x">    }</span>
<a id="__codelineno-40-75" name="__codelineno-40-75" href="#__codelineno-40-75"></a>
<a id="__codelineno-40-76" name="__codelineno-40-76" href="#__codelineno-40-76"></a><span class="x">    public function onBeforeChatInvite($params)</span>
<a id="__codelineno-40-77" name="__codelineno-40-77" href="#__codelineno-40-77"></a><span class="x">    {</span>
<a id="__codelineno-40-78" name="__codelineno-40-78" href="#__codelineno-40-78"></a><span class="x">        // Code executed before user is invited to chat</span>
<a id="__codelineno-40-79" name="__codelineno-40-79" href="#__codelineno-40-79"></a><span class="x">        // Код, выполняемый перед приглашением пользователя в чат</span>
<a id="__codelineno-40-80" name="__codelineno-40-80" href="#__codelineno-40-80"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-81" name="__codelineno-40-81" href="#__codelineno-40-81"></a><span class="x">    }</span>
<a id="__codelineno-40-82" name="__codelineno-40-82" href="#__codelineno-40-82"></a>
<a id="__codelineno-40-83" name="__codelineno-40-83" href="#__codelineno-40-83"></a><span class="x">    public function onAfterChatInvite($params, $result)</span>
<a id="__codelineno-40-84" name="__codelineno-40-84" href="#__codelineno-40-84"></a><span class="x">    {</span>
<a id="__codelineno-40-85" name="__codelineno-40-85" href="#__codelineno-40-85"></a><span class="x">        // Code executed after user is invited to chat</span>
<a id="__codelineno-40-86" name="__codelineno-40-86" href="#__codelineno-40-86"></a><span class="x">        // Код, выполняемый после приглашения пользователя в чат</span>
<a id="__codelineno-40-87" name="__codelineno-40-87" href="#__codelineno-40-87"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-88" name="__codelineno-40-88" href="#__codelineno-40-88"></a><span class="x">    }</span>
<a id="__codelineno-40-89" name="__codelineno-40-89" href="#__codelineno-40-89"></a>
<a id="__codelineno-40-90" name="__codelineno-40-90" href="#__codelineno-40-90"></a><span class="x">    public function onBeforeChatKick($params)</span>
<a id="__codelineno-40-91" name="__codelineno-40-91" href="#__codelineno-40-91"></a><span class="x">    {</span>
<a id="__codelineno-40-92" name="__codelineno-40-92" href="#__codelineno-40-92"></a><span class="x">        // Code executed before user is kicked from chat</span>
<a id="__codelineno-40-93" name="__codelineno-40-93" href="#__codelineno-40-93"></a><span class="x">        // Код, выполняемый перед исключением пользователя из чата</span>
<a id="__codelineno-40-94" name="__codelineno-40-94" href="#__codelineno-40-94"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-95" name="__codelineno-40-95" href="#__codelineno-40-95"></a><span class="x">    }</span>
<a id="__codelineno-40-96" name="__codelineno-40-96" href="#__codelineno-40-96"></a>
<a id="__codelineno-40-97" name="__codelineno-40-97" href="#__codelineno-40-97"></a><span class="x">    public function onAfterChatKick($params, $result)</span>
<a id="__codelineno-40-98" name="__codelineno-40-98" href="#__codelineno-40-98"></a><span class="x">    {</span>
<a id="__codelineno-40-99" name="__codelineno-40-99" href="#__codelineno-40-99"></a><span class="x">        // Code executed after user is kicked from chat</span>
<a id="__codelineno-40-100" name="__codelineno-40-100" href="#__codelineno-40-100"></a><span class="x">        // Код, выполняемый после исключения пользователя из чата</span>
<a id="__codelineno-40-101" name="__codelineno-40-101" href="#__codelineno-40-101"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-102" name="__codelineno-40-102" href="#__codelineno-40-102"></a><span class="x">    }</span>
<a id="__codelineno-40-103" name="__codelineno-40-103" href="#__codelineno-40-103"></a>
<a id="__codelineno-40-104" name="__codelineno-40-104" href="#__codelineno-40-104"></a><span class="x">    public function onBeforeChatMute($params)</span>
<a id="__codelineno-40-105" name="__codelineno-40-105" href="#__codelineno-40-105"></a><span class="x">    {</span>
<a id="__codelineno-40-106" name="__codelineno-40-106" href="#__codelineno-40-106"></a><span class="x">        // Code executed before chat is muted</span>
<a id="__codelineno-40-107" name="__codelineno-40-107" href="#__codelineno-40-107"></a><span class="x">        // Код, выполняемый перед отключением уведомлений чата</span>
<a id="__codelineno-40-108" name="__codelineno-40-108" href="#__codelineno-40-108"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-109" name="__codelineno-40-109" href="#__codelineno-40-109"></a><span class="x">    }</span>
<a id="__codelineno-40-110" name="__codelineno-40-110" href="#__codelineno-40-110"></a>
<a id="__codelineno-40-111" name="__codelineno-40-111" href="#__codelineno-40-111"></a><span class="x">    public function onAfterChatMute($params, $result)</span>
<a id="__codelineno-40-112" name="__codelineno-40-112" href="#__codelineno-40-112"></a><span class="x">    {</span>
<a id="__codelineno-40-113" name="__codelineno-40-113" href="#__codelineno-40-113"></a><span class="x">        // Code executed after chat is muted</span>
<a id="__codelineno-40-114" name="__codelineno-40-114" href="#__codelineno-40-114"></a><span class="x">        // Код, выполняемый после отключения уведомлений чата</span>
<a id="__codelineno-40-115" name="__codelineno-40-115" href="#__codelineno-40-115"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-116" name="__codelineno-40-116" href="#__codelineno-40-116"></a><span class="x">    }</span>
<a id="__codelineno-40-117" name="__codelineno-40-117" href="#__codelineno-40-117"></a>
<a id="__codelineno-40-118" name="__codelineno-40-118" href="#__codelineno-40-118"></a><span class="x">    public function onBeforeChatUnmute($params)</span>
<a id="__codelineno-40-119" name="__codelineno-40-119" href="#__codelineno-40-119"></a><span class="x">    {</span>
<a id="__codelineno-40-120" name="__codelineno-40-120" href="#__codelineno-40-120"></a><span class="x">        // Code executed before chat is unmuted</span>
<a id="__codelineno-40-121" name="__codelineno-40-121" href="#__codelineno-40-121"></a><span class="x">        // Код, выполняемый перед включением уведомлений чата</span>
<a id="__codelineno-40-122" name="__codelineno-40-122" href="#__codelineno-40-122"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-123" name="__codelineno-40-123" href="#__codelineno-40-123"></a><span class="x">    }</span>
<a id="__codelineno-40-124" name="__codelineno-40-124" href="#__codelineno-40-124"></a>
<a id="__codelineno-40-125" name="__codelineno-40-125" href="#__codelineno-40-125"></a><span class="x">    public function onAfterChatUnmute($params, $result)</span>
<a id="__codelineno-40-126" name="__codelineno-40-126" href="#__codelineno-40-126"></a><span class="x">    {</span>
<a id="__codelineno-40-127" name="__codelineno-40-127" href="#__codelineno-40-127"></a><span class="x">        // Code executed after chat is unmuted</span>
<a id="__codelineno-40-128" name="__codelineno-40-128" href="#__codelineno-40-128"></a><span class="x">        // Код, выполняемый после включения уведомлений чата</span>
<a id="__codelineno-40-129" name="__codelineno-40-129" href="#__codelineno-40-129"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-130" name="__codelineno-40-130" href="#__codelineno-40-130"></a><span class="x">    }</span>
<a id="__codelineno-40-131" name="__codelineno-40-131" href="#__codelineno-40-131"></a><span class="x">}</span>
<a id="__codelineno-40-132" name="__codelineno-40-132" href="#__codelineno-40-132"></a>
<a id="__codelineno-40-133" name="__codelineno-40-133" href="#__codelineno-40-133"></a><span class="x">// Register handler</span>
<a id="__codelineno-40-134" name="__codelineno-40-134" href="#__codelineno-40-134"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-40-135" name="__codelineno-40-135" href="#__codelineno-40-135"></a><span class="x">\Bitrix\Im\Chat\Handler::register(&#39;custom_chat&#39;, CustomChatHandler::class);</span>
<a id="__codelineno-40-136" name="__codelineno-40-136" href="#__codelineno-40-136"></a>
<a id="__codelineno-40-137" name="__codelineno-40-137" href="#__codelineno-40-137"></a><span class="x">// Legacy</span>
<a id="__codelineno-40-138" name="__codelineno-40-138" href="#__codelineno-40-138"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-40-139" name="__codelineno-40-139" href="#__codelineno-40-139"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-40-140" name="__codelineno-40-140" href="#__codelineno-40-140"></a><span class="x">class CCustomChatHandler extends CIMChatHandler</span>
<a id="__codelineno-40-141" name="__codelineno-40-141" href="#__codelineno-40-141"></a><span class="x">{</span>
<a id="__codelineno-40-142" name="__codelineno-40-142" href="#__codelineno-40-142"></a><span class="x">    public function OnBeforeChatCreate($params)</span>
<a id="__codelineno-40-143" name="__codelineno-40-143" href="#__codelineno-40-143"></a><span class="x">    {</span>
<a id="__codelineno-40-144" name="__codelineno-40-144" href="#__codelineno-40-144"></a><span class="x">        // Code executed before chat is created</span>
<a id="__codelineno-40-145" name="__codelineno-40-145" href="#__codelineno-40-145"></a><span class="x">        // Код, выполняемый перед созданием чата</span>
<a id="__codelineno-40-146" name="__codelineno-40-146" href="#__codelineno-40-146"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-147" name="__codelineno-40-147" href="#__codelineno-40-147"></a><span class="x">    }</span>
<a id="__codelineno-40-148" name="__codelineno-40-148" href="#__codelineno-40-148"></a>
<a id="__codelineno-40-149" name="__codelineno-40-149" href="#__codelineno-40-149"></a><span class="x">    public function OnAfterChatCreate($params, $result)</span>
<a id="__codelineno-40-150" name="__codelineno-40-150" href="#__codelineno-40-150"></a><span class="x">    {</span>
<a id="__codelineno-40-151" name="__codelineno-40-151" href="#__codelineno-40-151"></a><span class="x">        // Code executed after chat is created</span>
<a id="__codelineno-40-152" name="__codelineno-40-152" href="#__codelineno-40-152"></a><span class="x">        // Код, выполняемый после создания чата</span>
<a id="__codelineno-40-153" name="__codelineno-40-153" href="#__codelineno-40-153"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-154" name="__codelineno-40-154" href="#__codelineno-40-154"></a><span class="x">    }</span>
<a id="__codelineno-40-155" name="__codelineno-40-155" href="#__codelineno-40-155"></a>
<a id="__codelineno-40-156" name="__codelineno-40-156" href="#__codelineno-40-156"></a><span class="x">    public function OnBeforeChatUpdate($params)</span>
<a id="__codelineno-40-157" name="__codelineno-40-157" href="#__codelineno-40-157"></a><span class="x">    {</span>
<a id="__codelineno-40-158" name="__codelineno-40-158" href="#__codelineno-40-158"></a><span class="x">        // Code executed before chat is updated</span>
<a id="__codelineno-40-159" name="__codelineno-40-159" href="#__codelineno-40-159"></a><span class="x">        // Код, выполняемый перед обновлением чата</span>
<a id="__codelineno-40-160" name="__codelineno-40-160" href="#__codelineno-40-160"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-161" name="__codelineno-40-161" href="#__codelineno-40-161"></a><span class="x">    }</span>
<a id="__codelineno-40-162" name="__codelineno-40-162" href="#__codelineno-40-162"></a>
<a id="__codelineno-40-163" name="__codelineno-40-163" href="#__codelineno-40-163"></a><span class="x">    public function OnAfterChatUpdate($params, $result)</span>
<a id="__codelineno-40-164" name="__codelineno-40-164" href="#__codelineno-40-164"></a><span class="x">    {</span>
<a id="__codelineno-40-165" name="__codelineno-40-165" href="#__codelineno-40-165"></a><span class="x">        // Code executed after chat is updated</span>
<a id="__codelineno-40-166" name="__codelineno-40-166" href="#__codelineno-40-166"></a><span class="x">        // Код, выполняемый после обновления чата</span>
<a id="__codelineno-40-167" name="__codelineno-40-167" href="#__codelineno-40-167"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-168" name="__codelineno-40-168" href="#__codelineno-40-168"></a><span class="x">    }</span>
<a id="__codelineno-40-169" name="__codelineno-40-169" href="#__codelineno-40-169"></a>
<a id="__codelineno-40-170" name="__codelineno-40-170" href="#__codelineno-40-170"></a><span class="x">    public function OnBeforeChatDelete($params)</span>
<a id="__codelineno-40-171" name="__codelineno-40-171" href="#__codelineno-40-171"></a><span class="x">    {</span>
<a id="__codelineno-40-172" name="__codelineno-40-172" href="#__codelineno-40-172"></a><span class="x">        // Code executed before chat is deleted</span>
<a id="__codelineno-40-173" name="__codelineno-40-173" href="#__codelineno-40-173"></a><span class="x">        // Код, выполняемый перед удалением чата</span>
<a id="__codelineno-40-174" name="__codelineno-40-174" href="#__codelineno-40-174"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-175" name="__codelineno-40-175" href="#__codelineno-40-175"></a><span class="x">    }</span>
<a id="__codelineno-40-176" name="__codelineno-40-176" href="#__codelineno-40-176"></a>
<a id="__codelineno-40-177" name="__codelineno-40-177" href="#__codelineno-40-177"></a><span class="x">    public function OnAfterChatDelete($params, $result)</span>
<a id="__codelineno-40-178" name="__codelineno-40-178" href="#__codelineno-40-178"></a><span class="x">    {</span>
<a id="__codelineno-40-179" name="__codelineno-40-179" href="#__codelineno-40-179"></a><span class="x">        // Code executed after chat is deleted</span>
<a id="__codelineno-40-180" name="__codelineno-40-180" href="#__codelineno-40-180"></a><span class="x">        // Код, выполняемый после удаления чата</span>
<a id="__codelineno-40-181" name="__codelineno-40-181" href="#__codelineno-40-181"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-182" name="__codelineno-40-182" href="#__codelineno-40-182"></a><span class="x">    }</span>
<a id="__codelineno-40-183" name="__codelineno-40-183" href="#__codelineno-40-183"></a>
<a id="__codelineno-40-184" name="__codelineno-40-184" href="#__codelineno-40-184"></a><span class="x">    public function OnBeforeChatJoin($params)</span>
<a id="__codelineno-40-185" name="__codelineno-40-185" href="#__codelineno-40-185"></a><span class="x">    {</span>
<a id="__codelineno-40-186" name="__codelineno-40-186" href="#__codelineno-40-186"></a><span class="x">        // Code executed before user joins chat</span>
<a id="__codelineno-40-187" name="__codelineno-40-187" href="#__codelineno-40-187"></a><span class="x">        // Код, выполняемый перед присоединением пользователя к чату</span>
<a id="__codelineno-40-188" name="__codelineno-40-188" href="#__codelineno-40-188"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-189" name="__codelineno-40-189" href="#__codelineno-40-189"></a><span class="x">    }</span>
<a id="__codelineno-40-190" name="__codelineno-40-190" href="#__codelineno-40-190"></a>
<a id="__codelineno-40-191" name="__codelineno-40-191" href="#__codelineno-40-191"></a><span class="x">    public function OnAfterChatJoin($params, $result)</span>
<a id="__codelineno-40-192" name="__codelineno-40-192" href="#__codelineno-40-192"></a><span class="x">    {</span>
<a id="__codelineno-40-193" name="__codelineno-40-193" href="#__codelineno-40-193"></a><span class="x">        // Code executed after user joins chat</span>
<a id="__codelineno-40-194" name="__codelineno-40-194" href="#__codelineno-40-194"></a><span class="x">        // Код, выполняемый после присоединения пользователя к чату</span>
<a id="__codelineno-40-195" name="__codelineno-40-195" href="#__codelineno-40-195"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-196" name="__codelineno-40-196" href="#__codelineno-40-196"></a><span class="x">    }</span>
<a id="__codelineno-40-197" name="__codelineno-40-197" href="#__codelineno-40-197"></a>
<a id="__codelineno-40-198" name="__codelineno-40-198" href="#__codelineno-40-198"></a><span class="x">    public function OnBeforeChatLeave($params)</span>
<a id="__codelineno-40-199" name="__codelineno-40-199" href="#__codelineno-40-199"></a><span class="x">    {</span>
<a id="__codelineno-40-200" name="__codelineno-40-200" href="#__codelineno-40-200"></a><span class="x">        // Code executed before user leaves chat</span>
<a id="__codelineno-40-201" name="__codelineno-40-201" href="#__codelineno-40-201"></a><span class="x">        // Код, выполняемый перед выходом пользователя из чата</span>
<a id="__codelineno-40-202" name="__codelineno-40-202" href="#__codelineno-40-202"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-203" name="__codelineno-40-203" href="#__codelineno-40-203"></a><span class="x">    }</span>
<a id="__codelineno-40-204" name="__codelineno-40-204" href="#__codelineno-40-204"></a>
<a id="__codelineno-40-205" name="__codelineno-40-205" href="#__codelineno-40-205"></a><span class="x">    public function OnAfterChatLeave($params, $result)</span>
<a id="__codelineno-40-206" name="__codelineno-40-206" href="#__codelineno-40-206"></a><span class="x">    {</span>
<a id="__codelineno-40-207" name="__codelineno-40-207" href="#__codelineno-40-207"></a><span class="x">        // Code executed after user leaves chat</span>
<a id="__codelineno-40-208" name="__codelineno-40-208" href="#__codelineno-40-208"></a><span class="x">        // Код, выполняемый после выхода пользователя из чата</span>
<a id="__codelineno-40-209" name="__codelineno-40-209" href="#__codelineno-40-209"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-210" name="__codelineno-40-210" href="#__codelineno-40-210"></a><span class="x">    }</span>
<a id="__codelineno-40-211" name="__codelineno-40-211" href="#__codelineno-40-211"></a>
<a id="__codelineno-40-212" name="__codelineno-40-212" href="#__codelineno-40-212"></a><span class="x">    public function OnBeforeChatInvite($params)</span>
<a id="__codelineno-40-213" name="__codelineno-40-213" href="#__codelineno-40-213"></a><span class="x">    {</span>
<a id="__codelineno-40-214" name="__codelineno-40-214" href="#__codelineno-40-214"></a><span class="x">        // Code executed before user is invited to chat</span>
<a id="__codelineno-40-215" name="__codelineno-40-215" href="#__codelineno-40-215"></a><span class="x">        // Код, выполняемый перед приглашением пользователя в чат</span>
<a id="__codelineno-40-216" name="__codelineno-40-216" href="#__codelineno-40-216"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-217" name="__codelineno-40-217" href="#__codelineno-40-217"></a><span class="x">    }</span>
<a id="__codelineno-40-218" name="__codelineno-40-218" href="#__codelineno-40-218"></a>
<a id="__codelineno-40-219" name="__codelineno-40-219" href="#__codelineno-40-219"></a><span class="x">    public function OnAfterChatInvite($params, $result)</span>
<a id="__codelineno-40-220" name="__codelineno-40-220" href="#__codelineno-40-220"></a><span class="x">    {</span>
<a id="__codelineno-40-221" name="__codelineno-40-221" href="#__codelineno-40-221"></a><span class="x">        // Code executed after user is invited to chat</span>
<a id="__codelineno-40-222" name="__codelineno-40-222" href="#__codelineno-40-222"></a><span class="x">        // Код, выполняемый после приглашения пользователя в чат</span>
<a id="__codelineno-40-223" name="__codelineno-40-223" href="#__codelineno-40-223"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-224" name="__codelineno-40-224" href="#__codelineno-40-224"></a><span class="x">    }</span>
<a id="__codelineno-40-225" name="__codelineno-40-225" href="#__codelineno-40-225"></a>
<a id="__codelineno-40-226" name="__codelineno-40-226" href="#__codelineno-40-226"></a><span class="x">    public function OnBeforeChatKick($params)</span>
<a id="__codelineno-40-227" name="__codelineno-40-227" href="#__codelineno-40-227"></a><span class="x">    {</span>
<a id="__codelineno-40-228" name="__codelineno-40-228" href="#__codelineno-40-228"></a><span class="x">        // Code executed before user is kicked from chat</span>
<a id="__codelineno-40-229" name="__codelineno-40-229" href="#__codelineno-40-229"></a><span class="x">        // Код, выполняемый перед исключением пользователя из чата</span>
<a id="__codelineno-40-230" name="__codelineno-40-230" href="#__codelineno-40-230"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-231" name="__codelineno-40-231" href="#__codelineno-40-231"></a><span class="x">    }</span>
<a id="__codelineno-40-232" name="__codelineno-40-232" href="#__codelineno-40-232"></a>
<a id="__codelineno-40-233" name="__codelineno-40-233" href="#__codelineno-40-233"></a><span class="x">    public function OnAfterChatKick($params, $result)</span>
<a id="__codelineno-40-234" name="__codelineno-40-234" href="#__codelineno-40-234"></a><span class="x">    {</span>
<a id="__codelineno-40-235" name="__codelineno-40-235" href="#__codelineno-40-235"></a><span class="x">        // Code executed after user is kicked from chat</span>
<a id="__codelineno-40-236" name="__codelineno-40-236" href="#__codelineno-40-236"></a><span class="x">        // Код, выполняемый после исключения пользователя из чата</span>
<a id="__codelineno-40-237" name="__codelineno-40-237" href="#__codelineno-40-237"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-238" name="__codelineno-40-238" href="#__codelineno-40-238"></a><span class="x">    }</span>
<a id="__codelineno-40-239" name="__codelineno-40-239" href="#__codelineno-40-239"></a>
<a id="__codelineno-40-240" name="__codelineno-40-240" href="#__codelineno-40-240"></a><span class="x">    public function OnBeforeChatMute($params)</span>
<a id="__codelineno-40-241" name="__codelineno-40-241" href="#__codelineno-40-241"></a><span class="x">    {</span>
<a id="__codelineno-40-242" name="__codelineno-40-242" href="#__codelineno-40-242"></a><span class="x">        // Code executed before chat is muted</span>
<a id="__codelineno-40-243" name="__codelineno-40-243" href="#__codelineno-40-243"></a><span class="x">        // Код, выполняемый перед отключением уведомлений чата</span>
<a id="__codelineno-40-244" name="__codelineno-40-244" href="#__codelineno-40-244"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-245" name="__codelineno-40-245" href="#__codelineno-40-245"></a><span class="x">    }</span>
<a id="__codelineno-40-246" name="__codelineno-40-246" href="#__codelineno-40-246"></a>
<a id="__codelineno-40-247" name="__codelineno-40-247" href="#__codelineno-40-247"></a><span class="x">    public function OnAfterChatMute($params, $result)</span>
<a id="__codelineno-40-248" name="__codelineno-40-248" href="#__codelineno-40-248"></a><span class="x">    {</span>
<a id="__codelineno-40-249" name="__codelineno-40-249" href="#__codelineno-40-249"></a><span class="x">        // Code executed after chat is muted</span>
<a id="__codelineno-40-250" name="__codelineno-40-250" href="#__codelineno-40-250"></a><span class="x">        // Код, выполняемый после отключения уведомлений чата</span>
<a id="__codelineno-40-251" name="__codelineno-40-251" href="#__codelineno-40-251"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-252" name="__codelineno-40-252" href="#__codelineno-40-252"></a><span class="x">    }</span>
<a id="__codelineno-40-253" name="__codelineno-40-253" href="#__codelineno-40-253"></a>
<a id="__codelineno-40-254" name="__codelineno-40-254" href="#__codelineno-40-254"></a><span class="x">    public function OnBeforeChatUnmute($params)</span>
<a id="__codelineno-40-255" name="__codelineno-40-255" href="#__codelineno-40-255"></a><span class="x">    {</span>
<a id="__codelineno-40-256" name="__codelineno-40-256" href="#__codelineno-40-256"></a><span class="x">        // Code executed before chat is unmuted</span>
<a id="__codelineno-40-257" name="__codelineno-40-257" href="#__codelineno-40-257"></a><span class="x">        // Код, выполняемый перед включением уведомлений чата</span>
<a id="__codelineno-40-258" name="__codelineno-40-258" href="#__codelineno-40-258"></a><span class="x">        return $params;</span>
<a id="__codelineno-40-259" name="__codelineno-40-259" href="#__codelineno-40-259"></a><span class="x">    }</span>
<a id="__codelineno-40-260" name="__codelineno-40-260" href="#__codelineno-40-260"></a>
<a id="__codelineno-40-261" name="__codelineno-40-261" href="#__codelineno-40-261"></a><span class="x">    public function OnAfterChatUnmute($params, $result)</span>
<a id="__codelineno-40-262" name="__codelineno-40-262" href="#__codelineno-40-262"></a><span class="x">    {</span>
<a id="__codelineno-40-263" name="__codelineno-40-263" href="#__codelineno-40-263"></a><span class="x">        // Code executed after chat is unmuted</span>
<a id="__codelineno-40-264" name="__codelineno-40-264" href="#__codelineno-40-264"></a><span class="x">        // Код, выполняемый после включения уведомлений чата</span>
<a id="__codelineno-40-265" name="__codelineno-40-265" href="#__codelineno-40-265"></a><span class="x">        return $result;</span>
<a id="__codelineno-40-266" name="__codelineno-40-266" href="#__codelineno-40-266"></a><span class="x">    }</span>
<a id="__codelineno-40-267" name="__codelineno-40-267" href="#__codelineno-40-267"></a><span class="x">}</span>
<a id="__codelineno-40-268" name="__codelineno-40-268" href="#__codelineno-40-268"></a>
<a id="__codelineno-40-269" name="__codelineno-40-269" href="#__codelineno-40-269"></a><span class="x">// Register handler</span>
<a id="__codelineno-40-270" name="__codelineno-40-270" href="#__codelineno-40-270"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-40-271" name="__codelineno-40-271" href="#__codelineno-40-271"></a><span class="x">CIMChatHandler::Register(&#39;custom_chat&#39;, &#39;CCustomChatHandler&#39;);</span>
</code></pre></div>
<h3 id="user-handlers">User Handlers | Обработчики пользователей<a class="headerlink" href="#user-handlers" title="Permanent link">&para;</a></h3>
<h4 id="user-handler">User Handler | Обработчик пользователя<a class="headerlink" href="#user-handler" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="x">// D7</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="x">class CustomUserHandler extends \Bitrix\Im\User\Handler</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="x">{</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="x">    public function onBeforeUserCreate($params)</span>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="x">    {</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="x">        // Code executed before user is created</span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="x">        // Код, выполняемый перед созданием пользователя</span>
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="x">        return $params;</span>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="x">    }</span>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a><span class="x">    public function onAfterUserCreate($params, $result)</span>
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="x">    {</span>
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a><span class="x">        // Code executed after user is created</span>
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a><span class="x">        // Код, выполняемый после создания пользователя</span>
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a><span class="x">        return $result;</span>
<a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a><span class="x">    }</span>
<a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a>
<a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a><span class="x">    public function onBeforeUserUpdate($params)</span>
<a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a><span class="x">    {</span>
<a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a><span class="x">        // Code executed before user is updated</span>
<a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a><span class="x">        // Код, выполняемый перед обновлением пользователя</span>
<a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a><span class="x">        return $params;</span>
<a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a><span class="x">    }</span>
<a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a>
<a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a><span class="x">    public function onAfterUserUpdate($params, $result)</span>
<a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a><span class="x">    {</span>
<a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a><span class="x">        // Code executed after user is updated</span>
<a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a><span class="x">        // Код, выполняемый после обновления пользователя</span>
<a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a><span class="x">        return $result;</span>
<a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a><span class="x">    }</span>
<a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a>
<a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a><span class="x">    public function onBeforeUserDelete($params)</span>
<a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a><span class="x">    {</span>
<a id="__codelineno-41-36" name="__codelineno-41-36" href="#__codelineno-41-36"></a><span class="x">        // Code executed before user is deleted</span>
<a id="__codelineno-41-37" name="__codelineno-41-37" href="#__codelineno-41-37"></a><span class="x">        // Код, выполняемый перед удалением пользователя</span>
<a id="__codelineno-41-38" name="__codelineno-41-38" href="#__codelineno-41-38"></a><span class="x">        return $params;</span>
<a id="__codelineno-41-39" name="__codelineno-41-39" href="#__codelineno-41-39"></a><span class="x">    }</span>
<a id="__codelineno-41-40" name="__codelineno-41-40" href="#__codelineno-41-40"></a>
<a id="__codelineno-41-41" name="__codelineno-41-41" href="#__codelineno-41-41"></a><span class="x">    public function onAfterUserDelete($params, $result)</span>
<a id="__codelineno-41-42" name="__codelineno-41-42" href="#__codelineno-41-42"></a><span class="x">    {</span>
<a id="__codelineno-41-43" name="__codelineno-41-43" href="#__codelineno-41-43"></a><span class="x">        // Code executed after user is deleted</span>
<a id="__codelineno-41-44" name="__codelineno-41-44" href="#__codelineno-41-44"></a><span class="x">        // Код, выполняемый после удаления пользователя</span>
<a id="__codelineno-41-45" name="__codelineno-41-45" href="#__codelineno-41-45"></a><span class="x">        return $result;</span>
<a id="__codelineno-41-46" name="__codelineno-41-46" href="#__codelineno-41-46"></a><span class="x">    }</span>
<a id="__codelineno-41-47" name="__codelineno-41-47" href="#__codelineno-41-47"></a>
<a id="__codelineno-41-48" name="__codelineno-41-48" href="#__codelineno-41-48"></a><span class="x">    public function onBeforeUserStatusUpdate($params)</span>
<a id="__codelineno-41-49" name="__codelineno-41-49" href="#__codelineno-41-49"></a><span class="x">    {</span>
<a id="__codelineno-41-50" name="__codelineno-41-50" href="#__codelineno-41-50"></a><span class="x">        // Code executed before user status is updated</span>
<a id="__codelineno-41-51" name="__codelineno-41-51" href="#__codelineno-41-51"></a><span class="x">        // Код, выполняемый перед обновлением статуса пользователя</span>
<a id="__codelineno-41-52" name="__codelineno-41-52" href="#__codelineno-41-52"></a><span class="x">        return $params;</span>
<a id="__codelineno-41-53" name="__codelineno-41-53" href="#__codelineno-41-53"></a><span class="x">    }</span>
<a id="__codelineno-41-54" name="__codelineno-41-54" href="#__codelineno-41-54"></a>
<a id="__codelineno-41-55" name="__codelineno-41-55" href="#__codelineno-41-55"></a><span class="x">    public function onAfterUserStatusUpdate($params, $result)</span>
<a id="__codelineno-41-56" name="__codelineno-41-56" href="#__codelineno-41-56"></a><span class="x">    {</span>
<a id="__codelineno-41-57" name="__codelineno-41-57" href="#__codelineno-41-57"></a><span class="x">        // Code executed after user status is updated</span>
<a id="__codelineno-41-58" name="__codelineno-41-58" href="#__codelineno-41-58"></a><span class="x">        // Код, выполняемый после обновления статуса пользователя</span>
<a id="__codelineno-41-59" name="__codelineno-41-59" href="#__codelineno-41-59"></a><span class="x">        return $result;</span>
<a id="__codelineno-41-60" name="__codelineno-41-60" href="#__codelineno-41-60"></a><span class="x">    }</span>
<a id="__codelineno-41-61" name="__codelineno-41-61" href="#__codelineno-41-61"></a>
<a id="__codelineno-41-62" name="__codelineno-41-62" href="#__codelineno-41-62"></a><span class="x">    public function onBeforeUserAvatarUpdate($params)</span>
<a id="__codelineno-41-63" name="__codelineno-41-63" href="#__codelineno-41-63"></a><span class="x">    {</span>
<a id="__codelineno-41-64" name="__codelineno-41-64" href="#__codelineno-41-64"></a><span class="x">        // Code executed before user avatar is updated</span>
<a id="__codelineno-41-65" name="__codelineno-41-65" href="#__codelineno-41-65"></a><span class="x">        // Код, выполняемый перед обновлением аватара пользователя</span>
<a id="__codelineno-41-66" name="__codelineno-41-66" href="#__codelineno-41-66"></a><span class="x">        return $params;</span>
<a id="__codelineno-41-67" name="__codelineno-41-67" href="#__codelineno-41-67"></a><span class="x">    }</span>
<a id="__codelineno-41-68" name="__codelineno-41-68" href="#__codelineno-41-68"></a>
<a id="__codelineno-41-69" name="__codelineno-41-69" href="#__codelineno-41-69"></a><span class="x">    public function onAfterUserAvatarUpdate($params, $result)</span>
<a id="__codelineno-41-70" name="__codelineno-41-70" href="#__codelineno-41-70"></a><span class="x">    {</span>
<a id="__codelineno-41-71" name="__codelineno-41-71" href="#__codelineno-41-71"></a><span class="x">        // Code executed after user avatar is updated</span>
<a id="__codelineno-41-72" name="__codelineno-41-72" href="#__codelineno-41-72"></a><span class="x">        // Код, выполняемый после обновления аватара пользователя</span>
<a id="__codelineno-41-73" name="__codelineno-41-73" href="#__codelineno-41-73"></a><span class="x">        return $result;</span>
<a id="__codelineno-41-74" name="__codelineno-41-74" href="#__codelineno-41-74"></a><span class="x">    }</span>
<a id="__codelineno-41-75" name="__codelineno-41-75" href="#__codelineno-41-75"></a><span class="x">}</span>
<a id="__codelineno-41-76" name="__codelineno-41-76" href="#__codelineno-41-76"></a>
<a id="__codelineno-41-77" name="__codelineno-41-77" href="#__codelineno-41-77"></a><span class="x">// Register handler</span>
<a id="__codelineno-41-78" name="__codelineno-41-78" href="#__codelineno-41-78"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-41-79" name="__codelineno-41-79" href="#__codelineno-41-79"></a><span class="x">\Bitrix\Im\User\Handler::register(&#39;custom_user&#39;, CustomUserHandler::class);</span>
<a id="__codelineno-41-80" name="__codelineno-41-80" href="#__codelineno-41-80"></a>
<a id="__codelineno-41-81" name="__codelineno-41-81" href="#__codelineno-41-81"></a><span class="x">// Legacy</span>
<a id="__codelineno-41-82" name="__codelineno-41-82" href="#__codelineno-41-82"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-41-83" name="__codelineno-41-83" href="#__codelineno-41-83"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-41-84" name="__codelineno-41-84" href="#__codelineno-41-84"></a><span class="x">class CCustomUserHandler extends CIMUserHandler</span>
<a id="__codelineno-41-85" name="__codelineno-41-85" href="#__codelineno-41-85"></a><span class="x">{</span>
<a id="__codelineno-41-86" name="__codelineno-41-86" href="#__codelineno-41-86"></a><span class="x">    public function OnBeforeUserCreate($params)</span>
<a id="__codelineno-41-87" name="__codelineno-41-87" href="#__codelineno-41-87"></a><span class="x">    {</span>
<a id="__codelineno-41-88" name="__codelineno-41-88" href="#__codelineno-41-88"></a><span class="x">        // Code executed before user is created</span>
<a id="__codelineno-41-89" name="__codelineno-41-89" href="#__codelineno-41-89"></a><span class="x">        // Код, выполняемый перед созданием пользователя</span>
<a id="__codelineno-41-90" name="__codelineno-41-90" href="#__codelineno-41-90"></a><span class="x">        return $params;</span>
<a id="__codelineno-41-91" name="__codelineno-41-91" href="#__codelineno-41-91"></a><span class="x">    }</span>
<a id="__codelineno-41-92" name="__codelineno-41-92" href="#__codelineno-41-92"></a>
<a id="__codelineno-41-93" name="__codelineno-41-93" href="#__codelineno-41-93"></a><span class="x">    public function OnAfterUserCreate($params, $result)</span>
<a id="__codelineno-41-94" name="__codelineno-41-94" href="#__codelineno-41-94"></a><span class="x">    {</span>
<a id="__codelineno-41-95" name="__codelineno-41-95" href="#__codelineno-41-95"></a><span class="x">        // Code executed after user is created</span>
<a id="__codelineno-41-96" name="__codelineno-41-96" href="#__codelineno-41-96"></a><span class="x">        // Код, выполняемый после создания пользователя</span>
<a id="__codelineno-41-97" name="__codelineno-41-97" href="#__codelineno-41-97"></a><span class="x">        return $result;</span>
<a id="__codelineno-41-98" name="__codelineno-41-98" href="#__codelineno-41-98"></a><span class="x">    }</span>
<a id="__codelineno-41-99" name="__codelineno-41-99" href="#__codelineno-41-99"></a>
<a id="__codelineno-41-100" name="__codelineno-41-100" href="#__codelineno-41-100"></a><span class="x">    public function OnBeforeUserUpdate($params)</span>
<a id="__codelineno-41-101" name="__codelineno-41-101" href="#__codelineno-41-101"></a><span class="x">    {</span>
<a id="__codelineno-41-102" name="__codelineno-41-102" href="#__codelineno-41-102"></a><span class="x">        // Code executed before user is updated</span>
<a id="__codelineno-41-103" name="__codelineno-41-103" href="#__codelineno-41-103"></a><span class="x">        // Код, выполняемый перед обновлением пользователя</span>
<a id="__codelineno-41-104" name="__codelineno-41-104" href="#__codelineno-41-104"></a><span class="x">        return $params;</span>
<a id="__codelineno-41-105" name="__codelineno-41-105" href="#__codelineno-41-105"></a><span class="x">    }</span>
<a id="__codelineno-41-106" name="__codelineno-41-106" href="#__codelineno-41-106"></a>
<a id="__codelineno-41-107" name="__codelineno-41-107" href="#__codelineno-41-107"></a><span class="x">    public function OnAfterUserUpdate($params, $result)</span>
<a id="__codelineno-41-108" name="__codelineno-41-108" href="#__codelineno-41-108"></a><span class="x">    {</span>
<a id="__codelineno-41-109" name="__codelineno-41-109" href="#__codelineno-41-109"></a><span class="x">        // Code executed after user is updated</span>
<a id="__codelineno-41-110" name="__codelineno-41-110" href="#__codelineno-41-110"></a><span class="x">        // Код, выполняемый после обновления пользователя</span>
<a id="__codelineno-41-111" name="__codelineno-41-111" href="#__codelineno-41-111"></a><span class="x">        return $result;</span>
<a id="__codelineno-41-112" name="__codelineno-41-112" href="#__codelineno-41-112"></a><span class="x">    }</span>
<a id="__codelineno-41-113" name="__codelineno-41-113" href="#__codelineno-41-113"></a>
<a id="__codelineno-41-114" name="__codelineno-41-114" href="#__codelineno-41-114"></a><span class="x">    public function OnBeforeUserDelete($params)</span>
<a id="__codelineno-41-115" name="__codelineno-41-115" href="#__codelineno-41-115"></a><span class="x">    {</span>
<a id="__codelineno-41-116" name="__codelineno-41-116" href="#__codelineno-41-116"></a><span class="x">        // Code executed before user is deleted</span>
<a id="__codelineno-41-117" name="__codelineno-41-117" href="#__codelineno-41-117"></a><span class="x">        // Код, выполняемый перед удалением пользователя</span>
<a id="__codelineno-41-118" name="__codelineno-41-118" href="#__codelineno-41-118"></a><span class="x">        return $params;</span>
<a id="__codelineno-41-119" name="__codelineno-41-119" href="#__codelineno-41-119"></a><span class="x">    }</span>
<a id="__codelineno-41-120" name="__codelineno-41-120" href="#__codelineno-41-120"></a>
<a id="__codelineno-41-121" name="__codelineno-41-121" href="#__codelineno-41-121"></a><span class="x">    public function OnAfterUserDelete($params, $result)</span>
<a id="__codelineno-41-122" name="__codelineno-41-122" href="#__codelineno-41-122"></a><span class="x">    {</span>
<a id="__codelineno-41-123" name="__codelineno-41-123" href="#__codelineno-41-123"></a><span class="x">        // Code executed after user is deleted</span>
<a id="__codelineno-41-124" name="__codelineno-41-124" href="#__codelineno-41-124"></a><span class="x">        // Код, выполняемый после удаления пользователя</span>
<a id="__codelineno-41-125" name="__codelineno-41-125" href="#__codelineno-41-125"></a><span class="x">        return $result;</span>
<a id="__codelineno-41-126" name="__codelineno-41-126" href="#__codelineno-41-126"></a><span class="x">    }</span>
<a id="__codelineno-41-127" name="__codelineno-41-127" href="#__codelineno-41-127"></a>
<a id="__codelineno-41-128" name="__codelineno-41-128" href="#__codelineno-41-128"></a><span class="x">    public function OnBeforeUserStatusUpdate($params)</span>
<a id="__codelineno-41-129" name="__codelineno-41-129" href="#__codelineno-41-129"></a><span class="x">    {</span>
<a id="__codelineno-41-130" name="__codelineno-41-130" href="#__codelineno-41-130"></a><span class="x">        // Code executed before user status is updated</span>
<a id="__codelineno-41-131" name="__codelineno-41-131" href="#__codelineno-41-131"></a><span class="x">        // Код, выполняемый перед обновлением статуса пользователя</span>
<a id="__codelineno-41-132" name="__codelineno-41-132" href="#__codelineno-41-132"></a><span class="x">        return $params;</span>
<a id="__codelineno-41-133" name="__codelineno-41-133" href="#__codelineno-41-133"></a><span class="x">    }</span>
<a id="__codelineno-41-134" name="__codelineno-41-134" href="#__codelineno-41-134"></a>
<a id="__codelineno-41-135" name="__codelineno-41-135" href="#__codelineno-41-135"></a><span class="x">    public function OnAfterUserStatusUpdate($params, $result)</span>
<a id="__codelineno-41-136" name="__codelineno-41-136" href="#__codelineno-41-136"></a><span class="x">    {</span>
<a id="__codelineno-41-137" name="__codelineno-41-137" href="#__codelineno-41-137"></a><span class="x">        // Code executed after user status is updated</span>
<a id="__codelineno-41-138" name="__codelineno-41-138" href="#__codelineno-41-138"></a><span class="x">        // Код, выполняемый после обновления статуса пользователя</span>
<a id="__codelineno-41-139" name="__codelineno-41-139" href="#__codelineno-41-139"></a><span class="x">        return $result;</span>
<a id="__codelineno-41-140" name="__codelineno-41-140" href="#__codelineno-41-140"></a><span class="x">    }</span>
<a id="__codelineno-41-141" name="__codelineno-41-141" href="#__codelineno-41-141"></a>
<a id="__codelineno-41-142" name="__codelineno-41-142" href="#__codelineno-41-142"></a><span class="x">    public function OnBeforeUserAvatarUpdate($params)</span>
<a id="__codelineno-41-143" name="__codelineno-41-143" href="#__codelineno-41-143"></a><span class="x">    {</span>
<a id="__codelineno-41-144" name="__codelineno-41-144" href="#__codelineno-41-144"></a><span class="x">        // Code executed before user avatar is updated</span>
<a id="__codelineno-41-145" name="__codelineno-41-145" href="#__codelineno-41-145"></a><span class="x">        // Код, выполняемый перед обновлением аватара пользователя</span>
<a id="__codelineno-41-146" name="__codelineno-41-146" href="#__codelineno-41-146"></a><span class="x">        return $params;</span>
<a id="__codelineno-41-147" name="__codelineno-41-147" href="#__codelineno-41-147"></a><span class="x">    }</span>
<a id="__codelineno-41-148" name="__codelineno-41-148" href="#__codelineno-41-148"></a>
<a id="__codelineno-41-149" name="__codelineno-41-149" href="#__codelineno-41-149"></a><span class="x">    public function OnAfterUserAvatarUpdate($params, $result)</span>
<a id="__codelineno-41-150" name="__codelineno-41-150" href="#__codelineno-41-150"></a><span class="x">    {</span>
<a id="__codelineno-41-151" name="__codelineno-41-151" href="#__codelineno-41-151"></a><span class="x">        // Code executed after user avatar is updated</span>
<a id="__codelineno-41-152" name="__codelineno-41-152" href="#__codelineno-41-152"></a><span class="x">        // Код, выполняемый после обновления аватара пользователя</span>
<a id="__codelineno-41-153" name="__codelineno-41-153" href="#__codelineno-41-153"></a><span class="x">        return $result;</span>
<a id="__codelineno-41-154" name="__codelineno-41-154" href="#__codelineno-41-154"></a><span class="x">    }</span>
<a id="__codelineno-41-155" name="__codelineno-41-155" href="#__codelineno-41-155"></a><span class="x">}</span>
<a id="__codelineno-41-156" name="__codelineno-41-156" href="#__codelineno-41-156"></a>
<a id="__codelineno-41-157" name="__codelineno-41-157" href="#__codelineno-41-157"></a><span class="x">// Register handler</span>
<a id="__codelineno-41-158" name="__codelineno-41-158" href="#__codelineno-41-158"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-41-159" name="__codelineno-41-159" href="#__codelineno-41-159"></a><span class="x">CIMUserHandler::Register(&#39;custom_user&#39;, &#39;CCustomUserHandler&#39;);</span>
</code></pre></div>
<h3 id="file-handlers">File Handlers | Обработчики файлов<a class="headerlink" href="#file-handlers" title="Permanent link">&para;</a></h3>
<h4 id="file-handler">File Handler | Обработчик файла<a class="headerlink" href="#file-handler" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="x">// D7</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="x">class CustomFileHandler extends \Bitrix\Im\File\Handler</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="x">{</span>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="x">    public function onBeforeFileUpload($params)</span>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="x">    {</span>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="x">        // Code executed before file is uploaded</span>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="x">        // Код, выполняемый перед загрузкой файла</span>
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="x">        return $params;</span>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="x">    }</span>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a>
<a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a><span class="x">    public function onAfterFileUpload($params, $result)</span>
<a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a><span class="x">    {</span>
<a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a><span class="x">        // Code executed after file is uploaded</span>
<a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a><span class="x">        // Код, выполняемый после загрузки файла</span>
<a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a><span class="x">        return $result;</span>
<a id="__codelineno-42-18" name="__codelineno-42-18" href="#__codelineno-42-18"></a><span class="x">    }</span>
<a id="__codelineno-42-19" name="__codelineno-42-19" href="#__codelineno-42-19"></a>
<a id="__codelineno-42-20" name="__codelineno-42-20" href="#__codelineno-42-20"></a><span class="x">    public function onBeforeFileDelete($params)</span>
<a id="__codelineno-42-21" name="__codelineno-42-21" href="#__codelineno-42-21"></a><span class="x">    {</span>
<a id="__codelineno-42-22" name="__codelineno-42-22" href="#__codelineno-42-22"></a><span class="x">        // Code executed before file is deleted</span>
<a id="__codelineno-42-23" name="__codelineno-42-23" href="#__codelineno-42-23"></a><span class="x">        // Код, выполняемый перед удалением файла</span>
<a id="__codelineno-42-24" name="__codelineno-42-24" href="#__codelineno-42-24"></a><span class="x">        return $params;</span>
<a id="__codelineno-42-25" name="__codelineno-42-25" href="#__codelineno-42-25"></a><span class="x">    }</span>
<a id="__codelineno-42-26" name="__codelineno-42-26" href="#__codelineno-42-26"></a>
<a id="__codelineno-42-27" name="__codelineno-42-27" href="#__codelineno-42-27"></a><span class="x">    public function onAfterFileDelete($params, $result)</span>
<a id="__codelineno-42-28" name="__codelineno-42-28" href="#__codelineno-42-28"></a><span class="x">    {</span>
<a id="__codelineno-42-29" name="__codelineno-42-29" href="#__codelineno-42-29"></a><span class="x">        // Code executed after file is deleted</span>
<a id="__codelineno-42-30" name="__codelineno-42-30" href="#__codelineno-42-30"></a><span class="x">        // Код, выполняемый после удаления файла</span>
<a id="__codelineno-42-31" name="__codelineno-42-31" href="#__codelineno-42-31"></a><span class="x">        return $result;</span>
<a id="__codelineno-42-32" name="__codelineno-42-32" href="#__codelineno-42-32"></a><span class="x">    }</span>
<a id="__codelineno-42-33" name="__codelineno-42-33" href="#__codelineno-42-33"></a>
<a id="__codelineno-42-34" name="__codelineno-42-34" href="#__codelineno-42-34"></a><span class="x">    public function onBeforeFileDownload($params)</span>
<a id="__codelineno-42-35" name="__codelineno-42-35" href="#__codelineno-42-35"></a><span class="x">    {</span>
<a id="__codelineno-42-36" name="__codelineno-42-36" href="#__codelineno-42-36"></a><span class="x">        // Code executed before file is downloaded</span>
<a id="__codelineno-42-37" name="__codelineno-42-37" href="#__codelineno-42-37"></a><span class="x">        // Код, выполняемый перед скачиванием файла</span>
<a id="__codelineno-42-38" name="__codelineno-42-38" href="#__codelineno-42-38"></a><span class="x">        return $params;</span>
<a id="__codelineno-42-39" name="__codelineno-42-39" href="#__codelineno-42-39"></a><span class="x">    }</span>
<a id="__codelineno-42-40" name="__codelineno-42-40" href="#__codelineno-42-40"></a>
<a id="__codelineno-42-41" name="__codelineno-42-41" href="#__codelineno-42-41"></a><span class="x">    public function onAfterFileDownload($params, $result)</span>
<a id="__codelineno-42-42" name="__codelineno-42-42" href="#__codelineno-42-42"></a><span class="x">    {</span>
<a id="__codelineno-42-43" name="__codelineno-42-43" href="#__codelineno-42-43"></a><span class="x">        // Code executed after file is downloaded</span>
<a id="__codelineno-42-44" name="__codelineno-42-44" href="#__codelineno-42-44"></a><span class="x">        // Код, выполняемый после скачивания файла</span>
<a id="__codelineno-42-45" name="__codelineno-42-45" href="#__codelineno-42-45"></a><span class="x">        return $result;</span>
<a id="__codelineno-42-46" name="__codelineno-42-46" href="#__codelineno-42-46"></a><span class="x">    }</span>
<a id="__codelineno-42-47" name="__codelineno-42-47" href="#__codelineno-42-47"></a><span class="x">}</span>
<a id="__codelineno-42-48" name="__codelineno-42-48" href="#__codelineno-42-48"></a>
<a id="__codelineno-42-49" name="__codelineno-42-49" href="#__codelineno-42-49"></a><span class="x">// Register handler</span>
<a id="__codelineno-42-50" name="__codelineno-42-50" href="#__codelineno-42-50"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-42-51" name="__codelineno-42-51" href="#__codelineno-42-51"></a><span class="x">\Bitrix\Im\File\Handler::register(&#39;custom_file&#39;, CustomFileHandler::class);</span>
<a id="__codelineno-42-52" name="__codelineno-42-52" href="#__codelineno-42-52"></a>
<a id="__codelineno-42-53" name="__codelineno-42-53" href="#__codelineno-42-53"></a><span class="x">// Legacy</span>
<a id="__codelineno-42-54" name="__codelineno-42-54" href="#__codelineno-42-54"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-42-55" name="__codelineno-42-55" href="#__codelineno-42-55"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-42-56" name="__codelineno-42-56" href="#__codelineno-42-56"></a><span class="x">class CCustomFileHandler extends CIMFileHandler</span>
<a id="__codelineno-42-57" name="__codelineno-42-57" href="#__codelineno-42-57"></a><span class="x">{</span>
<a id="__codelineno-42-58" name="__codelineno-42-58" href="#__codelineno-42-58"></a><span class="x">    public function OnBeforeFileUpload($params)</span>
<a id="__codelineno-42-59" name="__codelineno-42-59" href="#__codelineno-42-59"></a><span class="x">    {</span>
<a id="__codelineno-42-60" name="__codelineno-42-60" href="#__codelineno-42-60"></a><span class="x">        // Code executed before file is uploaded</span>
<a id="__codelineno-42-61" name="__codelineno-42-61" href="#__codelineno-42-61"></a><span class="x">        // Код, выполняемый перед загрузкой файла</span>
<a id="__codelineno-42-62" name="__codelineno-42-62" href="#__codelineno-42-62"></a><span class="x">        return $params;</span>
<a id="__codelineno-42-63" name="__codelineno-42-63" href="#__codelineno-42-63"></a><span class="x">    }</span>
<a id="__codelineno-42-64" name="__codelineno-42-64" href="#__codelineno-42-64"></a>
<a id="__codelineno-42-65" name="__codelineno-42-65" href="#__codelineno-42-65"></a><span class="x">    public function OnAfterFileUpload($params, $result)</span>
<a id="__codelineno-42-66" name="__codelineno-42-66" href="#__codelineno-42-66"></a><span class="x">    {</span>
<a id="__codelineno-42-67" name="__codelineno-42-67" href="#__codelineno-42-67"></a><span class="x">        // Code executed after file is uploaded</span>
<a id="__codelineno-42-68" name="__codelineno-42-68" href="#__codelineno-42-68"></a><span class="x">        // Код, выполняемый после загрузки файла</span>
<a id="__codelineno-42-69" name="__codelineno-42-69" href="#__codelineno-42-69"></a><span class="x">        return $result;</span>
<a id="__codelineno-42-70" name="__codelineno-42-70" href="#__codelineno-42-70"></a><span class="x">    }</span>
<a id="__codelineno-42-71" name="__codelineno-42-71" href="#__codelineno-42-71"></a>
<a id="__codelineno-42-72" name="__codelineno-42-72" href="#__codelineno-42-72"></a><span class="x">    public function OnBeforeFileDelete($params)</span>
<a id="__codelineno-42-73" name="__codelineno-42-73" href="#__codelineno-42-73"></a><span class="x">    {</span>
<a id="__codelineno-42-74" name="__codelineno-42-74" href="#__codelineno-42-74"></a><span class="x">        // Code executed before file is deleted</span>
<a id="__codelineno-42-75" name="__codelineno-42-75" href="#__codelineno-42-75"></a><span class="x">        // Код, выполняемый перед удалением файла</span>
<a id="__codelineno-42-76" name="__codelineno-42-76" href="#__codelineno-42-76"></a><span class="x">        return $params;</span>
<a id="__codelineno-42-77" name="__codelineno-42-77" href="#__codelineno-42-77"></a><span class="x">    }</span>
<a id="__codelineno-42-78" name="__codelineno-42-78" href="#__codelineno-42-78"></a>
<a id="__codelineno-42-79" name="__codelineno-42-79" href="#__codelineno-42-79"></a><span class="x">    public function OnAfterFileDelete($params, $result)</span>
<a id="__codelineno-42-80" name="__codelineno-42-80" href="#__codelineno-42-80"></a><span class="x">    {</span>
<a id="__codelineno-42-81" name="__codelineno-42-81" href="#__codelineno-42-81"></a><span class="x">        // Code executed after file is deleted</span>
<a id="__codelineno-42-82" name="__codelineno-42-82" href="#__codelineno-42-82"></a><span class="x">        // Код, выполняемый после удаления файла</span>
<a id="__codelineno-42-83" name="__codelineno-42-83" href="#__codelineno-42-83"></a><span class="x">        return $result;</span>
<a id="__codelineno-42-84" name="__codelineno-42-84" href="#__codelineno-42-84"></a><span class="x">    }</span>
<a id="__codelineno-42-85" name="__codelineno-42-85" href="#__codelineno-42-85"></a>
<a id="__codelineno-42-86" name="__codelineno-42-86" href="#__codelineno-42-86"></a><span class="x">    public function OnBeforeFileDownload($params)</span>
<a id="__codelineno-42-87" name="__codelineno-42-87" href="#__codelineno-42-87"></a><span class="x">    {</span>
<a id="__codelineno-42-88" name="__codelineno-42-88" href="#__codelineno-42-88"></a><span class="x">        // Code executed before file is downloaded</span>
<a id="__codelineno-42-89" name="__codelineno-42-89" href="#__codelineno-42-89"></a><span class="x">        // Код, выполняемый перед скачиванием файла</span>
<a id="__codelineno-42-90" name="__codelineno-42-90" href="#__codelineno-42-90"></a><span class="x">        return $params;</span>
<a id="__codelineno-42-91" name="__codelineno-42-91" href="#__codelineno-42-91"></a><span class="x">    }</span>
<a id="__codelineno-42-92" name="__codelineno-42-92" href="#__codelineno-42-92"></a>
<a id="__codelineno-42-93" name="__codelineno-42-93" href="#__codelineno-42-93"></a><span class="x">    public function OnAfterFileDownload($params, $result)</span>
<a id="__codelineno-42-94" name="__codelineno-42-94" href="#__codelineno-42-94"></a><span class="x">    {</span>
<a id="__codelineno-42-95" name="__codelineno-42-95" href="#__codelineno-42-95"></a><span class="x">        // Code executed after file is downloaded</span>
<a id="__codelineno-42-96" name="__codelineno-42-96" href="#__codelineno-42-96"></a><span class="x">        // Код, выполняемый после скачивания файла</span>
<a id="__codelineno-42-97" name="__codelineno-42-97" href="#__codelineno-42-97"></a><span class="x">        return $result;</span>
<a id="__codelineno-42-98" name="__codelineno-42-98" href="#__codelineno-42-98"></a><span class="x">    }</span>
<a id="__codelineno-42-99" name="__codelineno-42-99" href="#__codelineno-42-99"></a><span class="x">}</span>
<a id="__codelineno-42-100" name="__codelineno-42-100" href="#__codelineno-42-100"></a>
<a id="__codelineno-42-101" name="__codelineno-42-101" href="#__codelineno-42-101"></a><span class="x">// Register handler</span>
<a id="__codelineno-42-102" name="__codelineno-42-102" href="#__codelineno-42-102"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-42-103" name="__codelineno-42-103" href="#__codelineno-42-103"></a><span class="x">CIMFileHandler::Register(&#39;custom_file&#39;, &#39;CCustomFileHandler&#39;);</span>
</code></pre></div>
<h3 id="notification-handlers">Notification Handlers | Обработчики уведомлений<a class="headerlink" href="#notification-handlers" title="Permanent link">&para;</a></h3>
<h4 id="notification-handler">Notification Handler | Обработчик уведомлений<a class="headerlink" href="#notification-handler" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="x">// D7</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="x">class CustomNotificationHandler extends \Bitrix\Im\Notification\Handler</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="x">{</span>
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="x">    public function onBeforeNotificationCreate($params)</span>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="x">    {</span>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="x">        // Code executed before notification is created</span>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="x">        // Код, выполняемый перед созданием уведомления</span>
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="x">        return $params;</span>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="x">    }</span>
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="x">    public function onAfterNotificationCreate($params, $result)</span>
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="x">    {</span>
<a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a><span class="x">        // Code executed after notification is created</span>
<a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a><span class="x">        // Код, выполняемый после создания уведомления</span>
<a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a><span class="x">        return $result;</span>
<a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a><span class="x">    }</span>
<a id="__codelineno-43-19" name="__codelineno-43-19" href="#__codelineno-43-19"></a>
<a id="__codelineno-43-20" name="__codelineno-43-20" href="#__codelineno-43-20"></a><span class="x">    public function onBeforeNotificationUpdate($params)</span>
<a id="__codelineno-43-21" name="__codelineno-43-21" href="#__codelineno-43-21"></a><span class="x">    {</span>
<a id="__codelineno-43-22" name="__codelineno-43-22" href="#__codelineno-43-22"></a><span class="x">        // Code executed before notification is updated</span>
<a id="__codelineno-43-23" name="__codelineno-43-23" href="#__codelineno-43-23"></a><span class="x">        // Код, выполняемый перед обновлением уведомления</span>
<a id="__codelineno-43-24" name="__codelineno-43-24" href="#__codelineno-43-24"></a><span class="x">        return $params;</span>
<a id="__codelineno-43-25" name="__codelineno-43-25" href="#__codelineno-43-25"></a><span class="x">    }</span>
<a id="__codelineno-43-26" name="__codelineno-43-26" href="#__codelineno-43-26"></a>
<a id="__codelineno-43-27" name="__codelineno-43-27" href="#__codelineno-43-27"></a><span class="x">    public function onAfterNotificationUpdate($params, $result)</span>
<a id="__codelineno-43-28" name="__codelineno-43-28" href="#__codelineno-43-28"></a><span class="x">    {</span>
<a id="__codelineno-43-29" name="__codelineno-43-29" href="#__codelineno-43-29"></a><span class="x">        // Code executed after notification is updated</span>
<a id="__codelineno-43-30" name="__codelineno-43-30" href="#__codelineno-43-30"></a><span class="x">        // Код, выполняемый после обновления уведомления</span>
<a id="__codelineno-43-31" name="__codelineno-43-31" href="#__codelineno-43-31"></a><span class="x">        return $result;</span>
<a id="__codelineno-43-32" name="__codelineno-43-32" href="#__codelineno-43-32"></a><span class="x">    }</span>
<a id="__codelineno-43-33" name="__codelineno-43-33" href="#__codelineno-43-33"></a>
<a id="__codelineno-43-34" name="__codelineno-43-34" href="#__codelineno-43-34"></a><span class="x">    public function onBeforeNotificationDelete($params)</span>
<a id="__codelineno-43-35" name="__codelineno-43-35" href="#__codelineno-43-35"></a><span class="x">    {</span>
<a id="__codelineno-43-36" name="__codelineno-43-36" href="#__codelineno-43-36"></a><span class="x">        // Code executed before notification is deleted</span>
<a id="__codelineno-43-37" name="__codelineno-43-37" href="#__codelineno-43-37"></a><span class="x">        // Код, выполняемый перед удалением уведомления</span>
<a id="__codelineno-43-38" name="__codelineno-43-38" href="#__codelineno-43-38"></a><span class="x">        return $params;</span>
<a id="__codelineno-43-39" name="__codelineno-43-39" href="#__codelineno-43-39"></a><span class="x">    }</span>
<a id="__codelineno-43-40" name="__codelineno-43-40" href="#__codelineno-43-40"></a>
<a id="__codelineno-43-41" name="__codelineno-43-41" href="#__codelineno-43-41"></a><span class="x">    public function onAfterNotificationDelete($params, $result)</span>
<a id="__codelineno-43-42" name="__codelineno-43-42" href="#__codelineno-43-42"></a><span class="x">    {</span>
<a id="__codelineno-43-43" name="__codelineno-43-43" href="#__codelineno-43-43"></a><span class="x">        // Code executed after notification is deleted</span>
<a id="__codelineno-43-44" name="__codelineno-43-44" href="#__codelineno-43-44"></a><span class="x">        // Код, выполняемый после удаления уведомления</span>
<a id="__codelineno-43-45" name="__codelineno-43-45" href="#__codelineno-43-45"></a><span class="x">        return $result;</span>
<a id="__codelineno-43-46" name="__codelineno-43-46" href="#__codelineno-43-46"></a><span class="x">    }</span>
<a id="__codelineno-43-47" name="__codelineno-43-47" href="#__codelineno-43-47"></a>
<a id="__codelineno-43-48" name="__codelineno-43-48" href="#__codelineno-43-48"></a><span class="x">    public function onBeforeNotificationRead($params)</span>
<a id="__codelineno-43-49" name="__codelineno-43-49" href="#__codelineno-43-49"></a><span class="x">    {</span>
<a id="__codelineno-43-50" name="__codelineno-43-50" href="#__codelineno-43-50"></a><span class="x">        // Code executed before notification is read</span>
<a id="__codelineno-43-51" name="__codelineno-43-51" href="#__codelineno-43-51"></a><span class="x">        // Код, выполняемый перед прочтением уведомления</span>
<a id="__codelineno-43-52" name="__codelineno-43-52" href="#__codelineno-43-52"></a><span class="x">        return $params;</span>
<a id="__codelineno-43-53" name="__codelineno-43-53" href="#__codelineno-43-53"></a><span class="x">    }</span>
<a id="__codelineno-43-54" name="__codelineno-43-54" href="#__codelineno-43-54"></a>
<a id="__codelineno-43-55" name="__codelineno-43-55" href="#__codelineno-43-55"></a><span class="x">    public function onAfterNotificationRead($params, $result)</span>
<a id="__codelineno-43-56" name="__codelineno-43-56" href="#__codelineno-43-56"></a><span class="x">    {</span>
<a id="__codelineno-43-57" name="__codelineno-43-57" href="#__codelineno-43-57"></a><span class="x">        // Code executed after notification is read</span>
<a id="__codelineno-43-58" name="__codelineno-43-58" href="#__codelineno-43-58"></a><span class="x">        // Код, выполняемый после прочтения уведомления</span>
<a id="__codelineno-43-59" name="__codelineno-43-59" href="#__codelineno-43-59"></a><span class="x">        return $result;</span>
<a id="__codelineno-43-60" name="__codelineno-43-60" href="#__codelineno-43-60"></a><span class="x">    }</span>
<a id="__codelineno-43-61" name="__codelineno-43-61" href="#__codelineno-43-61"></a><span class="x">}</span>
<a id="__codelineno-43-62" name="__codelineno-43-62" href="#__codelineno-43-62"></a>
<a id="__codelineno-43-63" name="__codelineno-43-63" href="#__codelineno-43-63"></a><span class="x">// Register handler</span>
<a id="__codelineno-43-64" name="__codelineno-43-64" href="#__codelineno-43-64"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-43-65" name="__codelineno-43-65" href="#__codelineno-43-65"></a><span class="x">\Bitrix\Im\Notification\Handler::register(&#39;custom_notification&#39;, CustomNotificationHandler::class);</span>
<a id="__codelineno-43-66" name="__codelineno-43-66" href="#__codelineno-43-66"></a>
<a id="__codelineno-43-67" name="__codelineno-43-67" href="#__codelineno-43-67"></a><span class="x">// Legacy</span>
<a id="__codelineno-43-68" name="__codelineno-43-68" href="#__codelineno-43-68"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-43-69" name="__codelineno-43-69" href="#__codelineno-43-69"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-43-70" name="__codelineno-43-70" href="#__codelineno-43-70"></a><span class="x">class CCustomNotificationHandler extends CIMNotificationHandler</span>
<a id="__codelineno-43-71" name="__codelineno-43-71" href="#__codelineno-43-71"></a><span class="x">{</span>
<a id="__codelineno-43-72" name="__codelineno-43-72" href="#__codelineno-43-72"></a><span class="x">    public function OnBeforeNotificationCreate($params)</span>
<a id="__codelineno-43-73" name="__codelineno-43-73" href="#__codelineno-43-73"></a><span class="x">    {</span>
<a id="__codelineno-43-74" name="__codelineno-43-74" href="#__codelineno-43-74"></a><span class="x">        // Code executed before notification is created</span>
<a id="__codelineno-43-75" name="__codelineno-43-75" href="#__codelineno-43-75"></a><span class="x">        // Код, выполняемый перед созданием уведомления</span>
<a id="__codelineno-43-76" name="__codelineno-43-76" href="#__codelineno-43-76"></a><span class="x">        return $params;</span>
<a id="__codelineno-43-77" name="__codelineno-43-77" href="#__codelineno-43-77"></a><span class="x">    }</span>
<a id="__codelineno-43-78" name="__codelineno-43-78" href="#__codelineno-43-78"></a>
<a id="__codelineno-43-79" name="__codelineno-43-79" href="#__codelineno-43-79"></a><span class="x">    public function OnAfterNotificationCreate($params, $result)</span>
<a id="__codelineno-43-80" name="__codelineno-43-80" href="#__codelineno-43-80"></a><span class="x">    {</span>
<a id="__codelineno-43-81" name="__codelineno-43-81" href="#__codelineno-43-81"></a><span class="x">        // Code executed after notification is created</span>
<a id="__codelineno-43-82" name="__codelineno-43-82" href="#__codelineno-43-82"></a><span class="x">        // Код, выполняемый после создания уведомления</span>
<a id="__codelineno-43-83" name="__codelineno-43-83" href="#__codelineno-43-83"></a><span class="x">        return $result;</span>
<a id="__codelineno-43-84" name="__codelineno-43-84" href="#__codelineno-43-84"></a><span class="x">    }</span>
<a id="__codelineno-43-85" name="__codelineno-43-85" href="#__codelineno-43-85"></a>
<a id="__codelineno-43-86" name="__codelineno-43-86" href="#__codelineno-43-86"></a><span class="x">    public function OnBeforeNotificationUpdate($params)</span>
<a id="__codelineno-43-87" name="__codelineno-43-87" href="#__codelineno-43-87"></a><span class="x">    {</span>
<a id="__codelineno-43-88" name="__codelineno-43-88" href="#__codelineno-43-88"></a><span class="x">        // Code executed before notification is updated</span>
<a id="__codelineno-43-89" name="__codelineno-43-89" href="#__codelineno-43-89"></a><span class="x">        // Код, выполняемый перед обновлением уведомления</span>
<a id="__codelineno-43-90" name="__codelineno-43-90" href="#__codelineno-43-90"></a><span class="x">        return $params;</span>
<a id="__codelineno-43-91" name="__codelineno-43-91" href="#__codelineno-43-91"></a><span class="x">    }</span>
<a id="__codelineno-43-92" name="__codelineno-43-92" href="#__codelineno-43-92"></a>
<a id="__codelineno-43-93" name="__codelineno-43-93" href="#__codelineno-43-93"></a><span class="x">    public function OnAfterNotificationUpdate($params, $result)</span>
<a id="__codelineno-43-94" name="__codelineno-43-94" href="#__codelineno-43-94"></a><span class="x">    {</span>
<a id="__codelineno-43-95" name="__codelineno-43-95" href="#__codelineno-43-95"></a><span class="x">        // Code executed after notification is updated</span>
<a id="__codelineno-43-96" name="__codelineno-43-96" href="#__codelineno-43-96"></a><span class="x">        // Код, выполняемый после обновления уведомления</span>
<a id="__codelineno-43-97" name="__codelineno-43-97" href="#__codelineno-43-97"></a><span class="x">        return $result;</span>
<a id="__codelineno-43-98" name="__codelineno-43-98" href="#__codelineno-43-98"></a><span class="x">    }</span>
<a id="__codelineno-43-99" name="__codelineno-43-99" href="#__codelineno-43-99"></a>
<a id="__codelineno-43-100" name="__codelineno-43-100" href="#__codelineno-43-100"></a><span class="x">    public function OnBeforeNotificationDelete($params)</span>
<a id="__codelineno-43-101" name="__codelineno-43-101" href="#__codelineno-43-101"></a><span class="x">    {</span>
<a id="__codelineno-43-102" name="__codelineno-43-102" href="#__codelineno-43-102"></a><span class="x">        // Code executed before notification is deleted</span>
<a id="__codelineno-43-103" name="__codelineno-43-103" href="#__codelineno-43-103"></a><span class="x">        // Код, выполняемый перед удалением уведомления</span>
<a id="__codelineno-43-104" name="__codelineno-43-104" href="#__codelineno-43-104"></a><span class="x">        return $params;</span>
<a id="__codelineno-43-105" name="__codelineno-43-105" href="#__codelineno-43-105"></a><span class="x">    }</span>
<a id="__codelineno-43-106" name="__codelineno-43-106" href="#__codelineno-43-106"></a>
<a id="__codelineno-43-107" name="__codelineno-43-107" href="#__codelineno-43-107"></a><span class="x">    public function OnAfterNotificationDelete($params, $result)</span>
<a id="__codelineno-43-108" name="__codelineno-43-108" href="#__codelineno-43-108"></a><span class="x">    {</span>
<a id="__codelineno-43-109" name="__codelineno-43-109" href="#__codelineno-43-109"></a><span class="x">        // Code executed after notification is deleted</span>
<a id="__codelineno-43-110" name="__codelineno-43-110" href="#__codelineno-43-110"></a><span class="x">        // Код, выполняемый после удаления уведомления</span>
<a id="__codelineno-43-111" name="__codelineno-43-111" href="#__codelineno-43-111"></a><span class="x">        return $result;</span>
<a id="__codelineno-43-112" name="__codelineno-43-112" href="#__codelineno-43-112"></a><span class="x">    }</span>
<a id="__codelineno-43-113" name="__codelineno-43-113" href="#__codelineno-43-113"></a>
<a id="__codelineno-43-114" name="__codelineno-43-114" href="#__codelineno-43-114"></a><span class="x">    public function OnBeforeNotificationRead($params)</span>
<a id="__codelineno-43-115" name="__codelineno-43-115" href="#__codelineno-43-115"></a><span class="x">    {</span>
<a id="__codelineno-43-116" name="__codelineno-43-116" href="#__codelineno-43-116"></a><span class="x">        // Code executed before notification is read</span>
<a id="__codelineno-43-117" name="__codelineno-43-117" href="#__codelineno-43-117"></a><span class="x">        // Код, выполняемый перед прочтением уведомления</span>
<a id="__codelineno-43-118" name="__codelineno-43-118" href="#__codelineno-43-118"></a><span class="x">        return $params;</span>
<a id="__codelineno-43-119" name="__codelineno-43-119" href="#__codelineno-43-119"></a><span class="x">    }</span>
<a id="__codelineno-43-120" name="__codelineno-43-120" href="#__codelineno-43-120"></a>
<a id="__codelineno-43-121" name="__codelineno-43-121" href="#__codelineno-43-121"></a><span class="x">    public function OnAfterNotificationRead($params, $result)</span>
<a id="__codelineno-43-122" name="__codelineno-43-122" href="#__codelineno-43-122"></a><span class="x">    {</span>
<a id="__codelineno-43-123" name="__codelineno-43-123" href="#__codelineno-43-123"></a><span class="x">        // Code executed after notification is read</span>
<a id="__codelineno-43-124" name="__codelineno-43-124" href="#__codelineno-43-124"></a><span class="x">        // Код, выполняемый после прочтения уведомления</span>
<a id="__codelineno-43-125" name="__codelineno-43-125" href="#__codelineno-43-125"></a><span class="x">        return $result;</span>
<a id="__codelineno-43-126" name="__codelineno-43-126" href="#__codelineno-43-126"></a><span class="x">    }</span>
<a id="__codelineno-43-127" name="__codelineno-43-127" href="#__codelineno-43-127"></a><span class="x">}</span>
<a id="__codelineno-43-128" name="__codelineno-43-128" href="#__codelineno-43-128"></a>
<a id="__codelineno-43-129" name="__codelineno-43-129" href="#__codelineno-43-129"></a><span class="x">// Register handler</span>
<a id="__codelineno-43-130" name="__codelineno-43-130" href="#__codelineno-43-130"></a><span class="x">// Регистрация обработчика</span>
<a id="__codelineno-43-131" name="__codelineno-43-131" href="#__codelineno-43-131"></a><span class="x">CIMNotificationHandler::Register(&#39;custom_notification&#39;, &#39;CCustomNotificationHandler&#39;);</span>
</code></pre></div>
<h2 id="rest-api-rest-api">REST API | REST API<a class="headerlink" href="#rest-api-rest-api" title="Permanent link">&para;</a></h2>
<h3 id="message-management_1">Message Management | Управление сообщениями<a class="headerlink" href="#message-management_1" title="Permanent link">&para;</a></h3>
<h4 id="send-message_1">Send Message | Отправка сообщения<a class="headerlink" href="#send-message_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="x">// D7</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="x">$result = \Bitrix\Im\Message::add([</span>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="x">    &#39;FROM_USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="x">    &#39;TO_USER_ID&#39; =&gt; $userId,</span>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="x">    &#39;MESSAGE&#39; =&gt; &#39;Hello, this is a test message&#39;,</span>
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="x">    &#39;SYSTEM&#39; =&gt; &#39;N&#39;,</span>
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a><span class="x">    &#39;AUTHOR_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a><span class="x">    &#39;PARAMS&#39; =&gt; [</span>
<a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a><span class="x">        &#39;KEYBOARD&#39; =&gt; [</span>
<a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a><span class="x">            &#39;BOT_ID&#39; =&gt; $botId,</span>
<a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a><span class="x">            &#39;BUTTONS&#39; =&gt; [</span>
<a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a><span class="x">                [</span>
<a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a><span class="x">                    &#39;TEXT&#39; =&gt; &#39;Button 1&#39;,</span>
<a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a><span class="x">                    &#39;ACTION&#39; =&gt; &#39;callback&#39;,</span>
<a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a><span class="x">                    &#39;DATA&#39; =&gt; &#39;action1&#39;</span>
<a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a><span class="x">                ],</span>
<a id="__codelineno-44-20" name="__codelineno-44-20" href="#__codelineno-44-20"></a><span class="x">                [</span>
<a id="__codelineno-44-21" name="__codelineno-44-21" href="#__codelineno-44-21"></a><span class="x">                    &#39;TEXT&#39; =&gt; &#39;Button 2&#39;,</span>
<a id="__codelineno-44-22" name="__codelineno-44-22" href="#__codelineno-44-22"></a><span class="x">                    &#39;ACTION&#39; =&gt; &#39;callback&#39;,</span>
<a id="__codelineno-44-23" name="__codelineno-44-23" href="#__codelineno-44-23"></a><span class="x">                    &#39;DATA&#39; =&gt; &#39;action2&#39;</span>
<a id="__codelineno-44-24" name="__codelineno-44-24" href="#__codelineno-44-24"></a><span class="x">                ]</span>
<a id="__codelineno-44-25" name="__codelineno-44-25" href="#__codelineno-44-25"></a><span class="x">            ]</span>
<a id="__codelineno-44-26" name="__codelineno-44-26" href="#__codelineno-44-26"></a><span class="x">        ]</span>
<a id="__codelineno-44-27" name="__codelineno-44-27" href="#__codelineno-44-27"></a><span class="x">    ]</span>
<a id="__codelineno-44-28" name="__codelineno-44-28" href="#__codelineno-44-28"></a><span class="x">]);</span>
<a id="__codelineno-44-29" name="__codelineno-44-29" href="#__codelineno-44-29"></a>
<a id="__codelineno-44-30" name="__codelineno-44-30" href="#__codelineno-44-30"></a><span class="x">// Legacy</span>
<a id="__codelineno-44-31" name="__codelineno-44-31" href="#__codelineno-44-31"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-44-32" name="__codelineno-44-32" href="#__codelineno-44-32"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-44-33" name="__codelineno-44-33" href="#__codelineno-44-33"></a><span class="x">$result = CIMChat::AddMessage([</span>
<a id="__codelineno-44-34" name="__codelineno-44-34" href="#__codelineno-44-34"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-44-35" name="__codelineno-44-35" href="#__codelineno-44-35"></a><span class="x">    &#39;FROM_USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-44-36" name="__codelineno-44-36" href="#__codelineno-44-36"></a><span class="x">    &#39;TO_USER_ID&#39; =&gt; $userId,</span>
<a id="__codelineno-44-37" name="__codelineno-44-37" href="#__codelineno-44-37"></a><span class="x">    &#39;MESSAGE&#39; =&gt; &#39;Hello, this is a test message&#39;,</span>
<a id="__codelineno-44-38" name="__codelineno-44-38" href="#__codelineno-44-38"></a><span class="x">    &#39;SYSTEM&#39; =&gt; &#39;N&#39;,</span>
<a id="__codelineno-44-39" name="__codelineno-44-39" href="#__codelineno-44-39"></a><span class="x">    &#39;AUTHOR_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-44-40" name="__codelineno-44-40" href="#__codelineno-44-40"></a><span class="x">    &#39;PARAMS&#39; =&gt; [</span>
<a id="__codelineno-44-41" name="__codelineno-44-41" href="#__codelineno-44-41"></a><span class="x">        &#39;KEYBOARD&#39; =&gt; [</span>
<a id="__codelineno-44-42" name="__codelineno-44-42" href="#__codelineno-44-42"></a><span class="x">            &#39;BOT_ID&#39; =&gt; $botId,</span>
<a id="__codelineno-44-43" name="__codelineno-44-43" href="#__codelineno-44-43"></a><span class="x">            &#39;BUTTONS&#39; =&gt; [</span>
<a id="__codelineno-44-44" name="__codelineno-44-44" href="#__codelineno-44-44"></a><span class="x">                [</span>
<a id="__codelineno-44-45" name="__codelineno-44-45" href="#__codelineno-44-45"></a><span class="x">                    &#39;TEXT&#39; =&gt; &#39;Button 1&#39;,</span>
<a id="__codelineno-44-46" name="__codelineno-44-46" href="#__codelineno-44-46"></a><span class="x">                    &#39;ACTION&#39; =&gt; &#39;callback&#39;,</span>
<a id="__codelineno-44-47" name="__codelineno-44-47" href="#__codelineno-44-47"></a><span class="x">                    &#39;DATA&#39; =&gt; &#39;action1&#39;</span>
<a id="__codelineno-44-48" name="__codelineno-44-48" href="#__codelineno-44-48"></a><span class="x">                ],</span>
<a id="__codelineno-44-49" name="__codelineno-44-49" href="#__codelineno-44-49"></a><span class="x">                [</span>
<a id="__codelineno-44-50" name="__codelineno-44-50" href="#__codelineno-44-50"></a><span class="x">                    &#39;TEXT&#39; =&gt; &#39;Button 2&#39;,</span>
<a id="__codelineno-44-51" name="__codelineno-44-51" href="#__codelineno-44-51"></a><span class="x">                    &#39;ACTION&#39; =&gt; &#39;callback&#39;,</span>
<a id="__codelineno-44-52" name="__codelineno-44-52" href="#__codelineno-44-52"></a><span class="x">                    &#39;DATA&#39; =&gt; &#39;action2&#39;</span>
<a id="__codelineno-44-53" name="__codelineno-44-53" href="#__codelineno-44-53"></a><span class="x">                ]</span>
<a id="__codelineno-44-54" name="__codelineno-44-54" href="#__codelineno-44-54"></a><span class="x">            ]</span>
<a id="__codelineno-44-55" name="__codelineno-44-55" href="#__codelineno-44-55"></a><span class="x">        ]</span>
<a id="__codelineno-44-56" name="__codelineno-44-56" href="#__codelineno-44-56"></a><span class="x">    ]</span>
<a id="__codelineno-44-57" name="__codelineno-44-57" href="#__codelineno-44-57"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="update-message_1">Update Message | Обновление сообщения<a class="headerlink" href="#update-message_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="x">// D7</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="x">$result = \Bitrix\Im\Message::update($messageId, [</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="x">    &#39;MESSAGE&#39; =&gt; &#39;Updated message text&#39;,</span>
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="x">    &#39;EDIT_FLAG&#39; =&gt; &#39;Y&#39;</span>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="x">]);</span>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="x">// Legacy</span>
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a><span class="x">$result = CIMChat::UpdateMessage($messageId, [</span>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a><span class="x">    &#39;MESSAGE&#39; =&gt; &#39;Updated message text&#39;,</span>
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a><span class="x">    &#39;EDIT_FLAG&#39; =&gt; &#39;Y&#39;</span>
<a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-message_1">Delete Message | Удаление сообщения<a class="headerlink" href="#delete-message_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="x">// D7</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="x">$result = \Bitrix\Im\Message::delete($messageId);</span>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="x">$result = CIMChat::DeleteMessage($messageId);</span>
</code></pre></div>
<h4 id="get-message_1">Get Message | Получение сообщения<a class="headerlink" href="#get-message_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="x">// D7</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="x">$message = \Bitrix\Im\Message::getById($messageId);</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a><span class="x">$message = CIMChat::GetMessage($messageId);</span>
</code></pre></div>
<h3 id="chat-management_1">Chat Management | Управление чатами<a class="headerlink" href="#chat-management_1" title="Permanent link">&para;</a></h3>
<h4 id="create-chat_1">Create Chat | Создание чата<a class="headerlink" href="#create-chat_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="x">// D7</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="x">$result = \Bitrix\Im\Chat::add([</span>
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Group Chat&#39;,</span>
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;This is a group chat&#39;,</span>
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="x">    &#39;TYPE&#39; =&gt; &#39;GROUP&#39;,</span>
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="x">    &#39;USERS&#39; =&gt; [$userId1, $userId2, $userId3],</span>
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a><span class="x">    &#39;OWNER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a><span class="x">    &#39;COLOR&#39; =&gt; &#39;#FF0000&#39;,</span>
<a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a><span class="x">    &#39;AVATAR&#39; =&gt; $avatarId</span>
<a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="x">]);</span>
<a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a>
<a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a><span class="x">// Legacy</span>
<a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a><span class="x">$result = CIMChat::Add([</span>
<a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Group Chat&#39;,</span>
<a id="__codelineno-48-19" name="__codelineno-48-19" href="#__codelineno-48-19"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;This is a group chat&#39;,</span>
<a id="__codelineno-48-20" name="__codelineno-48-20" href="#__codelineno-48-20"></a><span class="x">    &#39;TYPE&#39; =&gt; &#39;GROUP&#39;,</span>
<a id="__codelineno-48-21" name="__codelineno-48-21" href="#__codelineno-48-21"></a><span class="x">    &#39;USERS&#39; =&gt; [$userId1, $userId2, $userId3],</span>
<a id="__codelineno-48-22" name="__codelineno-48-22" href="#__codelineno-48-22"></a><span class="x">    &#39;OWNER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-48-23" name="__codelineno-48-23" href="#__codelineno-48-23"></a><span class="x">    &#39;COLOR&#39; =&gt; &#39;#FF0000&#39;,</span>
<a id="__codelineno-48-24" name="__codelineno-48-24" href="#__codelineno-48-24"></a><span class="x">    &#39;AVATAR&#39; =&gt; $avatarId</span>
<a id="__codelineno-48-25" name="__codelineno-48-25" href="#__codelineno-48-25"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="update-chat_1">Update Chat | Обновление чата<a class="headerlink" href="#update-chat_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="x">// D7</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="x">$result = \Bitrix\Im\Chat::update($chatId, [</span>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Updated Group Chat&#39;,</span>
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;This is an updated group chat&#39;,</span>
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="x">    &#39;COLOR&#39; =&gt; &#39;#00FF00&#39;</span>
<a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="x">]);</span>
<a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>
<a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a><span class="x">// Legacy</span>
<a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a><span class="x">$result = CIMChat::Update($chatId, [</span>
<a id="__codelineno-49-14" name="__codelineno-49-14" href="#__codelineno-49-14"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Updated Group Chat&#39;,</span>
<a id="__codelineno-49-15" name="__codelineno-49-15" href="#__codelineno-49-15"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;This is an updated group chat&#39;,</span>
<a id="__codelineno-49-16" name="__codelineno-49-16" href="#__codelineno-49-16"></a><span class="x">    &#39;COLOR&#39; =&gt; &#39;#00FF00&#39;</span>
<a id="__codelineno-49-17" name="__codelineno-49-17" href="#__codelineno-49-17"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-chat_1">Delete Chat | Удаление чата<a class="headerlink" href="#delete-chat_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="x">// D7</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="x">$result = \Bitrix\Im\Chat::delete($chatId);</span>
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>
<a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="x">$result = CIMChat::Delete($chatId);</span>
</code></pre></div>
<h4 id="get-chat_1">Get Chat | Получение чата<a class="headerlink" href="#get-chat_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="x">// D7</span>
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="x">$chat = \Bitrix\Im\Chat::getById($chatId);</span>
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a><span class="x">$chat = CIMChat::GetByID($chatId);</span>
</code></pre></div>
<h4 id="join-chat">Join Chat | Присоединение к чату<a class="headerlink" href="#join-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="x">// D7</span>
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="x">$result = \Bitrix\Im\Chat::join($chatId, $userId);</span>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>
<a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a><span class="x">$result = CIMChat::Join($chatId, $userId);</span>
</code></pre></div>
<h4 id="leave-chat">Leave Chat | Выход из чата<a class="headerlink" href="#leave-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="x">// D7</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="x">$result = \Bitrix\Im\Chat::leave($chatId, $userId);</span>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>
<a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a><span class="x">$result = CIMChat::Leave($chatId, $userId);</span>
</code></pre></div>
<h4 id="invite-to-chat">Invite to Chat | Приглашение в чат<a class="headerlink" href="#invite-to-chat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="x">// D7</span>
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="x">$result = \Bitrix\Im\Chat::invite($chatId, [$userId1, $userId2]);</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a><span class="x">$result = CIMChat::Invite($chatId, [$userId1, $userId2]);</span>
</code></pre></div>
<h3 id="user-management_1">User Management | Управление пользователями<a class="headerlink" href="#user-management_1" title="Permanent link">&para;</a></h3>
<h4 id="update-user-status">Update User Status | Обновление статуса пользователя<a class="headerlink" href="#update-user-status" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="x">// D7</span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="x">$result = \Bitrix\Im\User::updateStatus($userId, &#39;online&#39;);</span>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="x">$result = CIMStatus::Set($userId, &#39;online&#39;);</span>
</code></pre></div>
<h4 id="update-user-avatar">Update User Avatar | Обновление аватара пользователя<a class="headerlink" href="#update-user-avatar" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="x">// D7</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="x">$result = \Bitrix\Im\User::updateAvatar($userId, $avatarId);</span>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a><span class="x">$result = CIMUser::SetAvatar($userId, $avatarId);</span>
</code></pre></div>
<h3 id="file-management_1">File Management | Управление файлами<a class="headerlink" href="#file-management_1" title="Permanent link">&para;</a></h3>
<h4 id="upload-file_1">Upload File | Загрузка файла<a class="headerlink" href="#upload-file_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="x">// D7</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="x">$result = \Bitrix\Im\File::upload([</span>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="x">    &#39;CHAT_ID&#39; =&gt; $chatId,</span>
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="x">    &#39;USER_ID&#39; =&gt; $USER-&gt;GetID(),</span>
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="x">    &#39;FILE_ID&#39; =&gt; $fileId,</span>
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a><span class="x">    &#39;NAME&#39; =&gt; &#39;document.pdf&#39;,</span>
<a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a><span class="x">    &#39;DESCRIPTION&#39; =&gt; &#39;This is a document&#39;</span>
<a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a><span class="x">]);</span>
<a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a>
<a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a><span class="x">// Legacy</span>
<a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a><span class="x">$result = CIMDisk::UploadFile($chatId, $USER-&gt;GetID(), $fileId, &#39;document.pdf&#39;, &#39;This is a document&#39;);</span>
</code></pre></div>
<h4 id="delete-file_1">Delete File | Удаление файла<a class="headerlink" href="#delete-file_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="x">// D7</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="x">$result = \Bitrix\Im\File::delete($fileId);</span>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="x">$result = CIMDisk::DeleteFile($fileId);</span>
</code></pre></div>
<h3 id="notification-management">Notification Management | Управление уведомлениями<a class="headerlink" href="#notification-management" title="Permanent link">&para;</a></h3>
<h4 id="create-notification">Create Notification | Создание уведомления<a class="headerlink" href="#create-notification" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="x">// D7</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="x">$result = \Bitrix\Im\Notification::add([</span>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="x">    &#39;USER_ID&#39; =&gt; $userId,</span>
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="x">    &#39;TYPE&#39; =&gt; &#39;SYSTEM&#39;,</span>
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Notification Title&#39;,</span>
<a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="x">    &#39;MESSAGE&#39; =&gt; &#39;This is a notification message&#39;,</span>
<a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a><span class="x">    &#39;LINK&#39; =&gt; &#39;/path/to/page&#39;,</span>
<a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a><span class="x">    &#39;PARAMS&#39; =&gt; [</span>
<a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a><span class="x">        &#39;KEY1&#39; =&gt; &#39;VALUE1&#39;,</span>
<a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a><span class="x">        &#39;KEY2&#39; =&gt; &#39;VALUE2&#39;</span>
<a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a><span class="x">    ]</span>
<a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a><span class="x">]);</span>
<a id="__codelineno-59-15" name="__codelineno-59-15" href="#__codelineno-59-15"></a>
<a id="__codelineno-59-16" name="__codelineno-59-16" href="#__codelineno-59-16"></a><span class="x">// Legacy</span>
<a id="__codelineno-59-17" name="__codelineno-59-17" href="#__codelineno-59-17"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-59-18" name="__codelineno-59-18" href="#__codelineno-59-18"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-59-19" name="__codelineno-59-19" href="#__codelineno-59-19"></a><span class="x">$result = CIMNotify::Add([</span>
<a id="__codelineno-59-20" name="__codelineno-59-20" href="#__codelineno-59-20"></a><span class="x">    &#39;USER_ID&#39; =&gt; $userId,</span>
<a id="__codelineno-59-21" name="__codelineno-59-21" href="#__codelineno-59-21"></a><span class="x">    &#39;TYPE&#39; =&gt; &#39;SYSTEM&#39;,</span>
<a id="__codelineno-59-22" name="__codelineno-59-22" href="#__codelineno-59-22"></a><span class="x">    &#39;TITLE&#39; =&gt; &#39;Notification Title&#39;,</span>
<a id="__codelineno-59-23" name="__codelineno-59-23" href="#__codelineno-59-23"></a><span class="x">    &#39;MESSAGE&#39; =&gt; &#39;This is a notification message&#39;,</span>
<a id="__codelineno-59-24" name="__codelineno-59-24" href="#__codelineno-59-24"></a><span class="x">    &#39;LINK&#39; =&gt; &#39;/path/to/page&#39;,</span>
<a id="__codelineno-59-25" name="__codelineno-59-25" href="#__codelineno-59-25"></a><span class="x">    &#39;PARAMS&#39; =&gt; [</span>
<a id="__codelineno-59-26" name="__codelineno-59-26" href="#__codelineno-59-26"></a><span class="x">        &#39;KEY1&#39; =&gt; &#39;VALUE1&#39;,</span>
<a id="__codelineno-59-27" name="__codelineno-59-27" href="#__codelineno-59-27"></a><span class="x">        &#39;KEY2&#39; =&gt; &#39;VALUE2&#39;</span>
<a id="__codelineno-59-28" name="__codelineno-59-28" href="#__codelineno-59-28"></a><span class="x">    ]</span>
<a id="__codelineno-59-29" name="__codelineno-59-29" href="#__codelineno-59-29"></a><span class="x">]);</span>
</code></pre></div>
<h4 id="delete-notification_1">Delete Notification | Удаление уведомления<a class="headerlink" href="#delete-notification_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="x">// D7</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="x">$result = \Bitrix\Im\Notification::delete($notificationId);</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a>
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="x">$result = CIMNotify::Delete($notificationId);</span>
</code></pre></div>
<h4 id="mark-notification-as-read_1">Mark Notification as Read | Отметка уведомления как прочитанного<a class="headerlink" href="#mark-notification-as-read_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="x">// D7</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="x">// Requires: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="x">// Требуется: Bitrix\Main\Loader::includeModule(&#39;im&#39;)</span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="x">$result = \Bitrix\Im\Notification::markAsRead($notificationId);</span>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="x">// Legacy</span>
<a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="x">// Requires: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="x">// Требуется: CModule::IncludeModule(&#39;im&#39;)</span>
<a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a><span class="x">$result = CIMNotify::MarkAsRead($notificationId);</span>
</code></pre></div>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  К началу
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/axbuild" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://t.me/bitrixdevelopers" target="_blank" rel="noopener" title="t.me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716 43.8 43.8 0 0 1 .417 9.769"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Принять</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Управлять настройками</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "navigation.tracking", "navigation.expand", "navigation.path", "toc.integrate", "search.highlight", "search.share", "search.suggest", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": ["Bitrix24", "API", "REST API", "CRM", "Development", "Integration", "Modules", "Documentation"], "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>